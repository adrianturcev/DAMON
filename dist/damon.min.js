(()=>{var T=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var Je=Object.prototype.hasOwnProperty;var Re=(l=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(l,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):l)(function(l){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+l+'" is not supported')});var $e=(l,r)=>()=>(l&&(r=l(l=0)),r);var B=(l,r)=>()=>(r||l((r={exports:{}}).exports,r),r.exports),Ce=(l,r)=>{for(var n in r)T(l,n,{get:r[n],enumerable:!0})},De=(l,r,n,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of ve(r))!Je.call(l,t)&&t!==n&&T(l,t,{get:()=>r[t],enumerable:!(e=Le(r,t))||e.enumerable});return l};var Ie=l=>De(T({},"__esModule",{value:!0}),l);var Ne={};Ce(Ne,{__addDisposableResource:()=>de,__assign:()=>I,__asyncDelegator:()=>ae,__asyncGenerator:()=>oe,__asyncValues:()=>fe,__await:()=>C,__awaiter:()=>te,__classPrivateFieldGet:()=>ge,__classPrivateFieldIn:()=>ye,__classPrivateFieldSet:()=>pe,__createBinding:()=>P,__decorate:()=>M,__disposeResources:()=>me,__esDecorate:()=>W,__exportStar:()=>ne,__extends:()=>H,__generator:()=>re,__importDefault:()=>he,__importStar:()=>ce,__makeTemplateObject:()=>ue,__metadata:()=>ee,__param:()=>Q,__propKey:()=>Z,__read:()=>V,__rest:()=>X,__rewriteRelativeImportExtension:()=>Oe,__runInitializers:()=>z,__setFunctionName:()=>j,__spread:()=>ie,__spreadArray:()=>se,__spreadArrays:()=>le,__values:()=>k,default:()=>Fe});function H(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");U(l,r);function n(){this.constructor=l}l.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function X(l,r){var n={};for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&r.indexOf(e)<0&&(n[e]=l[e]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(l);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(l,e[t])&&(n[e[t]]=l[e[t]]);return n}function M(l,r,n,e){var t=arguments.length,s=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,n):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(l,r,n,e);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(s=(t<3?a(s):t>3?a(r,n,s):a(r,n))||s);return t>3&&s&&Object.defineProperty(r,n,s),s}function Q(l,r){return function(n,e){r(n,e,l)}}function W(l,r,n,e,t,s){function a(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var o=e.kind,h=o==="getter"?"get":o==="setter"?"set":"value",g=!r&&l?e.static?l:l.prototype:null,N=r||(g?Object.getOwnPropertyDescriptor(g,e.name):{}),f,b=!1,c=n.length-1;c>=0;c--){var m={};for(var u in e)m[u]=u==="access"?{}:e[u];for(var u in e.access)m.access[u]=e.access[u];m.addInitializer=function(y){if(b)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(y||null))};var d=(0,n[c])(o==="accessor"?{get:N.get,set:N.set}:N[h],m);if(o==="accessor"){if(d===void 0)continue;if(d===null||typeof d!="object")throw new TypeError("Object expected");(f=a(d.get))&&(N.get=f),(f=a(d.set))&&(N.set=f),(f=a(d.init))&&t.unshift(f)}else(f=a(d))&&(o==="field"?t.unshift(f):N[h]=f)}g&&Object.defineProperty(g,e.name,N),b=!0}function z(l,r,n){for(var e=arguments.length>2,t=0;t<r.length;t++)n=e?r[t].call(l,n):r[t].call(l);return e?n:void 0}function Z(l){return typeof l=="symbol"?l:"".concat(l)}function j(l,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function ee(l,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,r)}function te(l,r,n,e){function t(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(N){try{g(e.next(N))}catch(f){a(f)}}function h(N){try{g(e.throw(N))}catch(f){a(f)}}function g(N){N.done?s(N.value):t(N.value).then(o,h)}g((e=e.apply(l,r||[])).next())})}function re(l,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,t,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(g){return function(N){return h([g,N])}}function h(g){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,g[0]&&(n=0)),n;)try{if(e=1,t&&(s=g[0]&2?t.return:g[0]?t.throw||((s=t.return)&&s.call(t),0):t.next)&&!(s=s.call(t,g[1])).done)return s;switch(t=0,s&&(g=[g[0]&2,s.value]),g[0]){case 0:case 1:s=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,t=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!s||g[1]>s[0]&&g[1]<s[3])){n.label=g[1];break}if(g[0]===6&&n.label<s[1]){n.label=s[1],s=g;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(g);break}s[2]&&n.ops.pop(),n.trys.pop();continue}g=r.call(l,n)}catch(N){g=[6,N],t=0}finally{e=s=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function ne(l,r){for(var n in l)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&P(r,l,n)}function k(l){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&l[r],e=0;if(n)return n.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&e>=l.length&&(l=void 0),{value:l&&l[e++],done:!l}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(l,r){var n=typeof Symbol=="function"&&l[Symbol.iterator];if(!n)return l;var e=n.call(l),t,s=[],a;try{for(;(r===void 0||r-- >0)&&!(t=e.next()).done;)s.push(t.value)}catch(o){a={error:o}}finally{try{t&&!t.done&&(n=e.return)&&n.call(e)}finally{if(a)throw a.error}}return s}function ie(){for(var l=[],r=0;r<arguments.length;r++)l=l.concat(V(arguments[r]));return l}function le(){for(var l=0,r=0,n=arguments.length;r<n;r++)l+=arguments[r].length;for(var e=Array(l),t=0,r=0;r<n;r++)for(var s=arguments[r],a=0,o=s.length;a<o;a++,t++)e[t]=s[a];return e}function se(l,r,n){if(n||arguments.length===2)for(var e=0,t=r.length,s;e<t;e++)(s||!(e in r))&&(s||(s=Array.prototype.slice.call(r,0,e)),s[e]=r[e]);return l.concat(s||Array.prototype.slice.call(r))}function C(l){return this instanceof C?(this.v=l,this):new C(l)}function oe(l,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n.apply(l,r||[]),t,s=[];return t=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),t[Symbol.asyncIterator]=function(){return this},t;function a(c){return function(m){return Promise.resolve(m).then(c,f)}}function o(c,m){e[c]&&(t[c]=function(u){return new Promise(function(d,y){s.push([c,u,d,y])>1||h(c,u)})},m&&(t[c]=m(t[c])))}function h(c,m){try{g(e[c](m))}catch(u){b(s[0][3],u)}}function g(c){c.value instanceof C?Promise.resolve(c.value.v).then(N,f):b(s[0][2],c)}function N(c){h("next",c)}function f(c){h("throw",c)}function b(c,m){c(m),s.shift(),s.length&&h(s[0][0],s[0][1])}}function ae(l){var r,n;return r={},e("next"),e("throw",function(t){throw t}),e("return"),r[Symbol.iterator]=function(){return this},r;function e(t,s){r[t]=l[t]?function(a){return(n=!n)?{value:C(l[t](a)),done:!1}:s?s(a):a}:s}}function fe(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=l[Symbol.asyncIterator],n;return r?r.call(l):(l=typeof k=="function"?k(l):l[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n);function e(s){n[s]=l[s]&&function(a){return new Promise(function(o,h){a=l[s](a),t(o,h,a.done,a.value)})}}function t(s,a,o,h){Promise.resolve(h).then(function(g){s({value:g,done:o})},a)}}function ue(l,r){return Object.defineProperty?Object.defineProperty(l,"raw",{value:r}):l.raw=r,l}function ce(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var n=G(l),e=0;e<n.length;e++)n[e]!=="default"&&P(r,l,n[e]);return ke(r,l),r}function he(l){return l&&l.__esModule?l:{default:l}}function ge(l,r,n,e){if(n==="a"&&!e)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?l!==r||!e:!r.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?e:n==="a"?e.call(l):e?e.value:r.get(l)}function pe(l,r,n,e,t){if(e==="m")throw new TypeError("Private method is not writable");if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?l!==r||!t:!r.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e==="a"?t.call(l,n):t?t.value=n:r.set(l,n),n}function ye(l,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?r===l:l.has(r)}function de(l,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var e,t;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=r[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=r[Symbol.dispose],n&&(t=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");t&&(e=function(){try{t.call(this)}catch(s){return Promise.reject(s)}}),l.stack.push({value:r,dispose:e,async:n})}else n&&l.stack.push({async:!0});return r}function me(l){function r(s){l.error=l.hasError?new Pe(s,l.error,"An error was suppressed during disposal."):s,l.hasError=!0}var n,e=0;function t(){for(;n=l.stack.pop();)try{if(!n.async&&e===1)return e=0,l.stack.push(n),Promise.resolve().then(t);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return e|=2,Promise.resolve(s).then(t,function(a){return r(a),t()})}else e|=1}catch(a){r(a)}if(e===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return t()}function Oe(l,r){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,e,t,s,a){return e?r?".jsx":".js":t&&(!s||!a)?n:t+s+"."+a.toLowerCase()+"js"}):l}var U,I,P,ke,G,Pe,Fe,be=$e(()=>{U=function(l,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},U(l,r)};I=function(){return I=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},I.apply(this,arguments)};P=Object.create?function(l,r,n,e){e===void 0&&(e=n);var t=Object.getOwnPropertyDescriptor(r,n);(!t||("get"in t?!r.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(l,e,t)}:function(l,r,n,e){e===void 0&&(e=n),l[e]=r[n]};ke=Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r},G=function(l){return G=Object.getOwnPropertyNames||function(r){var n=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[n.length]=e);return n},G(l)};Pe=typeof SuppressedError=="function"?SuppressedError:function(l,r,n){var e=new Error(n);return e.name="SuppressedError",e.error=l,e.suppressed=r,e};Fe={__extends:H,__assign:I,__rest:X,__decorate:M,__param:Q,__esDecorate:W,__runInitializers:z,__propKey:Z,__setFunctionName:j,__metadata:ee,__awaiter:te,__generator:re,__createBinding:P,__exportStar:ne,__values:k,__read:V,__spread:ie,__spreadArrays:le,__spreadArray:se,__await:C,__asyncGenerator:oe,__asyncDelegator:ae,__asyncValues:fe,__makeTemplateObject:ue,__importStar:ce,__importDefault:he,__classPrivateFieldGet:ge,__classPrivateFieldSet:pe,__classPrivateFieldIn:ye,__addDisposableResource:de,__disposeResources:me,__rewriteRelativeImportExtension:Oe}});var we=B(q=>{(function(l){"use strict";var r=typeof process=="object"&&process.env?process.env:self;l.parser=function(p){return new f(p)},l.CParser=f,l.CStream=c,l.createStream=b,l.MAX_BUFFER_LENGTH=64*1024,l.DEBUG=r.CDEBUG==="debug",l.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",l.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n={textNode:void 0,numberNode:""},e=l.EVENTS.filter(function(p){return p!=="error"&&p!=="end"}),t=0,s;l.STATE={BEGIN:t++,VALUE:t++,OPEN_OBJECT:t++,CLOSE_OBJECT:t++,OPEN_ARRAY:t++,CLOSE_ARRAY:t++,TEXT_ESCAPE:t++,STRING:t++,BACKSLASH:t++,END:t++,OPEN_KEY:t++,CLOSE_KEY:t++,TRUE:t++,TRUE2:t++,TRUE3:t++,FALSE:t++,FALSE2:t++,FALSE3:t++,FALSE4:t++,NULL:t++,NULL2:t++,NULL3:t++,NUMBER_DECIMAL_POINT:t++,NUMBER_DIGIT:t++};for(var a in l.STATE)l.STATE[l.STATE[a]]=a;t=l.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(p){function i(){this.__proto__=p}return i.prototype=p,new i}),Object.getPrototypeOf||(Object.getPrototypeOf=function(p){return p.__proto__}),Object.keys||(Object.keys=function(p){var i=[];for(var w in p)p.hasOwnProperty(w)&&i.push(w);return i});function h(p){var i=Math.max(l.MAX_BUFFER_LENGTH,10),w=0;for(var O in n){var A=p[O]===void 0?0:p[O].length;if(A>i)switch(O){case"text":closeText(p);break;default:_(p,"Max buffer length exceeded: "+O)}w=Math.max(w,A)}p.bufferCheckPosition=l.MAX_BUFFER_LENGTH-w+p.position}function g(p){for(var i in n)p[i]=n[i]}var N=/[\\"\n]/g;function f(p){if(!(this instanceof f))return new f(p);var i=this;g(i),i.bufferCheckPosition=l.MAX_BUFFER_LENGTH,i.q=i.c=i.p="",i.opt=p||{},i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.state=t.BEGIN,i.stack=new Array,i.position=i.column=0,i.line=1,i.slashed=!1,i.unicodeI=0,i.unicodeS=null,i.depth=0,m(i,"onready")}f.prototype={end:function(){S(this)},write:R,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=Re("stream").Stream}catch{s=function(){}}function b(p){return new c(p)}function c(p){if(!(this instanceof c))return new c(p);this._parser=new f(p),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var i=this;s.apply(i),this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(w){i.emit("error",w),i._parser.error=null},e.forEach(function(w){Object.defineProperty(i,"on"+w,{get:function(){return i._parser["on"+w]},set:function(O){if(!O)return i.removeAllListeners(w),i._parser["on"+w]=O,O;i.on(w,O)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(p){p=new Buffer(p);for(var i=0;i<p.length;i++){var w=p[i];if(this.bytes_remaining>0){for(var O=0;O<this.bytes_remaining;O++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+O]=p[O];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,i=i+O-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&w>=128)if(w>=194&&w<=223&&(this.bytes_in_sequence=2),w>=224&&w<=239&&(this.bytes_in_sequence=3),w>=240&&w<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+i>p.length){for(var A=0;A<=p.length-1-i;A++)this.temp_buffs[this.bytes_in_sequence][A]=p[i+A];return this.bytes_remaining=i+this.bytes_in_sequence-p.length,!0}else{this.string=p.slice(i,i+this.bytes_in_sequence).toString(),i=i+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var v=i;v<p.length&&!(p[v]>=128);v++);this.string=p.slice(i,v).toString(),this._parser.write(this.string),this.emit("data",this.string),i=v-1}},c.prototype.end=function(p){return p&&p.length&&this._parser.write(p.toString()),this._parser.end(),!0},c.prototype.on=function(p,i){var w=this;return!w._parser["on"+p]&&e.indexOf(p)!==-1&&(w._parser["on"+p]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,p),w.emit.apply(w,O)}),s.prototype.on.call(w,p,i)},c.prototype.destroy=function(){g(this._parser),this.emit("close")};function m(p,i,w){l.INFO&&console.log("-- emit",i,w),p[i]&&p[i](w)}function u(p,i,w){d(p),m(p,i,w)}function d(p,i){p.textNode=E(p.opt,p.textNode),p.textNode!==void 0&&m(p,i||"onvalue",p.textNode),p.textNode=void 0}function y(p){p.numberNode&&m(p,"onvalue",parseFloat(p.numberNode)),p.numberNode=""}function E(p,i){return i===void 0||(p.trim&&(i=i.trim()),p.normalize&&(i=i.replace(/\s+/g," "))),i}function _(p,i){return d(p),i+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c,i=new Error(i),p.error=i,m(p,"onerror",i),p}function S(p){return(p.state!==t.VALUE||p.depth!==0)&&_(p,"Unexpected end"),d(p),p.c="",p.closed=!0,m(p,"onend"),f.call(p,p.opt),p}function x(p){return p===o.carriageReturn||p===o.lineFeed||p===o.space||p===o.tab}function R(p){var i=this;if(this.error)throw this.error;if(i.closed)return _(i,"Cannot write after close. Assign an onready handler.");if(p===null)return S(i);var w=0,O=p.charCodeAt(0),A=i.p,v=!1;for(l.DEBUG&&console.log("write -> ["+p+"]");O&&(A=O,i.c=O=p.charCodeAt(w++),A!==O?i.p=A:A=i.p,!!O);)switch(l.DEBUG&&console.log(w,O,l.STATE[i.state]),v?v=!1:(i.position++,O===o.lineFeed?(i.line++,i.column=0):i.column++),i.state){case t.BEGIN:O===o.openBrace?i.state=t.OPEN_OBJECT:O===o.openBracket?i.state=t.OPEN_ARRAY:x(O)||_(i,"Non-whitespace before {[.");continue;case t.OPEN_KEY:case t.OPEN_OBJECT:if(x(O))continue;if(i.state===t.OPEN_KEY)i.stack.push(t.CLOSE_KEY);else if(O===o.closeBrace){m(i,"onopenobject"),this.depth++,m(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||t.VALUE;continue}else i.stack.push(t.CLOSE_OBJECT);O===o.doubleQuote?i.state=t.STRING:_(i,'Malformed object key should start with "');continue;case t.CLOSE_KEY:case t.CLOSE_OBJECT:if(x(O))continue;var Ge=i.state===t.CLOSE_KEY?"key":"object";O===o.colon?(i.state===t.CLOSE_OBJECT?(i.stack.push(t.CLOSE_OBJECT),d(i,"onopenobject"),this.depth++):d(i,"onkey"),i.state=t.VALUE):O===o.closeBrace?(u(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||t.VALUE):O===o.comma?(i.state===t.CLOSE_OBJECT&&i.stack.push(t.CLOSE_OBJECT),d(i),i.state=t.OPEN_KEY):_(i,"Bad object");continue;case t.OPEN_ARRAY:case t.VALUE:if(x(O))continue;if(i.state===t.OPEN_ARRAY)if(m(i,"onopenarray"),this.depth++,i.state=t.VALUE,O===o.closeBracket){m(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||t.VALUE;continue}else i.stack.push(t.CLOSE_ARRAY);O===o.doubleQuote?i.state=t.STRING:O===o.openBrace?i.state=t.OPEN_OBJECT:O===o.openBracket?i.state=t.OPEN_ARRAY:O===o.t?i.state=t.TRUE:O===o.f?i.state=t.FALSE:O===o.n?i.state=t.NULL:O===o.minus?i.numberNode+="-":o._0<=O&&O<=o._9?(i.numberNode+=String.fromCharCode(O),i.state=t.NUMBER_DIGIT):_(i,"Bad value");continue;case t.CLOSE_ARRAY:if(O===o.comma)i.stack.push(t.CLOSE_ARRAY),d(i,"onvalue"),i.state=t.VALUE;else if(O===o.closeBracket)u(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||t.VALUE;else{if(x(O))continue;_(i,"Bad array")}continue;case t.STRING:i.textNode===void 0&&(i.textNode="");var L=w-1,J=i.slashed,$=i.unicodeI;e:for(;;){for(l.DEBUG&&console.log(w,O,l.STATE[i.state],J);$>0;)if(i.unicodeS+=String.fromCharCode(O),O=p.charCodeAt(w++),i.position++,$===4?(i.textNode+=String.fromCharCode(parseInt(i.unicodeS,16)),$=0,L=w-1):$++,!O)break e;if(O===o.doubleQuote&&!J){i.state=i.stack.pop()||t.VALUE,i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}if(O===o.backslash&&!J&&(J=!0,i.textNode+=p.substring(L,w-1),i.position+=w-1-L,O=p.charCodeAt(w++),i.position++,!O))break;if(J){if(J=!1,O===o.n?i.textNode+=`
`:O===o.r?i.textNode+="\r":O===o.t?i.textNode+="	":O===o.f?i.textNode+="\f":O===o.b?i.textNode+="\b":O===o.u?($=1,i.unicodeS=""):i.textNode+=String.fromCharCode(O),O=p.charCodeAt(w++),i.position++,L=w-1,O)continue;break}N.lastIndex=w;var F=N.exec(p);if(F===null){w=p.length+1,i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}if(w=F.index+1,O=p.charCodeAt(F.index),!O){i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}}i.slashed=J,i.unicodeI=$;continue;case t.TRUE:O===o.r?i.state=t.TRUE2:_(i,"Invalid true started with t"+O);continue;case t.TRUE2:O===o.u?i.state=t.TRUE3:_(i,"Invalid true started with tr"+O);continue;case t.TRUE3:O===o.e?(m(i,"onvalue",!0),i.state=i.stack.pop()||t.VALUE):_(i,"Invalid true started with tru"+O);continue;case t.FALSE:O===o.a?i.state=t.FALSE2:_(i,"Invalid false started with f"+O);continue;case t.FALSE2:O===o.l?i.state=t.FALSE3:_(i,"Invalid false started with fa"+O);continue;case t.FALSE3:O===o.s?i.state=t.FALSE4:_(i,"Invalid false started with fal"+O);continue;case t.FALSE4:O===o.e?(m(i,"onvalue",!1),i.state=i.stack.pop()||t.VALUE):_(i,"Invalid false started with fals"+O);continue;case t.NULL:O===o.u?i.state=t.NULL2:_(i,"Invalid null started with n"+O);continue;case t.NULL2:O===o.l?i.state=t.NULL3:_(i,"Invalid null started with nu"+O);continue;case t.NULL3:O===o.l?(m(i,"onvalue",null),i.state=i.stack.pop()||t.VALUE):_(i,"Invalid null started with nul"+O);continue;case t.NUMBER_DECIMAL_POINT:O===o.period?(i.numberNode+=".",i.state=t.NUMBER_DIGIT):_(i,"Leading zero not followed by .");continue;case t.NUMBER_DIGIT:o._0<=O&&O<=o._9?i.numberNode+=String.fromCharCode(O):O===o.period?(i.numberNode.indexOf(".")!==-1&&_(i,"Invalid number has two dots"),i.numberNode+="."):O===o.e||O===o.E?((i.numberNode.indexOf("e")!==-1||i.numberNode.indexOf("E")!==-1)&&_(i,"Invalid number has two exponential"),i.numberNode+="e"):O===o.plus||O===o.minus?(A===o.e||A===o.E||_(i,"Invalid symbol in number"),i.numberNode+=String.fromCharCode(O)):(y(i),w--,v=!0,i.state=i.stack.pop()||t.VALUE);continue;default:_(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&h(i),i}})(typeof q>"u"?clarinet={}:q)});var _e=B(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.stringify=D.parse=void 0;var Te=(be(),Ie(Ne)),Be=Te.__importDefault(we());function Ue(l){let r=K(),n,e;function t(a){try{let o=r.next(a);o.done&&(n=o.value)}catch(o){e=o}}let s=Be.default.parser();if(s.onopenobject=a=>t({type:"openobject",key:a}),s.onopenarray=()=>t({type:"openarray"}),s.onkey=a=>t({type:"key",key:a}),s.onvalue=a=>t({type:"value",value:a}),s.oncloseobject=()=>t({type:"closeobject"}),s.onclosearray=()=>t({type:"closearray"}),s.onerror=a=>t({type:"error",err:a}),r.next(),s.write(l).close(),e)throw e;return n}D.parse=Ue;function Y(l){return Array.isArray(l)?`[${l.map(Y).join(",")}]`:l instanceof Map?`{${[...l].map(([r,n])=>JSON.stringify(r)+":"+Y(n)).join(",")}}`:JSON.stringify(l)}D.stringify=Y;var Ee=Symbol();function*K(){let l=yield;switch(l.type){case"value":return l.value;case"openobject":let r=new Map,n=l.key;for(n===void 0&&(yield);n!==void 0;)r.set(n,yield*K()),n=(yield).key;return r;case"openarray":let e=[],t;for(;;){if(t=yield*K(),t===Ee)return e;e.push(t)}case"closearray":return Ee;case"error":throw l.err;default:throw Error(`Unexpected ParseEvent ${l.type}`)}}});var Ae=B((He,xe)=>{var Se=_e().parse;xe.exports=class{constructor(r=!1){let n=this;if(this.indentation=4,[!0,!1,void 0].indexOf(r)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=r}template(r){let n=this;var e=r.raw[0];for(let s=1;s<r.raw.length;s++)typeof arguments[s]=="string"?e+='"'+arguments[s]+'"':e+=arguments[s],e+=r.raw[s];return n._treeToMap(n._damonToTree(e))}damonToMap(r){let n=this,e=n._damonToTree(r);return e===!0||e===!1||e===null||typeof e=="string"||typeof e=="number"?e:n._treeToMap(n._damonToTree(r))}damonToJSON(r){let n=this;return n.mapToJSON(n.damonToMap(r))}jsonToDamon(r){let n=this;return n.mapToDamon(n.jsonToMap(r),!1)}jsonToMap(r){var e=this._getLines(r,"JSON");if(e=e.filter(t=>!/^ *\/\//.test(t)),e=e.filter(t=>t!=""),e=e.filter(t=>!/^[ \t]+$/.test(t)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="string",t}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1){let t=new Error("Error line number 1: leading 0");throw t.line=1,t.language="DAMON",t}try{return JSON.parse(e[0]*1)}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="number",t}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="infinity",t}else return Se(r)}else return Se(r)}_getLines(r,n="DAMON"){if(["DAMON","JSON"].indexOf(n)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(r===""){let s=new Error("Error line 1: empty string");throw s.line=1,s.language=n,s}if(/[\s]/.test(r)&&r.match(new RegExp(/[\s]/))[0].length==r.length){let s=new Error("Error line 1: string only contains whitespace");throw s.line=1,s.language=n,s}var e=/\r\n/.test(r)?`\r
`:`
`,t=r.split(e);if(/\\*\n/.test(r)&&e==`
`){if(/[^\\]\\(\\\\)*\n/.test(r)){let o=r.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,h=new Error("Error line "+o+": oddly escaped newline");throw h.line=o,h.language=n,h}t=r.split("").reverse().join("").split(/\n/).map(o=>o.split("").reverse().join("")).reverse()}return t}_damonToTree(r){let n=this,e=n._getLines(r),t=e.slice(0);if(e=e.filter(u=>!/^ *\/\//.test(u)),e=e.filter(u=>u!=""),e=e.filter(u=>!/^[ \t]+$/.test(u)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(u){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),u.line=1,u.language="JSON",u.type="string",u}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1){let u=new Error("Error line number 1: leading 0");throw u.line=1,u.language="DAMON",u}try{return JSON.parse(e[0]*1)}catch(u){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),u.line=1,u.language="JSON",u.type="number",u}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(u){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),u.line=1,u.language="JSON",u.type="infinity",u}}let s=0,a=[];for(let u=0,d=t.length;u<d;u++)e.slice(s).indexOf(t[u])>-1?a[u]=e.slice(s).indexOf(t[u]):a[u]=null;let o=new RegExp("^(\\t)+");for(let u=0,d=e.length;u<d;u++){if(o.test(e[u])){let y=e[u].match(o)[0].length;for(let E=0,_=y;E<_;E++)e[u]=e[u].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(e[u])&&/[ \t]+$/.test(e[u])){let y=new Error("Error line "+(a.indexOf(u)+1)+": trailing whitespace");throw y.line=a.indexOf(u)+1,y.language="DAMON",y}}let h=new RegExp("^("+" ".repeat(n.indentation)+")+");if(h.test(e[0])){let u=e[0].match(h)[0].length,d=!0;for(let y=0,E=e.length;y<E;y++)h.test(e[y])&&e[y].match(h)[0].length>=u?e[y]=e[y].slice(u):d=!1;if(!d){let y=new Error("Error line 1: bad formatting");throw y.line=1,y.language="DAMON",y}}else if(h.test(e[1])&&e[1].match(h)[0].length>n.indentation){let u=e[1].match(h)[0].length-n.indentation,d=!0;for(let y=1,E=e.length;y<E;y++)h.test(e[y])&&e[y].match(h)[0].length>=u?e[y]=e[y].slice(u):d=!1;if(!d){let y=new Error("Error line 2: bad formatting");throw y.line=2,y.language="DAMON",y}}let g=!1;if(e.length>1)for(let u=0,d=e.length;u<d;u++)u!==0&&/^- /.test(e[u])&&(g=!0);if(!/^- \{\}$/.test(e[0])&&!/^- \[\]$/.test(e[0])&&(g=!0),g){for(let u=0,d=e.length;u<d;u++)e[u]=" ".repeat(n.indentation)+e[u];e.unshift("- {}")}var N={content:e[0],level:0,id:0,children:[],headless:g,damonOriginalLinesMapping:a},f=N;if(!/^- /.test(e[0].trimStart())||/^ +/.test(e[0])&&(e[0].match(/^ +/)[0].length%n.indentation!=0||e[0].match(/^ +/)[0].length!=n.indentation)){let u=new Error("Error line "+(g*1+1)+": bad formatting");throw u.line=g*1+1,u.language="DAMON",u}e.shift();for(let u=0,d=e.length;u<d;u++){if(!/^- /.test(e[u].trimStart())||/^ +/.test(e[u])&&(e[u].match(/^ +/)[0].length%n.indentation!=0||u==0&&e[u].match(/^ +/)[0].length!=n.indentation||u!=0&&/^- /.test(e[u-1])&&e[u].match(/^ +/)[0].length!=n.indentation||u!=0&&!/^- /.test(e[u-1])&&e[u].match(/^ +/)[0].length>e[u-1].match(/^ +/)[0].length+n.indentation)){console.log(e[u]);let E=new Error("Error line "+(a.indexOf(u)+1)+": bad formatting");throw E.line=a.indexOf(u)+1,E.language="DAMON",E}let y={content:e[u].trimStart().slice(2),level:1+e[u].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(f===N)y.id=N.children.length+1,N.children.push(y);else if(f.level===y.level){var b=n._findListItemCommonDirectParent(f,N);b.level==0?y.id=b.children.length+1:y.id=b.id+"-"+(b.children.length+1),b.children.push(y)}else if(f.level>y.level){var c=n._findListItemCommonAncestor(f,N,y.level);c.level==0?y.id=c.children.length+1:y.id=c.id+"-"+(c.children.length+1),c.children.push(y)}else if(f.level<y.level){var m=n._findListItemCommonDirectParent(f,N);let E=m.children.indexOf(f),_=m.children[E].id,S=m.children[E].children.length+1;y.id=_+"-"+S,m.children[E].children.push(y)}f=y}return N}_findListItemCommonDirectParent(r,n){let e=this;if(n.children.indexOf(r)>-1)return n;var t;for(let s=n.children.length-1,a=0;s>=a;s--)if(t=e._findListItemCommonDirectParent(r,n.children[s]),t)return t}_findListItemCommonAncestor(r,n,e){let t=this;var s=t._findListItemCommonDirectParent(r,n);return s.level<e?s:t._findListItemCommonAncestor(s,n,e)}_treeToMap(r){let n=this;var e=0;if(r.content=="- {}"){let o=new Map;return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,t(r,o)}else if(r.content=="- []"){let o=[];return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,t(r,o)}else{let o=new Map;return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,r.headless&&(o.headless=!0),t(r,o)}function t(o,h){if(typeof o!="object"||o==null||Array.isArray(o)){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,N=new Error("Error line number "+g+": @param { {} } tree");throw N.line=g,N.language="DAMON",N}if(typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map)s(o,h);else if(Array.isArray(h))a(o,h);else{let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,N=new Error("Error line number "+g+": @param { {} | [] } jsonMap");throw N.line=g,N.language="DAMON",N}return h}function s(o,h){for(let g=0,N=o.children.length;g<N;g++)if(e++,o.children[g].content.length==0){let f="";o.children[g].children.length>0?(f="implicit map key",h.set("",new Map),h.implicitMaps===void 0&&(h.implicitMaps=[]),h.implicitMaps.push(""),t(o.children[g],h.get(""))):(f="implicit null key",h.set("",null),h.implicitNulls===void 0&&(h.implicitNulls=[]),h.implicitNulls.push(""))}else{let f=o.children[g].content,b="key";try{if(/^.*: +\[/.test(f)&&f[f.length-1]=="]")if(/: +\[ *\]$/.test(f)){let c=JSON.parse(`["${f.slice(0,-1*f.match(/: +\[ *\]$/)[0].length)}"]`)[0];h.set(c,[]),o.children[g].children.length>0&&t(o.children[g],h.get(c))}else{let c=new RegExp(/: +\[/g),m=f.slice(0,-1).split(c),u=f.match(c).concat([""]),d=m.map((S,x)=>S+u[x]),y="",E=[];for(let S=0,x=m.length;S<x;S++)try{let R;if(S==0?R=m[0]:R=d.slice(0,S).join("")+m[S],y=JSON.parse(`["${R}"]`)[0],b="list",E=JSON.parse(`[${d.slice(S+1).join("")}]`),Array.isArray(E))break}catch{if(S==x-2){let p=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,i=new Error("Error line number "+p+": invalid inline list");throw i.line=p,i.language="DAMON",i}}if(E.every(function(S){return S===!0||S===!1||S===null||typeof S=="string"?!0:!!(isFinite(S)&&!isNaN(parseFloat(S))&&Number.isFinite(S*1)&&!Number.isNaN(S*1))}))h.set(y,E),h.damonInlineArrays===void 0&&(h.damonInlineArrays=[]),h.damonInlineArrays.push(y);else{let S=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(e-1)+2,x=new Error("Error line number "+S+": no nesting in inline lists");throw x.line=S,x.language="DAMON",x}if(o.children[g].children.length>0){let S=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,x=new Error("Error line number "+S+": inline lists can't have children");throw x.line=S,x.language="DAMON",x}}else if(/: +\{ *\}$/.test(f)){let c=JSON.parse(`["${f.slice(0,-1*f.match(/: +\{ *\}$/)[0].length)}"]`)[0];h.set(c,new Map),t(o.children[g],h.get(c))}else{let c=!1;if(/^.*: /.test(f)&&f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]==="true"){let m=f.match(new RegExp(/: +/g))[f.match(new RegExp(/: +/g)).length-1],u=JSON.parse(`["${f.slice(0,-1*m.length-4)}"]`)[0];h.set(u,!0)}else if(/^.*: /.test(f)&&f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]==="false"){let m=f.match(new RegExp(/: +/g))[f.match(new RegExp(/: +/g)).length-1],u=JSON.parse(`["${f.slice(0,-1*m.length-5)}"]`)[0];h.set(u,!1)}else if(/^.*: /.test(f)&&f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]==="null"){let m=f.match(new RegExp(/: +/g))[f.match(new RegExp(/: +/g)).length-1],u=JSON.parse(`["${f.slice(0,-1*m.length-4)}"]`)[0];h.set(u,null)}else if(/^.*: +"/.test(f)&&f[f.length-1]=='"'){let m=f.match(new RegExp(/: +"/g));if(m.length==1){let u=JSON.parse(`["${f.split(m[0])[0]}"]`)[0];b="string";let d=JSON.parse(`["${f.split(m[0]).slice(1).join("").slice(0,-1)}"]`)[0];h.set(u,d)}else if(m.length==2&&/: +"$/.test(f)){let u=JSON.parse(`["${f.split(m[0])[0]}"]`)[0];b="string";let d=JSON.parse(`["${f.split(m[0]).slice(1).join("")+": "}"]`)[0];h.set(u,d)}else{let u=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(e-1)+2,d=new Error("Error line number "+u+": unescaped double quote");throw d.line=u,d.language="DAMON",d}}else if(/^.*: /.test(f)&&isFinite(f.split(": ")[f.split(": ").length-1])&&!isNaN(parseFloat(f.split(": ")[f.split(": ").length-1]))&&Number.isFinite(f.split(": ")[f.split(": ").length-1]*1)&&!Number.isNaN(f.split(": ")[f.split(": ").length-1]*1)){let m=JSON.parse(`["${f.split(": ").slice(0,-1).join(": ")}"]`)[0];b="number";let u=f.match(new RegExp(/: +/g)),d=u[u.length-1],y=f.split(d)[f.split(d).length-1];if(y.indexOf(0)==0&&y.length>1&&y.indexOf(".")!==1){let _=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,S=new Error("Error line number "+_+": leading 0");throw S.line=_,S.language="DAMON",S}let E=JSON.parse(`[${f.split(": ")[f.split(": ").length-1]*1}]`)[0];h.set(m,E)}else if(/^.*: /.test(f)&&f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]*1===1/0){let m=JSON.parse(`["${f.split(": ").slice(0,-1).join(": ")}"]`)[0];b="infinity";let u=JSON.parse(`[${f.split(": ")[f.split(": ").length-1]*1}]`)}else{let m=!1,u=0;if(/\[ *\]$/.test(f)&&(m=!0,u=f.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(f)&&(m=!0,u=f.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(f)&&(m=!0,u=4),/false$/.test(f)&&(m=!0,u=5),/null$/.test(f)&&(m=!0,u=4),/".*"$/.test(f)&&(m=!0,u=f.match(new RegExp(/".*"$/g))[0].length),!m){let d="";for(let y=f.length-1;y>-1&&(d=f[y].concat(d),isFinite(d)&&!isNaN(parseFloat(d))&&Number.isFinite(d*1)&&!Number.isNaN(d*1));y--){if(!/[ \t]/.test(f[y]))break;m=!0,u=d.length}}if(m)if(JSON.parse(`["${f.slice(0,-1*u)}"]`)[0],n.pedantic){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),y=new Error("Error line number "+d+": missing separator");throw y.line=d,y.language="DAMON",y.errorType="pedantic",y}else if(c=!0,o.children[g].children.length>0){b="implicit map key";let d=JSON.parse(`["${f}"]`)[0];h.set(d,new Map),h.implicitMaps===void 0&&(h.implicitMaps=[]),h.implicitMaps.push(d),t(o.children[g],h.get(d))}else{b="implicit null key";let d=JSON.parse(`["${f}"]`)[0];h.set(d,null),h.implicitNulls===void 0&&(h.implicitNulls=[]),h.implicitNulls.push(d)}else{let d=JSON.parse(`["${f.slice(0,-1*u)}"]`)[0];if(n.pedantic)if(/: +$/.test(d)){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),E=new Error("Error line number "+y+": bad value");throw E.line=y,E.language="DAMON",E.errorType="pedantic",E}else{let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),E=new Error("Error line number "+y+": missing separator");throw E.line=y,E.language="DAMON",E.errorType="pedantic",E}else if(c=!0,o.children[g].children.length>0){b="implicit map key";let y=JSON.parse(`["${f}"]`)[0];h.set(y,new Map),h.implicitMaps===void 0&&(h.implicitMaps=[]),h.implicitMaps.push(y),t(o.children[g],h.get(y))}else{b="implicit null key";let y=JSON.parse(`["${f}"]`)[0];h.set(y,null),h.implicitNulls===void 0&&(h.implicitNulls=[]),h.implicitNulls.push(y)}}}if(!c&&o.children[g].children.length>0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,u=new Error("Error line number "+m+": missing container or excess indentation");throw u.line=m,u.language="DAMON",u}}}catch(c){if(c.language===void 0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;console.error("Error line number "+m+": not JSON-compliant, detailed error follows"),c.line=m,c.language="JSON",c.type=b}throw c}}}function a(o,h){for(let g=0,N=o.children.length;g<N;g++)if(e++,o.children[g].content.length){let f=o.children[g].content;if(/^[ \t]*\[/.test(f)&&f[f.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(f))h.push([]),t(o.children[g],h[h.length-1]);else{let b;try{b=JSON.parse(f)}catch{let u=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,d=new Error("Error line number "+u+": invalid inline lists");throw d.line=u,d.language="JSON",d.type="list",d}if(b.every(function(m){return m===!0||m===!1||m===null||typeof m=="string"?!0:!!(isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1))}))h.push(b),h.damonInlineArrays===void 0&&(h.damonInlineArrays=[]),h.damonInlineArrays.push(g);else{let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,u=new Error("Error line number "+m+": no nesting in inline lists");throw u.line=m,u.language="DAMON",u}if(o.children[g].children.length>0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,u=new Error("Error line number "+m+": inline lists can't have children");throw u.line=m,u.language="DAMON",u}}else if(/^[ \t]*\{\}$/.test(f))h.push(new Map),t(o.children[g],h[h.length-1]);else if(/^[ \t]*true$/.test(f))h.push(!0);else if(/^[ \t]*false$/.test(f))h.push(!1);else if(/^[ \t]*null$/.test(f))h.push(null);else if(/^[ \t]*".*"$/.test(f))try{h.push(JSON.parse(`[${f.trimStart()}]`)[0])}catch(b){let c=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+c+": not JSON-compliant, detailed error follows"),b.line=c,b.language="JSON",b.type="string",b}else if(isFinite(f)&&!isNaN(parseFloat(f))&&Number.isFinite(f*1)&&!Number.isNaN(f*1)){if(f.indexOf(0)==0&&f.length>1&&f.indexOf(".")!==1){let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,c=new Error("Error line number "+b+": leading 0");throw c.line=b,c.language="DAMON",c}try{h.push(JSON.parse(`[${f*1}]`)[0])}catch(b){let c=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+c+": not JSON-compliant, detailed error follows"),b.line=c,b.language="JSON",b.type="number",b}}else if(f*1===1/0)try{JSON.parse(f*1)}catch(b){let c=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+c+": not JSON-compliant, detailed error follows"),b.line=c,b.language="JSON",b.type="infinity",b}else{let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,c=new Error("Error line number "+b+": list items can't have a key");throw c.line=b,c.language="DAMON",c}}else{let f=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,b=new Error("Error line number "+f+": empty list node");throw b.line=f,b.language="DAMON",b}}}mapToDamon(r,n){let e=this;var t="";if(Array.isArray(r))t+=`- []
`;else if(typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map)t+=`- {}
`;else return typeof r=="string"&&(r='"'+r+'"'),JSON.parse(r),r;return s(r),e.damonToMap(t.slice(0,-1)),t.slice(0,-1);function s(a,o=1){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map){let N=Array.from(a.keys()),f=!0;for(let b=0,c=N.length;b<c;b++)if(a.get(N[b])!==null){f=!1;break}for(let[b,c]of a)if(typeof c=="object"&&c!==null)if(Array.isArray(c)){let m=0,u=c.filter(function(d){return d===!0||d===!1?!0:d===null?(m++,!0):typeof d=="string"?!0:!!(isFinite(d)&&!isNaN(parseFloat(d))&&Number.isFinite(d*1)&&!Number.isNaN(d*1))});if(c.length==u.length&&o*4+2+c.join(", ").length+m*4<=80||n&&a.damonInlineArrays!==void 0&&a.damonInlineArrays.indexOf(b)>-1){let d="["+c.map(function(y){return typeof y=="string"&&(y=JSON.stringify(y)),y}).join(", ")+"]";t+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+": "+d+`
`}else t+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+`: []
`,s(c,o+1)}else t+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+`: {}
`,s(c,o+1);else f?t+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1):(t+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+": ",c===!0?t+=`true
`:c===!1?t+=`false
`:c===null?t+=`null
`:Number.isFinite(c)&&!Number.isNaN(c)?t+=c+`
`:t+=JSON.stringify(c)+`
`)}else if(Array.isArray(a))for(var h=0,g=a.length;h<g;h++)if(typeof a[h]=="object"&&a[h]!==null)if(Array.isArray(a[h])){let N=0,f=a[h].filter(function(b){return b===!0||b===!1?!0:b===null?(N++,!0):typeof b=="string"?!0:!!(isFinite(b)&&!isNaN(parseFloat(b))&&Number.isFinite(b*1)&&!Number.isNaN(b*1))});if(a[h].length==f.length&&o*4+2+a[h].join(", ").length+N*4<=80||n&&a.damonInlineArrays!==void 0&&a.damonInlineArrays.indexOf(h)>-1){let b="["+a[h].map(function(c){return typeof c=="string"&&(c=JSON.stringify(c)),c}).join(", ")+"]";t+="    ".repeat(o)+"- "+b+`
`}else t+="    ".repeat(o)+`- []
`,s(a[h],o+1)}else t+="    ".repeat(o)+`- {}
`,s(a[h],o+1);else a[h]===!0?t+="    ".repeat(o)+`- true
`:a[h]===!1?t+="    ".repeat(o)+`- false
`:a[h]===null?t+="    ".repeat(o)+`- null
`:Number.isFinite(a[h])&&!Number.isNaN(a[h])?t+="    ".repeat(o)+"- "+a[h]+`
`:t+="    ".repeat(o)+"- "+JSON.stringify(a[h])+`
`}}mapToJSON(r){let n=this;var e="";if(Array.isArray(r))return e+=`[\r
`,t(r),e+="]",JSON.parse(e),e;return typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map?(e+=`{\r
`,t(r),e+="}",JSON.parse(e),e):(typeof r=="string"&&(r=JSON.stringify(r)),JSON.parse(r),r);function t(s,a=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[g,N]of s)typeof N=="object"&&N!==null?Array.isArray(N)?N.length>0?(e+="    ".repeat(a)+`${JSON.stringify(g)}: [\r
`,t(N,a+1),e+="    ".repeat(a)+"]"):e+="    ".repeat(a)+`${JSON.stringify(g)}: []`:Array.from(N.keys()).length>0?(e+="    ".repeat(a)+`${JSON.stringify(g)}: {\r
`,t(N,a+1),e+="    ".repeat(a)+"}"):e+="    ".repeat(a)+`${JSON.stringify(g)}: {}`:N===!0?e+="    ".repeat(a)+`${JSON.stringify(g)}: true`:N===!1?e+="    ".repeat(a)+`${JSON.stringify(g)}: false`:N===null?e+="    ".repeat(a)+`${JSON.stringify(g)}: null`:Number.isFinite(N)&&!Number.isNaN(N)?e+="    ".repeat(a)+`${JSON.stringify(g)}: `+N:e+="    ".repeat(a)+`${JSON.stringify(g)}: `+JSON.stringify(N),g!=Array.from(s.keys())[Array.from(s.keys()).length-1]?e+=`,\r
`:e+=`\r
`;else if(Array.isArray(s))for(var o=0,h=s.length;o<h;o++)typeof s[o]=="object"&&s[o]!==null?Array.isArray(s[o])?s[o].length>0?(e+="    ".repeat(a)+`[\r
`,t(s[o],a+1),e+="    ".repeat(a)+"]"):e+="    ".repeat(a)+"[]":Array.from(s[o].keys()).length>0?(e+="    ".repeat(a)+`{\r
`,t(s[o],a+1),e+="    ".repeat(a)+"}"):e+="    ".repeat(a)+"{}":s[o]===!0?e+="    ".repeat(a)+"true":s[o]===!1?e+="    ".repeat(a)+"false":s[o]===null?e+="    ".repeat(a)+"null":Number.isFinite(s[o])&&!Number.isNaN(s[o])?e+="    ".repeat(a)+s[o]:e+="    ".repeat(a)+JSON.stringify(s[o]),o!=h-1?e+=`,\r
`:e+=`\r
`}}getRangeFromPath(r,n){let e=this,t=e.damonToMap(r),s=-1,a=!1;b(t,n),t.headless&&(s-=1);let o=0,h=0;for(let c=0,m=t.damonOriginalLinesMapping.length;c<m;c++)if(t.damonOriginalLinesMapping[c]!==null&&h++,h==s){o=c+1;break}let g=e._getLines(r)[o],N=0,f=g.length;if(n.length==1)typeof n[n.length-1]=="string"?N=g.length-g.trimStart().slice(2+n[n.length-1].length+2).trimStart().length:N=g.length-g.trimStart().slice(2).length;else if(typeof n[n.length-2]=="string")if(typeof n[n.length-1]=="string")N=g.length-g.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(g[g.length-1]=="]"&&!/\[ *\]$/.test(g)){let c=g.trimStart().slice(2+n[n.length-2].length+2),m=JSON.parse(c),u=m.slice(0,n[n.length-1].length).reduce((E,_)=>E+(_===m[n[n.length-1]]),0),d=0,y=m[n[n.length-1]];typeof y=="string"&&(y='"'+y+'"');for(let E=0,_=u+1;E<_;E++)d=c.indexOf(y,d);N=g.length-c.length+d,f=N+y.length}else N=g.length-g.trimStart().slice(2).length;else if(typeof n[n.length-1]=="string")N=g.length-g.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(g[g.length-1]=="]"&&!/\[ *\]$/.test(g)){let c=g.trimStart().slice(2),m=JSON.parse(c),u=m.slice(0,n[n.length-1]).reduce((E,_)=>E+(_===m[n[n.length-1]]),0),d=0,y=m[n[n.length-1]];typeof y=="string"&&(y='"'+y+'"');for(let E=0,_=u+1;E<_;E++)d=c.indexOf(y,d);N=g.length-c.length+d,f=N+y.length}else N=g.length-g.trimStart().slice(2).length;return[[o,N],[o,f]];function b(c,m,u=[]){if(a!=!0)if(s+=1,typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map)for(let[d,y]of c){if(s+=1,JSON.stringify(m)===JSON.stringify(u.concat([d]))){a=!0;return}typeof y=="object"&&y!==null&&!Array.isArray(y)&&y instanceof Map&&y.constructor===Map&&Array.from(y.keys()).length?(s-=1,b(y,m,u.concat([d]))):Array.isArray(y)&&(c.damonInlineArrays==null||c.damonInlineArrays.indexOf(d)===-1)&&y.length&&(s-=1,b(y,m,u.concat([d])))}else for(let d=0,y=c.length;d<y;d++){if(s+=1,JSON.stringify(m)===JSON.stringify(u.concat([d]))){a=!0;return}typeof c[d]=="object"&&c[d]!==null&&!Array.isArray(c[d])&&c[d]instanceof Map&&c[d].constructor===Map&&Array.from(c[d].keys()).length?(s-=1,b(c[d],m,u.concat([d]))):Array.isArray(c[d])&&(c.damonInlineArrays==null||c.damonInlineArrays.indexOf(d)===-1)&&c[d].length&&(s-=1,b(c[d],m,u.concat([d])))}}}getTokenFromCoordinates(r,n){let e=this,t={},s=e._getLines(r).slice(0,n[0]);if(s[n[0]-1]=="")return t.type="newline",t.path=null,t.range=[n,n],t;if(/^[ \t]+$/.test(s[n[0]-1]))return t.type="indentation",t.path=null,t.range=[[n[0],1],[n[0],s[s.length-1].length]],t;if(/^[ \t]+/.test(s[n[0]-1].slice(0,n[1]-1))&&(t.type="indentation",t.range=[[n[0],1],[n[0],s[n[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(s[n[0]-1]))return t.type=="indentation"?(t.path=null,t):(t.type="comment",t.path=null,t.range=[[[n[0],s[n[0]-1].split("//")[0].length]],[[n[0],s[n[0]-1].length]]],t);if(s.length==1)try{let N=JSON.parse(r);if(N===!0||N===!1||N===null||typeof N=="string"||typeof N=="number"){let f=r.match(/^ */)[0].length,b=r.match(/ *$/)[0].length;return t.type="null",typeof N!="object"&&(t.type=typeof N),t.path=null,t.range=[[0,f],[0,r.length-b]],t}}catch{}let a=e.damonToMap(s.join(`
`)),o=Array.from(a.keys()),h=[];for(;o.length;){let N=o[o.length-1];if(h.push(N),typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map?a=a.get(N):Array.isArray(a)&&(a=a[N]),a===!0||a===!1||a===null||typeof a=="string"||typeof a=="number")break;o=Array.from(a.keys())}t.path=h;let g=e.getRangeFromPath(r,h);if(typeof h[h.length-1]=="string")if(n[1]<g[0][1]){let N=s[n[0]-1].slice(0,-1*(g[1][1]-g[0][1])-1).length;if(n[1]<N){let f=s[n[0]-1].match(/^[ \t]+/)[0].length+3;n[1]>=f?(t.type="property",t.range=[[n[0],f],[n[0],N]]):(t.type="hyphen",t.range=[[n[0],f-2],[n[0],f-1]])}else t.type="separator",t.range=[[n[0],N+1],[n[0],g[0][1]-1]]}else t.type="?",t.range=g;else if(n[1]<g[0][1]){t.type="hyphen";let N=s[n[0]-1].match(/^[ \t]+/)[0].length+1;t.range=[[n[0],N],[n[0],N+1]]}else t.type="?",t.range=g;return t}}});(function(){window.Damon=Ae()})();})();
