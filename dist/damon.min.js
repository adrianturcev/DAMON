(()=>{var B=Object.defineProperty;var ve=Object.getOwnPropertyDescriptor;var Re=Object.getOwnPropertyNames;var Je=Object.prototype.hasOwnProperty;var ke=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var Le=(s,t)=>()=>(s&&(t=s(s=0)),t);var U=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),$e=(s,t)=>{for(var r in t)B(s,r,{get:t[r],enumerable:!0})},Ie=(s,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of Re(t))!Je.call(s,e)&&e!==r&&B(s,e,{get:()=>t[e],enumerable:!(n=ve(t,e))||n.enumerable});return s};var Ce=s=>Ie(B({},"__esModule",{value:!0}),s);var Ne={};$e(Ne,{__addDisposableResource:()=>de,__assign:()=>C,__asyncDelegator:()=>ae,__asyncGenerator:()=>oe,__asyncValues:()=>fe,__await:()=>$,__awaiter:()=>te,__classPrivateFieldGet:()=>he,__classPrivateFieldIn:()=>pe,__classPrivateFieldSet:()=>ye,__createBinding:()=>D,__decorate:()=>W,__disposeResources:()=>me,__esDecorate:()=>M,__exportStar:()=>ne,__extends:()=>X,__generator:()=>re,__importDefault:()=>ge,__importStar:()=>ce,__makeTemplateObject:()=>ue,__metadata:()=>ee,__param:()=>z,__propKey:()=>K,__read:()=>V,__rest:()=>Q,__rewriteRelativeImportExtension:()=>Oe,__runInitializers:()=>Z,__setFunctionName:()=>j,__spread:()=>ie,__spreadArray:()=>se,__spreadArrays:()=>le,__values:()=>F,default:()=>Te});function X(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");P(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Q(s,t){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(s);e<n.length;e++)t.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(s,n[e])&&(r[n[e]]=s[n[e]]);return r}function W(s,t,r,n){var e=arguments.length,i=e<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,t,r,n);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(i=(e<3?o(i):e>3?o(t,r,i):o(t,r))||i);return e>3&&i&&Object.defineProperty(t,r,i),i}function z(s,t){return function(r,n){t(r,n,s)}}function M(s,t,r,n,e,i){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var c=n.kind,d=c==="getter"?"get":c==="setter"?"set":"value",g=!t&&s?n.static?s:s.prototype:null,u=t||(g?Object.getOwnPropertyDescriptor(g,n.name):{}),w,O=!1,a=r.length-1;a>=0;a--){var h={};for(var b in n)h[b]=b==="access"?{}:n[b];for(var b in n.access)h.access[b]=n.access[b];h.addInitializer=function(p){if(O)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(p||null))};var f=(0,r[a])(c==="accessor"?{get:u.get,set:u.set}:u[d],h);if(c==="accessor"){if(f===void 0)continue;if(f===null||typeof f!="object")throw new TypeError("Object expected");(w=o(f.get))&&(u.get=w),(w=o(f.set))&&(u.set=w),(w=o(f.init))&&e.unshift(w)}else(w=o(f))&&(c==="field"?e.unshift(w):u[d]=w)}g&&Object.defineProperty(g,n.name,u),O=!0}function Z(s,t,r){for(var n=arguments.length>2,e=0;e<t.length;e++)r=n?t[e].call(s,r):t[e].call(s);return n?r:void 0}function K(s){return typeof s=="symbol"?s:"".concat(s)}function j(s,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function ee(s,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,t)}function te(s,t,r,n){function e(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{g(n.next(u))}catch(w){o(w)}}function d(u){try{g(n.throw(u))}catch(w){o(w)}}function g(u){u.done?i(u.value):e(u.value).then(c,d)}g((n=n.apply(s,t||[])).next())})}function re(s,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,e,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(g){return function(u){return d([g,u])}}function d(g){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(r=0)),r;)try{if(n=1,e&&(i=g[0]&2?e.return:g[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,g[1])).done)return i;switch(e=0,i&&(g=[g[0]&2,i.value]),g[0]){case 0:case 1:i=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,e=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!i||g[1]>i[0]&&g[1]<i[3])){r.label=g[1];break}if(g[0]===6&&r.label<i[1]){r.label=i[1],i=g;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(g);break}i[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(s,r)}catch(u){g=[6,u],e=0}finally{n=i=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function ne(s,t){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&D(t,s,r)}function F(s){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&s[t],n=0;if(r)return r.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(s,t){var r=typeof Symbol=="function"&&s[Symbol.iterator];if(!r)return s;var n=r.call(s),e,i=[],o;try{for(;(t===void 0||t-- >0)&&!(e=n.next()).done;)i.push(e.value)}catch(c){o={error:c}}finally{try{e&&!e.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function ie(){for(var s=[],t=0;t<arguments.length;t++)s=s.concat(V(arguments[t]));return s}function le(){for(var s=0,t=0,r=arguments.length;t<r;t++)s+=arguments[t].length;for(var n=Array(s),e=0,t=0;t<r;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,e++)n[e]=i[o];return n}function se(s,t,r){if(r||arguments.length===2)for(var n=0,e=t.length,i;n<e;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return s.concat(i||Array.prototype.slice.call(t))}function $(s){return this instanceof $?(this.v=s,this):new $(s)}function oe(s,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(s,t||[]),e,i=[];return e=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),e[Symbol.asyncIterator]=function(){return this},e;function o(a){return function(h){return Promise.resolve(h).then(a,w)}}function c(a,h){n[a]&&(e[a]=function(b){return new Promise(function(f,p){i.push([a,b,f,p])>1||d(a,b)})},h&&(e[a]=h(e[a])))}function d(a,h){try{g(n[a](h))}catch(b){O(i[0][3],b)}}function g(a){a.value instanceof $?Promise.resolve(a.value.v).then(u,w):O(i[0][2],a)}function u(a){d("next",a)}function w(a){d("throw",a)}function O(a,h){a(h),i.shift(),i.length&&d(i[0][0],i[0][1])}}function ae(s){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(e,i){t[e]=s[e]?function(o){return(r=!r)?{value:$(s[e](o)),done:!1}:i?i(o):o}:i}}function fe(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=s[Symbol.asyncIterator],r;return t?t.call(s):(s=typeof F=="function"?F(s):s[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=s[i]&&function(o){return new Promise(function(c,d){o=s[i](o),e(c,d,o.done,o.value)})}}function e(i,o,c,d){Promise.resolve(d).then(function(g){i({value:g,done:c})},o)}}function ue(s,t){return Object.defineProperty?Object.defineProperty(s,"raw",{value:t}):s.raw=t,s}function ce(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var r=G(s),n=0;n<r.length;n++)r[n]!=="default"&&D(t,s,r[n]);return Fe(t,s),t}function ge(s){return s&&s.__esModule?s:{default:s}}function he(s,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(s):n?n.value:t.get(s)}function ye(s,t,r,n,e){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?s!==t||!e:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?e.call(s,r):e?e.value=r:t.set(s,r),r}function pe(s,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof s=="function"?t===s:s.has(t)}function de(s,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,e;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(e=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");e&&(n=function(){try{e.call(this)}catch(i){return Promise.reject(i)}}),s.stack.push({value:t,dispose:n,async:r})}else r&&s.stack.push({async:!0});return t}function me(s){function t(i){s.error=s.hasError?new De(i,s.error,"An error was suppressed during disposal."):i,s.hasError=!0}var r,n=0;function e(){for(;r=s.stack.pop();)try{if(!r.async&&n===1)return n=0,s.stack.push(r),Promise.resolve().then(e);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(e,function(o){return t(o),e()})}else n|=1}catch(o){t(o)}if(n===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return e()}function Oe(s,t){return typeof s=="string"&&/^\.\.?\//.test(s)?s.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,e,i,o){return n?t?".jsx":".js":e&&(!i||!o)?r:e+i+"."+o.toLowerCase()+"js"}):s}var P,C,D,Fe,G,De,Te,be=Le(()=>{P=function(s,t){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])},P(s,t)};C=function(){return C=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},C.apply(this,arguments)};D=Object.create?function(s,t,r,n){n===void 0&&(n=r);var e=Object.getOwnPropertyDescriptor(t,r);(!e||("get"in e?!t.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(s,n,e)}:function(s,t,r,n){n===void 0&&(n=r),s[n]=t[r]};Fe=Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t},G=function(s){return G=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},G(s)};De=typeof SuppressedError=="function"?SuppressedError:function(s,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=s,n.suppressed=t,n};Te={__extends:X,__assign:C,__rest:Q,__decorate:W,__param:z,__esDecorate:M,__runInitializers:Z,__propKey:K,__setFunctionName:j,__metadata:ee,__awaiter:te,__generator:re,__createBinding:D,__exportStar:ne,__values:F,__read:V,__spread:ie,__spreadArrays:le,__spreadArray:se,__await:$,__asyncGenerator:oe,__asyncDelegator:ae,__asyncValues:fe,__makeTemplateObject:ue,__importStar:ce,__importDefault:ge,__classPrivateFieldGet:he,__classPrivateFieldSet:ye,__classPrivateFieldIn:pe,__addDisposableResource:de,__disposeResources:me,__rewriteRelativeImportExtension:Oe}});var we=U(q=>{(function(s){"use strict";var t=typeof process=="object"&&process.env?process.env:self;s.parser=function(y){return new w(y)},s.CParser=w,s.CStream=a,s.createStream=O,s.MAX_BUFFER_LENGTH=64*1024,s.DEBUG=t.CDEBUG==="debug",s.INFO=t.CDEBUG==="debug"||t.CDEBUG==="info",s.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var r={textNode:void 0,numberNode:""},n=s.EVENTS.filter(function(y){return y!=="error"&&y!=="end"}),e=0,i;s.STATE={BEGIN:e++,VALUE:e++,OPEN_OBJECT:e++,CLOSE_OBJECT:e++,OPEN_ARRAY:e++,CLOSE_ARRAY:e++,TEXT_ESCAPE:e++,STRING:e++,BACKSLASH:e++,END:e++,OPEN_KEY:e++,CLOSE_KEY:e++,TRUE:e++,TRUE2:e++,TRUE3:e++,FALSE:e++,FALSE2:e++,FALSE3:e++,FALSE4:e++,NULL:e++,NULL2:e++,NULL3:e++,NUMBER_DECIMAL_POINT:e++,NUMBER_DIGIT:e++};for(var o in s.STATE)s.STATE[s.STATE[o]]=o;e=s.STATE;let c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(y){function l(){this.__proto__=y}return l.prototype=y,new l}),Object.getPrototypeOf||(Object.getPrototypeOf=function(y){return y.__proto__}),Object.keys||(Object.keys=function(y){var l=[];for(var _ in y)y.hasOwnProperty(_)&&l.push(_);return l});function d(y){var l=Math.max(s.MAX_BUFFER_LENGTH,10),_=0;for(var N in r){var v=y[N]===void 0?0:y[N].length;if(v>l)switch(N){case"text":closeText(y);break;default:E(y,"Max buffer length exceeded: "+N)}_=Math.max(_,v)}y.bufferCheckPosition=s.MAX_BUFFER_LENGTH-_+y.position}function g(y){for(var l in r)y[l]=r[l]}var u=/[\\"\n]/g;function w(y){if(!(this instanceof w))return new w(y);var l=this;g(l),l.bufferCheckPosition=s.MAX_BUFFER_LENGTH,l.q=l.c=l.p="",l.opt=y||{},l.closed=l.closedRoot=l.sawRoot=!1,l.tag=l.error=null,l.state=e.BEGIN,l.stack=new Array,l.position=l.column=0,l.line=1,l.slashed=!1,l.unicodeI=0,l.unicodeS=null,l.depth=0,h(l,"onready")}w.prototype={end:function(){A(this)},write:S,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{i=ke("stream").Stream}catch{i=function(){}}function O(y){return new a(y)}function a(y){if(!(this instanceof a))return new a(y);this._parser=new w(y),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var l=this;i.apply(l),this._parser.onend=function(){l.emit("end")},this._parser.onerror=function(_){l.emit("error",_),l._parser.error=null},n.forEach(function(_){Object.defineProperty(l,"on"+_,{get:function(){return l._parser["on"+_]},set:function(N){if(!N)return l.removeAllListeners(_),l._parser["on"+_]=N,N;l.on(_,N)},enumerable:!0,configurable:!1})})}a.prototype=Object.create(i.prototype,{constructor:{value:a}}),a.prototype.write=function(y){y=new Buffer(y);for(var l=0;l<y.length;l++){var _=y[l];if(this.bytes_remaining>0){for(var N=0;N<this.bytes_remaining;N++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+N]=y[N];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,l=l+N-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&_>=128)if(_>=194&&_<=223&&(this.bytes_in_sequence=2),_>=224&&_<=239&&(this.bytes_in_sequence=3),_>=240&&_<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+l>y.length){for(var v=0;v<=y.length-1-l;v++)this.temp_buffs[this.bytes_in_sequence][v]=y[l+v];return this.bytes_remaining=l+this.bytes_in_sequence-y.length,!0}else{this.string=y.slice(l,l+this.bytes_in_sequence).toString(),l=l+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var J=l;J<y.length&&!(y[J]>=128);J++);this.string=y.slice(l,J).toString(),this._parser.write(this.string),this.emit("data",this.string),l=J-1}},a.prototype.end=function(y){return y&&y.length&&this._parser.write(y.toString()),this._parser.end(),!0},a.prototype.on=function(y,l){var _=this;return!_._parser["on"+y]&&n.indexOf(y)!==-1&&(_._parser["on"+y]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,y),_.emit.apply(_,N)}),i.prototype.on.call(_,y,l)},a.prototype.destroy=function(){g(this._parser),this.emit("close")};function h(y,l,_){s.INFO&&console.log("-- emit",l,_),y[l]&&y[l](_)}function b(y,l,_){f(y),h(y,l,_)}function f(y,l){y.textNode=m(y.opt,y.textNode),y.textNode!==void 0&&h(y,l||"onvalue",y.textNode),y.textNode=void 0}function p(y){y.numberNode&&h(y,"onvalue",parseFloat(y.numberNode)),y.numberNode=""}function m(y,l){return l===void 0||(y.trim&&(l=l.trim()),y.normalize&&(l=l.replace(/\s+/g," "))),l}function E(y,l){return f(y),l+=`
Line: `+y.line+`
Column: `+y.column+`
Char: `+y.c,l=new Error(l),y.error=l,h(y,"onerror",l),y}function A(y){return(y.state!==e.VALUE||y.depth!==0)&&E(y,"Unexpected end"),f(y),y.c="",y.closed=!0,h(y,"onend"),w.call(y,y.opt),y}function x(y){return y===c.carriageReturn||y===c.lineFeed||y===c.space||y===c.tab}function S(y){var l=this;if(this.error)throw this.error;if(l.closed)return E(l,"Cannot write after close. Assign an onready handler.");if(y===null)return A(l);var _=0,N=y.charCodeAt(0),v=l.p,J=!1;for(s.DEBUG&&console.log("write -> ["+y+"]");N&&(v=N,l.c=N=y.charCodeAt(_++),v!==N?l.p=v:v=l.p,!!N);)switch(s.DEBUG&&console.log(_,N,s.STATE[l.state]),J?J=!1:(l.position++,N===c.lineFeed?(l.line++,l.column=0):l.column++),l.state){case e.BEGIN:N===c.openBrace?l.state=e.OPEN_OBJECT:N===c.openBracket?l.state=e.OPEN_ARRAY:x(N)||E(l,"Non-whitespace before {[.");continue;case e.OPEN_KEY:case e.OPEN_OBJECT:if(x(N))continue;if(l.state===e.OPEN_KEY)l.stack.push(e.CLOSE_KEY);else if(N===c.closeBrace){h(l,"onopenobject"),this.depth++,h(l,"oncloseobject"),this.depth--,l.state=l.stack.pop()||e.VALUE;continue}else l.stack.push(e.CLOSE_OBJECT);N===c.doubleQuote?l.state=e.STRING:E(l,'Malformed object key should start with "');continue;case e.CLOSE_KEY:case e.CLOSE_OBJECT:if(x(N))continue;var Ge=l.state===e.CLOSE_KEY?"key":"object";N===c.colon?(l.state===e.CLOSE_OBJECT?(l.stack.push(e.CLOSE_OBJECT),f(l,"onopenobject"),this.depth++):f(l,"onkey"),l.state=e.VALUE):N===c.closeBrace?(b(l,"oncloseobject"),this.depth--,l.state=l.stack.pop()||e.VALUE):N===c.comma?(l.state===e.CLOSE_OBJECT&&l.stack.push(e.CLOSE_OBJECT),f(l),l.state=e.OPEN_KEY):E(l,"Bad object");continue;case e.OPEN_ARRAY:case e.VALUE:if(x(N))continue;if(l.state===e.OPEN_ARRAY)if(h(l,"onopenarray"),this.depth++,l.state=e.VALUE,N===c.closeBracket){h(l,"onclosearray"),this.depth--,l.state=l.stack.pop()||e.VALUE;continue}else l.stack.push(e.CLOSE_ARRAY);N===c.doubleQuote?l.state=e.STRING:N===c.openBrace?l.state=e.OPEN_OBJECT:N===c.openBracket?l.state=e.OPEN_ARRAY:N===c.t?l.state=e.TRUE:N===c.f?l.state=e.FALSE:N===c.n?l.state=e.NULL:N===c.minus?l.numberNode+="-":c._0<=N&&N<=c._9?(l.numberNode+=String.fromCharCode(N),l.state=e.NUMBER_DIGIT):E(l,"Bad value");continue;case e.CLOSE_ARRAY:if(N===c.comma)l.stack.push(e.CLOSE_ARRAY),f(l,"onvalue"),l.state=e.VALUE;else if(N===c.closeBracket)b(l,"onclosearray"),this.depth--,l.state=l.stack.pop()||e.VALUE;else{if(x(N))continue;E(l,"Bad array")}continue;case e.STRING:l.textNode===void 0&&(l.textNode="");var R=_-1,k=l.slashed,L=l.unicodeI;e:for(;;){for(s.DEBUG&&console.log(_,N,s.STATE[l.state],k);L>0;)if(l.unicodeS+=String.fromCharCode(N),N=y.charCodeAt(_++),l.position++,L===4?(l.textNode+=String.fromCharCode(parseInt(l.unicodeS,16)),L=0,R=_-1):L++,!N)break e;if(N===c.doubleQuote&&!k){l.state=l.stack.pop()||e.VALUE,l.textNode+=y.substring(R,_-1),l.position+=_-1-R;break}if(N===c.backslash&&!k&&(k=!0,l.textNode+=y.substring(R,_-1),l.position+=_-1-R,N=y.charCodeAt(_++),l.position++,!N))break;if(k){if(k=!1,N===c.n?l.textNode+=`
`:N===c.r?l.textNode+="\r":N===c.t?l.textNode+="	":N===c.f?l.textNode+="\f":N===c.b?l.textNode+="\b":N===c.u?(L=1,l.unicodeS=""):l.textNode+=String.fromCharCode(N),N=y.charCodeAt(_++),l.position++,R=_-1,N)continue;break}u.lastIndex=_;var T=u.exec(y);if(T===null){_=y.length+1,l.textNode+=y.substring(R,_-1),l.position+=_-1-R;break}if(_=T.index+1,N=y.charCodeAt(T.index),!N){l.textNode+=y.substring(R,_-1),l.position+=_-1-R;break}}l.slashed=k,l.unicodeI=L;continue;case e.TRUE:N===c.r?l.state=e.TRUE2:E(l,"Invalid true started with t"+N);continue;case e.TRUE2:N===c.u?l.state=e.TRUE3:E(l,"Invalid true started with tr"+N);continue;case e.TRUE3:N===c.e?(h(l,"onvalue",!0),l.state=l.stack.pop()||e.VALUE):E(l,"Invalid true started with tru"+N);continue;case e.FALSE:N===c.a?l.state=e.FALSE2:E(l,"Invalid false started with f"+N);continue;case e.FALSE2:N===c.l?l.state=e.FALSE3:E(l,"Invalid false started with fa"+N);continue;case e.FALSE3:N===c.s?l.state=e.FALSE4:E(l,"Invalid false started with fal"+N);continue;case e.FALSE4:N===c.e?(h(l,"onvalue",!1),l.state=l.stack.pop()||e.VALUE):E(l,"Invalid false started with fals"+N);continue;case e.NULL:N===c.u?l.state=e.NULL2:E(l,"Invalid null started with n"+N);continue;case e.NULL2:N===c.l?l.state=e.NULL3:E(l,"Invalid null started with nu"+N);continue;case e.NULL3:N===c.l?(h(l,"onvalue",null),l.state=l.stack.pop()||e.VALUE):E(l,"Invalid null started with nul"+N);continue;case e.NUMBER_DECIMAL_POINT:N===c.period?(l.numberNode+=".",l.state=e.NUMBER_DIGIT):E(l,"Leading zero not followed by .");continue;case e.NUMBER_DIGIT:c._0<=N&&N<=c._9?l.numberNode+=String.fromCharCode(N):N===c.period?(l.numberNode.indexOf(".")!==-1&&E(l,"Invalid number has two dots"),l.numberNode+="."):N===c.e||N===c.E?((l.numberNode.indexOf("e")!==-1||l.numberNode.indexOf("E")!==-1)&&E(l,"Invalid number has two exponential"),l.numberNode+="e"):N===c.plus||N===c.minus?(v===c.e||v===c.E||E(l,"Invalid symbol in number"),l.numberNode+=String.fromCharCode(N)):(p(l),_--,J=!0,l.state=l.stack.pop()||e.VALUE);continue;default:E(l,"Unknown state: "+l.state)}return l.position>=l.bufferCheckPosition&&d(l),l}})(typeof q>"u"?clarinet={}:q)});var _e=U(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.stringify=I.parse=void 0;var Be=(be(),Ce(Ne)),Ue=Be.__importDefault(we());function Pe(s){let t=H(),r,n;function e(o){try{let c=t.next(o);c.done&&(r=c.value)}catch(c){n=c}}let i=Ue.default.parser();if(i.onopenobject=o=>e({type:"openobject",key:o}),i.onopenarray=()=>e({type:"openarray"}),i.onkey=o=>e({type:"key",key:o}),i.onvalue=o=>e({type:"value",value:o}),i.oncloseobject=()=>e({type:"closeobject"}),i.onclosearray=()=>e({type:"closearray"}),i.onerror=o=>e({type:"error",err:o}),t.next(),i.write(s).close(),n)throw n;return r}I.parse=Pe;function Y(s){return Array.isArray(s)?`[${s.map(Y).join(",")}]`:s instanceof Map?`{${[...s].map(([t,r])=>JSON.stringify(t)+":"+Y(r)).join(",")}}`:JSON.stringify(s)}I.stringify=Y;var Ee=Symbol();function*H(){let s=yield;switch(s.type){case"value":return s.value;case"openobject":let t=new Map,r=s.key;for(r===void 0&&(yield);r!==void 0;)t.set(r,yield*H()),r=(yield).key;return t;case"openarray":let n=[],e;for(;;){if(e=yield*H(),e===Ee)return n;n.push(e)}case"closearray":return Ee;case"error":throw s.err;default:throw Error(`Unexpected ParseEvent ${s.type}`)}}});var xe=U((Xe,Ae)=>{var Se=_e().parse;Ae.exports=class{constructor(t=!1){let r=this;if(this.indentation=4,[!0,!1,void 0].indexOf(t)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=t}template(t){let r=this;var n=t.raw[0];for(let i=1;i<t.raw.length;i++)typeof arguments[i]=="string"?n+='"'+arguments[i]+'"':n+=arguments[i],n+=t.raw[i];return r._treeToMap(r._damonToTree(n))}damonToMap(t,r=0,n=!1){let e=this,i=e._damonToTree(t,r);return i===!0||i===!1||i===null||typeof i=="string"||typeof i=="number"?i:e._treeToMap(e._damonToTree(t,r),r,n)}damonToJSON(t){let r=this;return r.mapToJSON(r.damonToMap(t))}jsonToDamon(t){let r=this;return r.mapToDamon(r.jsonToMap(t),!1)}jsonToMap(t){var n=this._getLines(t,"JSON");if(n=n.filter(e=>!/^ *\/\//.test(e)),n=n.filter(e=>e!=""),n=n.filter(e=>!/^[ \t]+$/.test(e)),n.length==1){if(["true","false","null"].indexOf(n[0].trim())>-1)return JSON.parse(n[0]);if(/^".*"$/.test(n[0].trim()))try{return JSON.parse(n[0].trim())}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="string",e}else if(isFinite(n[0])&&!isNaN(parseFloat(n[0]))&&Number.isFinite(n[0]*1)&&!Number.isNaN(n[0]*1)){if(n[0].indexOf(0)==0&&n[0].length>1&&n[0].indexOf(".")!==1){let e=new Error("Error line number 1: leading 0");throw e.line=1,e.language="DAMON",e}if(n[0].indexOf("_")>-1){let e=new Error("Error line number 1: numeric separator");throw e.line=1,e.language="DAMON",e}try{return JSON.parse(n[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="number",e}}else if(n[0]*1===1/0)try{JSON.parse(n[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="infinity",e}else return Se(t)}else return Se(t)}_getLines(t,r="DAMON",n=0){if(["DAMON","JSON"].indexOf(r)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(t===""){let o=new Error("Error line "+(n+1)+": empty string");throw o.line=n+1,o.language=r,o}if(/[\s]/.test(t)&&t.match(new RegExp(/[\s]/))[0].length==t.length){let o=new Error("Error line "+(n+1)+": string only contains whitespace");throw o.line=n+1,o.language=r,o}var e=/\r\n/.test(t)?`\r
`:`
`,i=t.split(e);if(e==`
`&&/\\*\n/.test(t)){if(/[^\\]\\(\\\\)*\n/.test(t)){let d=t.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,g=new Error("Error line "+(n+d)+": oddly escaped newline");throw g.line=n+d,g.language=r,g}i=t.split("").reverse().join("").split(/\n/).map(d=>d.split("").reverse().join("")).reverse()}return i}_damonToTree(t,r){let n=this,e=n._getLines(t,"DAMON",r),i=e.slice(0);if(e=e.filter(f=>!/^ *\/\//.test(f)),e=e.filter(f=>f!=""),e=e.filter(f=>!/^[ \t]+$/.test(f)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(f){throw console.error("Error line number "+(r+1)+": not JSON-compliant, detailed error follows"),f.line=r+1,f.language="JSON",f.type="string",f}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1){let f=new Error("Error line number "+(r+1)+": leading 0");throw f.line=r+1,f.language="DAMON",f}if(e[0].indexOf("_")>-1){let f=new Error("Error line number "+(r+1)+": numeric separator");throw f.line=r+1,f.language="DAMON",f}try{return JSON.parse(e[0]*1)}catch(f){throw console.error("Error line number "+(r+1)+": not JSON-compliant, detailed error follows"),f.line=r+1,f.language="JSON",f.type="number",f}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(f){throw console.error("Error line number "+(r+1)+": not JSON-compliant, detailed error follows"),f.line=r+1,f.language="JSON",f.type="infinity",f}}let o=0,c=[];for(let f=0,p=i.length;f<p;f++)e.slice(o).indexOf(i[f])>-1?c[f]=e.slice(o).indexOf(i[f]):c[f]=null;let d=new RegExp("^(\\t)+");for(let f=0,p=e.length;f<p;f++){if(d.test(e[f])){let m=e[f].match(d)[0].length;for(let E=0,A=m;E<A;E++)e[f]=e[f].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(e[f])&&/[ \t]+$/.test(e[f])){let m=new Error("Error line "+(r+c.indexOf(f)+1)+": trailing whitespace");throw m.line=r+c.indexOf(f)+1,m.language="DAMON",m}}let g=new RegExp("^("+" ".repeat(n.indentation)+")+");if(g.test(e[0])){let f=e[0].match(g)[0].length,p=!0;for(let m=0,E=e.length;m<E;m++)g.test(e[m])&&e[m].match(g)[0].length>=f?e[m]=e[m].slice(f):p=!1;if(!p){let m=new Error("Error line "+(r+1)+": bad formatting");throw m.line=r+1,m.language="DAMON",m}}else if(g.test(e[1])&&e[1].match(g)[0].length>n.indentation){let f=e[1].match(g)[0].length-n.indentation,p=!0;for(let m=1,E=e.length;m<E;m++)g.test(e[m])&&e[m].match(g)[0].length>=f?e[m]=e[m].slice(f):p=!1;if(!p){let m=new Error("Error line "+(r+2)+": bad formatting");throw m.line=r+2,m.language="DAMON",m}}let u=!1;if(e.length>1)for(let f=0,p=e.length;f<p;f++)f!==0&&/^- /.test(e[f])&&(u=!0);if(!/^- \{\}$/.test(e[0])&&!/^- \[\]$/.test(e[0])&&(u=!0),u){for(let f=0,p=e.length;f<p;f++)e[f]=" ".repeat(n.indentation)+e[f];e.unshift("- {}")}var w={content:e[0],level:0,id:0,children:[],headless:u,damonOriginalLinesMapping:c},O=w;if(!/^- /.test(e[0].trimStart())||/^ +/.test(e[0])&&(e[0].match(/^ +/)[0].length%n.indentation!=0||e[0].match(/^ +/)[0].length!=n.indentation)){let f=new Error("Error line "+(r+(u*1+1))+": bad formatting");throw f.line=r+u*1+1,f.language="DAMON",f}e.shift();for(let f=0,p=e.length;f<p;f++){if(!/^- /.test(e[f].trimStart())||/^ +/.test(e[f])&&(e[f].match(/^ +/)[0].length%n.indentation!=0||f==0&&e[f].match(/^ +/)[0].length!=n.indentation||f!=0&&/^- /.test(e[f-1])&&e[f].match(/^ +/)[0].length!=n.indentation||f!=0&&!/^- /.test(e[f-1])&&e[f].match(/^ +/)[0].length>e[f-1].match(/^ +/)[0].length+n.indentation)){let E=new Error("Error line "+(r+c.indexOf(f)+1)+": bad formatting");throw E.line=r+c.indexOf(f)+1,E.language="DAMON",E}let m={content:e[f].trimStart().slice(2),level:1+e[f].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(O===w)m.id=w.children.length+1,w.children.push(m);else if(O.level===m.level){var a=n._findListItemCommonDirectParent(O,w);a.level==0?m.id=a.children.length+1:m.id=a.id+"-"+(a.children.length+1),a.children.push(m)}else if(O.level>m.level){var h=n._findListItemCommonAncestor(O,w,m.level);h.level==0?m.id=h.children.length+1:m.id=h.id+"-"+(h.children.length+1),h.children.push(m)}else if(O.level<m.level){var b=n._findListItemCommonDirectParent(O,w);let E=b.children.indexOf(O),A=b.children[E].id,x=b.children[E].children.length+1;m.id=A+"-"+x,b.children[E].children.push(m)}O=m}return w}_findListItemCommonDirectParent(t,r){let n=this;if(r.children.indexOf(t)>-1)return r;var e;for(let i=r.children.length-1,o=0;i>=o;i--)if(e=n._findListItemCommonDirectParent(t,r.children[i]),e)return e}_findListItemCommonAncestor(t,r,n){let e=this;var i=e._findListItemCommonDirectParent(t,r);return i.level<n?i:e._findListItemCommonAncestor(i,r,n)}_treeToMap(t,r,n=!1){let e=this;var i=0;if(t.content=="- {}"){let g=new Map;return g.damonOriginalLinesMapping=t.damonOriginalLinesMapping,t.headless&&(g.headless=!0),o(t,g)}else if(t.content=="- []"){let g=[];return g.damonOriginalLinesMapping=t.damonOriginalLinesMapping,o(t,g)}function o(g,u){if(typeof g!="object"||g==null||Array.isArray(g)){let w=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,O=new Error("Error line number "+(r+w)+": @param { {} } tree");throw O.line=r+w,O.language="DAMON",O}if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map)c(g,u);else if(Array.isArray(u))d(g,u);else{let w=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,O=new Error("Error line number "+(r+w)+": @param { {} | [] } jsonMap");throw O.line=r+w,O.language="DAMON",O}return u}function c(g,u){for(let w=0,O=g.children.length;w<O;w++)if(i++,g.children[w].content.length==0){let a="";g.children[w].children.length>0?(a="implicit map key",n?u.set(i+"-",new Map):u.set("",new Map),u.implicitMaps===void 0&&(u.implicitMaps=[]),u.implicitMaps.push(""),o(g.children[w],u.get(""))):(a="implicit null key",n?u.set(n+"-",null):u.set("",null),u.implicitNulls===void 0&&(u.implicitNulls=[]),u.implicitNulls.push(""))}else{let a=g.children[w].content,h="key";try{if(/^.*: +\[/.test(a)&&a[a.length-1]=="]")if(/: +\[ *\]$/.test(a)){let b=JSON.parse(`["${a.slice(0,-1*a.match(/: +\[ *\]$/)[0].length)}"]`)[0];n?u.set(i+"-"+b,[]):u.set(b,[]),g.children[w].children.length>0&&(n?o(g.children[w],u.get(i+"-"+b)):o(g.children[w],u.get(b)))}else{let b=new RegExp(/: +\[/g),f=a.slice(0,-1).split(b),p=a.match(b).concat([""]),m=f.map((S,y)=>S+p[y]),E="",A=[];for(let S=0,y=f.length;S<y;S++)try{let l;if(S==0?l=f[0]:l=m.slice(0,S).join("")+f[S],E=JSON.parse(`["${l}"]`)[0],h="list",A=JSON.parse(`[${m.slice(S+1).join("")}]`),Array.isArray(A))break}catch{if(S==y-2){let _=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,N=new Error("Error line number "+(r+_)+": invalid inline list");throw N.line=r+_,N.language="DAMON",N}}if(A.every(function(S){return S===!0||S===!1||S===null||typeof S=="string"?!0:!!(isFinite(S)&&!isNaN(parseFloat(S))&&Number.isFinite(S*1)&&!Number.isNaN(S*1))}))n?u.set(i+"-"+E,A):u.set(E,A),u.damonInlineArrays===void 0&&(u.damonInlineArrays=[]),n?u.damonInlineArrays.push(i+"-"+E):u.damonInlineArrays.push(E);else{let S=+(t.headless*-1)+t.damonOriginalLinesMapping.indexOf(i-1)+2,y=new Error("Error line number "+(r+S)+": no nesting in inline lists");throw y.line=r+S,y.language="DAMON",y}if(g.children[w].children.length>0){let S=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+3,y=new Error("Error line number "+(r+S)+": inline lists can't have children");throw y.line=r+S,y.language="DAMON",y}}else if(/: +\{ *\}$/.test(a)){let b=JSON.parse(`["${a.slice(0,-1*a.match(/: +\{ *\}$/)[0].length)}"]`)[0];n?(u.set(i+"-"+b,new Map),o(g.children[w],u.get(i+"-"+b))):(u.set(b,new Map),o(g.children[w],u.get(b)))}else{let b=!1;if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="true"){let f=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],p=JSON.parse(`["${a.slice(0,-1*f.length-4)}"]`)[0];n?u.set(i+"-"+p,!0):u.set(p,!0)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="false"){let f=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],p=JSON.parse(`["${a.slice(0,-1*f.length-5)}"]`)[0];n?u.set(i+"-"+p,!1):u.set(p,!1)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="null"){let f=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],p=JSON.parse(`["${a.slice(0,-1*f.length-4)}"]`)[0];n?u.set(i+"-"+p,null):u.set(p,null)}else if(/^.*: +"/.test(a)&&a[a.length-1]=='"'){let f=a.match(new RegExp(/: +"/g));if(f.length==1){let p=JSON.parse(`["${a.split(f[0])[0]}"]`)[0];h="string";let m=JSON.parse(`["${a.split(f[0]).slice(1).join("").slice(0,-1)}"]`)[0];n?u.set(i+"-"+p,m):u.set(p,m)}else if(f.length==2&&/: +"$/.test(a)){let p=JSON.parse(`["${a.split(f[0])[0]}"]`)[0];h="string";let m=JSON.parse(`["${a.split(f[0]).slice(1).join("")+": "}"]`)[0];n?u.set(i+"-"+p,m):u.set(p,m)}else{let p=+(t.headless*-1)+t.damonOriginalLinesMapping.indexOf(i-1)+2,m=new Error("Error line number "+(r+p)+": unescaped double quote");throw m.line=r+p,m.language="DAMON",m}}else if(/^.*: /.test(a)&&isFinite(a.split(": ")[a.split(": ").length-1])&&!isNaN(parseFloat(a.split(": ")[a.split(": ").length-1]))&&Number.isFinite(a.split(": ")[a.split(": ").length-1]*1)&&!Number.isNaN(a.split(": ")[a.split(": ").length-1]*1)){let f=JSON.parse(`["${a.split(": ").slice(0,-1).join(": ")}"]`)[0];h="number";let p=a.match(new RegExp(/: +/g)),m=p[p.length-1],E=a.split(m)[a.split(m).length-1];if(E.indexOf(0)==0&&E.length>1&&E.indexOf(".")!==1){let x=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,S=new Error("Error line number "+(r+x)+": leading 0");throw S.line=r+x,S.language="DAMON",S}if(E.indexOf("_")>-1){let x=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,S=new Error("Error line number "+(r+x)+": Numeric separator");throw S.line=r+x,S.language="DAMON",S}let A=JSON.parse(`[${a.split(": ")[a.split(": ").length-1]*1}]`)[0];n?u.set(i+"-"+f,A):u.set(f,A)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]*1===1/0){let f=JSON.parse(`["${a.split(": ").slice(0,-1).join(": ")}"]`)[0];h="infinity";let p=JSON.parse(`[${a.split(": ")[a.split(": ").length-1]*1}]`)}else{let f=!1,p=0;if(/\[ *\]$/.test(a)&&(f=!0,p=a.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(a)&&(f=!0,p=a.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(a)&&(f=!0,p=4),/false$/.test(a)&&(f=!0,p=5),/null$/.test(a)&&(f=!0,p=4),/".*"$/.test(a)&&(f=!0,p=a.match(new RegExp(/".*"$/g))[0].length),!f){let m="";for(let E=a.length-1;E>-1&&(m=a[E].concat(m),isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1));E--){if(!/[ \t]/.test(a[E]))break;(m.indexOf(0)==0&&m.length>1&&m.indexOf(".")!==1||m.indexOf("_")>-1)&&(f=!0,p=m.length)}}if(f)if(JSON.parse(`["${a.slice(0,-1*p)}"]`)[0],e.pedantic){let m=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i),E=new Error("Error line number "+(r+m)+": missing separator");throw E.line=r+m,E.language="DAMON",E.errorType="pedantic",E}else if(b=!0,g.children[w].children.length>0){h="implicit map key";let m=JSON.parse(`["${a}"]`)[0];n?u.set(i+"-"+m,new Map):u.set(m,new Map),u.implicitMaps===void 0&&(u.implicitMaps=[]),n?(u.implicitMaps.push(i+"-"+m),o(g.children[w],u.get(i+"-"+m))):(u.implicitMaps.push(m),o(g.children[w],u.get(m)))}else{h="implicit null key";let m=JSON.parse(`["${a}"]`)[0];n?u.set(i+"-"+m,null):u.set(m,null),u.implicitNulls===void 0&&(u.implicitNulls=[]),n?u.implicitNulls.push(i+"-"+m):u.implicitNulls.push(m)}else{let m=JSON.parse(`["${a.slice(0,-1*p)}"]`)[0];if(e.pedantic)if(/: +$/.test(m)){let E=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i),A=new Error("Error line number "+(r+E)+": bad value");throw A.line=r+E,A.language="DAMON",A.errorType="pedantic",A}else{let E=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i),A=new Error("Error line number "+(r+E)+": missing separator");throw A.line=r+E,A.language="DAMON",A.errorType="pedantic",A}else if(b=!0,g.children[w].children.length>0){h="implicit map key";let E=JSON.parse(`["${a}"]`)[0];n?u.set(i+"-"+E,new Map):u.set(E,new Map),u.implicitMaps===void 0&&(u.implicitMaps=[]),n?(u.implicitMaps.push(i+"-"+E),o(g.children[w],u.get(i+"-"+E))):(u.implicitMaps.push(E),o(g.children[w],u.get(E)))}else{h="implicit null key";let E=JSON.parse(`["${a}"]`)[0];n?u.set(i+"-"+E,null):u.set(E,null),u.implicitNulls===void 0&&(u.implicitNulls=[]),n?u.implicitNulls.push(i+"-"+E):u.implicitNulls.push(E)}}}if(!b&&g.children[w].children.length>0){let f=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+3,p=new Error("Error line number "+(r+f)+": missing container or excess indentation");throw p.line=r+f,p.language="DAMON",p}}}catch(b){if(b.language===void 0){let f=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2;console.error("Error line number "+(r+f)+": not JSON-compliant, detailed error follows"),b.line=r+f,b.language="JSON",b.type=h}throw b}}}function d(g,u){for(let w=0,O=g.children.length;w<O;w++)if(i++,g.children[w].content.length){let a=g.children[w].content;if(/^[ \t]*\[/.test(a)&&a[a.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(a))u.push([]),o(g.children[w],u[u.length-1]);else{let h;try{h=JSON.parse(a)}catch{let p=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,m=new Error("Error line number "+(r+p)+": invalid inline lists");throw m.line=r+p,m.language="JSON",m.type="list",m}if(h.every(function(f){return f===!0||f===!1||f===null||typeof f=="string"?!0:!!(isFinite(f)&&!isNaN(parseFloat(f))&&Number.isFinite(f*1)&&!Number.isNaN(f*1))}))u.push(h),u.damonInlineArrays===void 0&&(u.damonInlineArrays=[]),u.damonInlineArrays.push(w);else{let f=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,p=new Error("Error line number "+(r+f)+": no nesting in inline lists");throw p.line=r+f,p.language="DAMON",p}if(g.children[w].children.length>0){let f=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+3,p=new Error("Error line number "+(r+f)+": inline lists can't have children");throw p.line=r+f,p.language="DAMON",p}}else if(/^[ \t]*\{\}$/.test(a))u.push(new Map),o(g.children[w],u[u.length-1]);else if(/^[ \t]*true$/.test(a))u.push(!0);else if(/^[ \t]*false$/.test(a))u.push(!1);else if(/^[ \t]*null$/.test(a))u.push(null);else if(/^[ \t]*".*"$/.test(a))try{u.push(JSON.parse(`[${a.trimStart()}]`)[0])}catch(h){let b=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2;throw console.error("Error line number "+(r+b)+": not JSON-compliant, detailed error follows"),h.line=r+b,h.language="JSON",h.type="string",h}else if(isFinite(a)&&!isNaN(parseFloat(a))&&Number.isFinite(a*1)&&!Number.isNaN(a*1)){if(a.indexOf(0)==0&&a.length>1&&a.indexOf(".")!==1){let h=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,b=new Error("Error line number "+(r+h)+": leading 0");throw b.line=r+h,b.language="DAMON",b}if(a.indexOf("_")>-1){let h=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,b=new Error("Error line number "+(r+h)+": leading 0");throw b.line=r+h,b.language="DAMON",b}try{u.push(JSON.parse(`[${a*1}]`)[0])}catch(h){let b=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2;throw console.error("Error line number "+(r+b)+": not JSON-compliant, detailed error follows"),h.line=r+b,h.language="JSON",h.type="number",h}}else if(a*1===1/0)try{JSON.parse(a*1)}catch(h){let b=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2;throw console.error("Error line number "+(r+b)+": not JSON-compliant, detailed error follows"),h.line=r+b,h.language="JSON",h.type="infinity",h}else{let h=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,b=new Error("Error line number "+(r+h)+": list items can't have a key");throw b.line=r+h,b.language="DAMON",b}}else{let a=t.headless*-1+t.damonOriginalLinesMapping.indexOf(i-1)+2,h=new Error("Error line number "+(r+a)+": empty list node");throw h.line=r+a,h.language="DAMON",h}}}mapToDamon(t,r){let n=this;var e="";if(Array.isArray(t))e+=`- []
`;else if(typeof t=="object"&&t!==null&&t instanceof Map&&t.constructor===Map)e+=`- {}
`;else return typeof t=="string"&&(t='"'+t+'"'),JSON.parse(t),t;return i(t),n.damonToMap(e.slice(0,-1)),e.slice(0,-1);function i(o,c=1){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map){let u=Array.from(o.keys()),w=!1;o.implicitNulls!==void 0&&o.implicitNulls.length===u.length&&(w=!0);for(let[O,a]of o)if(typeof a=="object"&&a!==null)if(Array.isArray(a)){let h=0,b=a.filter(function(f){return f===!0||f===!1?!0:f===null?(h++,!0):typeof f=="string"?!0:!!(isFinite(f)&&!isNaN(parseFloat(f))&&Number.isFinite(f*1)&&!Number.isNaN(f*1))});if(a.length==b.length&&c*4+2+a.join(", ").length+h*4<=80||r&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(O)>-1){let f="["+a.map(function(p){return typeof p=="string"&&(p=JSON.stringify(p)),p}).join(", ")+"]";e+="    ".repeat(c)+"- "+JSON.stringify(O).slice(1,-1)+": "+f+`
`}else e+="    ".repeat(c)+"- "+JSON.stringify(O).slice(1,-1)+`: []
`,i(a,c+1)}else e+="    ".repeat(c)+"- "+JSON.stringify(O).slice(1,-1)+`: {}
`,i(a,c+1);else w?e+="    ".repeat(c)+"- "+JSON.stringify(O).slice(1,-1)+`
`:(e+="    ".repeat(c)+"- "+JSON.stringify(O).slice(1,-1)+": ",a===!0?e+=`true
`:a===!1?e+=`false
`:a===null?e+=`null
`:Number.isFinite(a)&&!Number.isNaN(a)?e+=a+`
`:e+=JSON.stringify(a)+`
`)}else if(Array.isArray(o))for(var d=0,g=o.length;d<g;d++)if(typeof o[d]=="object"&&o[d]!==null)if(Array.isArray(o[d])){let u=0,w=o[d].filter(function(O){return O===!0||O===!1?!0:O===null?(u++,!0):typeof O=="string"?!0:!!(isFinite(O)&&!isNaN(parseFloat(O))&&Number.isFinite(O*1)&&!Number.isNaN(O*1))});if(o[d].length==w.length&&c*4+2+o[d].join(", ").length+u*4<=80||r&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(d)>-1){let O="["+o[d].map(function(a){return typeof a=="string"&&(a=JSON.stringify(a)),a}).join(", ")+"]";e+="    ".repeat(c)+"- "+O+`
`}else e+="    ".repeat(c)+`- []
`,i(o[d],c+1)}else e+="    ".repeat(c)+`- {}
`,i(o[d],c+1);else o[d]===!0?e+="    ".repeat(c)+`- true
`:o[d]===!1?e+="    ".repeat(c)+`- false
`:o[d]===null?e+="    ".repeat(c)+`- null
`:Number.isFinite(o[d])&&!Number.isNaN(o[d])?e+="    ".repeat(c)+"- "+o[d]+`
`:e+="    ".repeat(c)+"- "+JSON.stringify(o[d])+`
`}}mapToJSON(t){let r=this;var n="";if(Array.isArray(t))return n+=`[\r
`,e(t),n+="]",JSON.parse(n),n;return typeof t=="object"&&t!==null&&t instanceof Map&&t.constructor===Map?(n+=`{\r
`,e(t),n+="}",JSON.parse(n),n):(typeof t=="string"&&(t=JSON.stringify(t)),JSON.parse(t),t);function e(i,o=1){if(typeof i=="object"&&i!==null&&!Array.isArray(i)&&i instanceof Map&&i.constructor===Map)for(let[g,u]of i)typeof u=="object"&&u!==null?Array.isArray(u)?u.length>0?(n+="    ".repeat(o)+`${JSON.stringify(g)}: [\r
`,e(u,o+1),n+="    ".repeat(o)+"]"):n+="    ".repeat(o)+`${JSON.stringify(g)}: []`:Array.from(u.keys()).length>0?(n+="    ".repeat(o)+`${JSON.stringify(g)}: {\r
`,e(u,o+1),n+="    ".repeat(o)+"}"):n+="    ".repeat(o)+`${JSON.stringify(g)}: {}`:u===!0?n+="    ".repeat(o)+`${JSON.stringify(g)}: true`:u===!1?n+="    ".repeat(o)+`${JSON.stringify(g)}: false`:u===null?n+="    ".repeat(o)+`${JSON.stringify(g)}: null`:Number.isFinite(u)&&!Number.isNaN(u)?n+="    ".repeat(o)+`${JSON.stringify(g)}: `+u:n+="    ".repeat(o)+`${JSON.stringify(g)}: `+JSON.stringify(u),g!=Array.from(i.keys())[Array.from(i.keys()).length-1]?n+=`,\r
`:n+=`\r
`;else if(Array.isArray(i))for(var c=0,d=i.length;c<d;c++)typeof i[c]=="object"&&i[c]!==null?Array.isArray(i[c])?i[c].length>0?(n+="    ".repeat(o)+`[\r
`,e(i[c],o+1),n+="    ".repeat(o)+"]"):n+="    ".repeat(o)+"[]":Array.from(i[c].keys()).length>0?(n+="    ".repeat(o)+`{\r
`,e(i[c],o+1),n+="    ".repeat(o)+"}"):n+="    ".repeat(o)+"{}":i[c]===!0?n+="    ".repeat(o)+"true":i[c]===!1?n+="    ".repeat(o)+"false":i[c]===null?n+="    ".repeat(o)+"null":Number.isFinite(i[c])&&!Number.isNaN(i[c])?n+="    ".repeat(o)+i[c]:n+="    ".repeat(o)+JSON.stringify(i[c]),c!=d-1?n+=`,\r
`:n+=`\r
`}}getPathsList(t){let n=this.damonToMap(t),e=[];return i(n),e;function i(o,c=[]){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map)for(let[d,g]of o)typeof g=="object"&&g!==null&&!Array.isArray(g)&&g instanceof Map&&g.constructor===Map&&Array.from(g.keys()).length?(e.push(c.concat(d)),i(g,c.concat([d]))):Array.isArray(g)&&(o.damonInlineArrays==null||o.damonInlineArrays.indexOf(d)===-1)&&g.length?(e.push(c.concat(d)),i(g,c.concat([d]))):e.push(c.concat(d).concat(g));else for(let d=0,g=o.length;d<g;d++)typeof o[d]=="object"&&o[d]!==null&&!Array.isArray(o[d])&&o[d]instanceof Map&&o[d].constructor===Map&&Array.from(o[d].keys()).length?(e.push(c.concat(d)),i(o[d],c.concat([d]))):Array.isArray(o[d])&&(o.damonInlineArrays==null||o.damonInlineArrays.indexOf(d)===-1)&&o[d].length?(e.push(c.concat(d)),i(o[d],c.concat([d]))):e.push(c.concat(o[d]))}}getRangeFromPath(t,r,n=0,e=!1){let i=this,o=i.damonToMap(t),c=-1,d=!1;a(o,r);let g=i.mapIndexToLine(o,c),u=i._getLines(t)[g],w=0,O=u.length;if(r.length==1)typeof r[r.length-1]=="string"?w=u.length-u.trimStart().slice(2+r[r.length-1].length+2).trimStart().length:w=u.length-u.trimStart().slice(2).length;else if(typeof r[r.length-2]=="string")if(typeof r[r.length-1]=="string")w=u.length-u.trimStart().slice(2+r[r.length-1].length+2).trimStart().length;else if(e){let h=u.trimStart().slice(2+r[r.length-2].length+2),b=JSON.parse(h),f="^( *\\[ *";for(let A=0,x=r[r.length-1]+1;A<x;A++){let S=""+b[A];typeof b[A]=="string"&&(S='"'+S+'"'),f+=S,A<x-1&&(f+=", *")}f+=")";let p=h.match(new RegExp(f))[1],m=b[r[r.length-1]],E=(""+m).length;typeof m=="string"&&(E+=2),w=u.length-h.length+p.length-E,O=w+E}else w=u.length-u.trimStart().slice(2).length;else if(typeof r[r.length-1]=="string")w=u.length-u.trimStart().slice(2+r[r.length-1].length+2).trimStart().length;else if(e){let h=u.trimStart().slice(2),b=JSON.parse(h),f="^( *\\[ *";for(let A=0,x=r[r.length-1]+1;A<x;A++){let S=""+b[A];typeof b[A]=="string"&&(S='"'+S+'"'),f+=S,A<x-1&&(f+=", *")}f+=")";let p=h.match(new RegExp(f))[1],m=b[r[r.length-1]],E=(""+m).length;typeof m=="string"&&(E+=2),w=u.length-h.length+p.length-E,O=w+E}else w=u.length-u.trimStart().slice(2).length;return[[g+n,w],[g+n,O]];function a(h,b,f=[]){if(c+=1,typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map)for(let[p,m]of h){if(d==!0)return;if(c+=1,JSON.stringify(b)===JSON.stringify(f.concat([p]))){d=!0;return}if(typeof m=="object"&&m!==null&&!Array.isArray(m)&&m instanceof Map&&m.constructor===Map&&Array.from(m.keys()).length)c-=1,a(m,b,f.concat([p]));else if(Array.isArray(m)&&m.length){if(h.damonInlineArrays==null||h.damonInlineArrays.indexOf(p)===-1)c-=1,a(m,b,f.concat([p]));else if(JSON.stringify(b.slice(0,-1))===JSON.stringify(f.concat([p]))){d=!0;return}}}else for(let p=0,m=h.length;p<m;p++){if(d==!0)return;if(c+=1,JSON.stringify(b)===JSON.stringify(f.concat([p]))){d=!0;return}if(typeof h[p]=="object"&&h[p]!==null&&!Array.isArray(h[p])&&h[p]instanceof Map&&h[p].constructor===Map&&Array.from(h[p].keys()).length)c-=1,a(h[p],b,f.concat([p]));else if(Array.isArray(h[p])&&h[p].length){if(h.damonInlineArrays==null||h.damonInlineArrays.indexOf(p)===-1)c-=1,a(h[p],b,f.concat([p]));else if(JSON.stringify(b.slice(0,-1))===JSON.stringify(f.concat([p]))){d=!0;return}}}}}getTokenFromCoordinates(t,r){let n=this,e={},i=n._getLines(t).slice(0,r[0]);if(i[r[0]-1]=="")return e.type="newline",e.path=null,e.range=[r,r],e;if(/^[ \t]+$/.test(i[r[0]-1]))return e.type="indentation",e.path=null,e.range=[[r[0],1],[r[0],i[i.length-1].length]],e;if(/^[ \t]+/.test(i[r[0]-1].slice(0,r[1]-1))&&(e.type="indentation",e.range=[[r[0],1],[r[0],i[r[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(i[r[0]-1]))return e.type=="indentation"?(e.path=null,e):(e.type="comment",e.path=null,e.range=[[[r[0],i[r[0]-1].split("//")[0].length]],[[r[0],i[r[0]-1].length]]],e);if(i.length==1)try{let O=JSON.parse(t);if(O===!0||O===!1||O===null||typeof O=="string"||typeof O=="number"){let a=t.match(/^ */)[0].length,h=t.match(/ *$/)[0].length;return e.type="null",typeof O!="object"&&(e.type=typeof O),e.path=null,e.range=[[0,a],[0,t.length-h]],e}}catch{}let o=n.damonToMap(i.join(`
`)),c=Array.from(o.keys()),d=[],g=[];for(;c.length;){let O=c[c.length-1];if(d.push(O),typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map?(g.push(o),o=o.get(O)):Array.isArray(o)&&(g.push(o),o=o[O]),o===!0||o===!1||o===null||typeof o=="string"||typeof o=="number")break;c=Array.from(o.keys())}e.path=d;let u=[],w=g[g.length-2];if(w&&w.damonInlineArrays.length&&w.damonInlineArrays.indexOf(d[d.length-2])!==-1?u=n.getRangeFromPath(t,d,0,!0):u=n.getRangeFromPath(t,d),typeof d[d.length-1]=="string")if(r[1]<u[0][1]){let O=i[r[0]-1].slice(0,-1*(u[1][1]-u[0][1])-1).length;if(r[1]<O){let a=i[r[0]-1].match(/^[ \t]+/)[0].length+3;r[1]>=a?(e.type="property",e.range=[[r[0],a],[r[0],O]]):(e.type="hyphen",e.range=[[r[0],a-2],[r[0],a-1]])}else e.type="separator",e.range=[[r[0],O+1],[r[0],u[0][1]-1]]}else e.type="?",e.range=u;else if(r[1]<u[0][1]){e.type="hyphen";let O=i[r[0]-1].match(/^[ \t]+/)[0].length+1;e.range=[[r[0],O],[r[0],O+1]]}else e.type="?",e.range=u;return e}mapIndexToLine(t,r){let n=0,e=0;t.headless&&(r-=1);for(let i=0,o=t.damonOriginalLinesMapping.length;i<o;i++)if(t.damonOriginalLinesMapping[i]!==null&&e++,e==r){n=i+1;break}return n}getRangeMap(t,r,n=0){let e=this,i=e._getLines(t),o=new Map;return c(r,[],o),o;function c(d,g=[],u,w=!1){if(typeof d=="object"&&d!==null&&!Array.isArray(d)&&d instanceof Map&&d.constructor===Map)for(let[O,a]of d)if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map&&Array.from(a.keys()).length){let h=e.getRangeFromPath(t,g.concat(O),n),b=i[h[0][0]-n].match("^([ 	]*)")[1].length+2,f=[[h[0][0],b],[h[0][0],b+O.length]],p=JSON.stringify(f);u.set(p,new Map),c(a,g.concat([O]),u.get(p))}else if(Array.isArray(a)&&a.length){let h=[];h=e.getRangeFromPath(t,g.concat(O),n);let b=i[h[0][0]-n].match("^([ 	]*)")[1].length+2,f=[[h[0][0],b],[h[0][0],b+O.length]],p=JSON.stringify(f);u.set(p,new Map),d.damonInlineArrays!==void 0&&d.damonInlineArrays.indexOf(O)>-1?c(a,g.concat([O]),u.get(p),!0):c(a,g.concat([O]),u.get(p))}else if(w){let h=e.getRangeFromPath(t,g.concat(O),n,!1),b=i[h[0][0]-n].match("^([ 	]*)")[1].length+2,f=[[h[0][0],b],[h[0][0],b+O.length]],p=JSON.stringify(f);u.set(p,JSON.stringify(e.getRangeFromPath(t,g.concat(O),n,!1)))}else{let h=e.getRangeFromPath(t,g.concat(O),n),b=i[h[0][0]-n].match("^([ 	]*)")[1].length+2,f=[[h[0][0],b],[h[0][0],b+O.length]],p=JSON.stringify(f);u.set(p,JSON.stringify(e.getRangeFromPath(t,g.concat(O),n)))}else for(let O=0,a=d.length;O<a;O++)if(typeof d[O]=="object"&&d[O]!==null&&!Array.isArray(d[O])&&d[O]instanceof Map&&d[O].constructor===Map&&Array.from(d[O].keys()).length){let h=JSON.stringify(e.getRangeFromPath(t,g.concat(O),n));u.set(h,new Map),c(d[O],g.concat([O]),u.get(h))}else if(Array.isArray(d[O])&&d[O].length){let h="";h=JSON.stringify(e.getRangeFromPath(t,g.concat(O),n)),u.set(h,new Map),d.damonInlineArrays!==void 0&&d.damonInlineArrays.indexOf(O)>-1?c(d[O],g.concat([O]),u.get(h),!0):c(d[O],g.concat([O]),u.get(h))}else if(w){let h=JSON.stringify(e.getRangeFromPath(t,g.concat(O),n,!0));u.set(h,JSON.stringify(e.getRangeFromPath(t,g.concat(O),n,!0)))}else{let h=JSON.stringify(e.getRangeFromPath(t,g.concat(O),n));u.set(h,JSON.stringify(e.getRangeFromPath(t,g.concat(O),n)))}}}}});(function(){window.Damon=xe()})();})();
