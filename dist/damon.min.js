(()=>{var B=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var Je=Object.prototype.hasOwnProperty;var Re=(l=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(l,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):l)(function(l){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+l+'" is not supported')});var $e=(l,r)=>()=>(l&&(r=l(l=0)),r);var P=(l,r)=>()=>(r||l((r={exports:{}}).exports,r),r.exports),Ce=(l,r)=>{for(var n in r)B(l,n,{get:r[n],enumerable:!0})},Ie=(l,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of ve(r))!Je.call(l,e)&&e!==n&&B(l,e,{get:()=>r[e],enumerable:!(t=Le(r,e))||t.enumerable});return l};var ke=l=>Ie(B({},"__esModule",{value:!0}),l);var Ne={};Ce(Ne,{__addDisposableResource:()=>de,__assign:()=>k,__asyncDelegator:()=>ae,__asyncGenerator:()=>oe,__asyncValues:()=>fe,__await:()=>C,__awaiter:()=>te,__classPrivateFieldGet:()=>ge,__classPrivateFieldIn:()=>ye,__classPrivateFieldSet:()=>pe,__createBinding:()=>T,__decorate:()=>X,__disposeResources:()=>me,__esDecorate:()=>W,__exportStar:()=>ne,__extends:()=>M,__generator:()=>re,__importDefault:()=>he,__importStar:()=>ce,__makeTemplateObject:()=>ue,__metadata:()=>ee,__param:()=>Q,__propKey:()=>Z,__read:()=>V,__rest:()=>H,__rewriteRelativeImportExtension:()=>Oe,__runInitializers:()=>z,__setFunctionName:()=>j,__spread:()=>ie,__spreadArray:()=>se,__spreadArrays:()=>le,__values:()=>D,default:()=>Fe});function M(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");U(l,r);function n(){this.constructor=l}l.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function H(l,r){var n={};for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&r.indexOf(t)<0&&(n[t]=l[t]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(l);e<t.length;e++)r.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(l,t[e])&&(n[t[e]]=l[t[e]]);return n}function X(l,r,n,t){var e=arguments.length,s=e<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,n):t,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(l,r,n,t);else for(var a=l.length-1;a>=0;a--)(o=l[a])&&(s=(e<3?o(s):e>3?o(r,n,s):o(r,n))||s);return e>3&&s&&Object.defineProperty(r,n,s),s}function Q(l,r){return function(n,t){r(n,t,l)}}function W(l,r,n,t,e,s){function o(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var a=t.kind,f=a==="getter"?"get":a==="setter"?"set":"value",h=!r&&l?t.static?l:l.prototype:null,b=r||(h?Object.getOwnPropertyDescriptor(h,t.name):{}),c,d=!1,p=n.length-1;p>=0;p--){var m={};for(var u in t)m[u]=u==="access"?{}:t[u];for(var u in t.access)m.access[u]=t.access[u];m.addInitializer=function(N){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(N||null))};var y=(0,n[p])(a==="accessor"?{get:b.get,set:b.set}:b[f],m);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(c=o(y.get))&&(b.get=c),(c=o(y.set))&&(b.set=c),(c=o(y.init))&&e.unshift(c)}else(c=o(y))&&(a==="field"?e.unshift(c):b[f]=c)}h&&Object.defineProperty(h,t.name,b),d=!0}function z(l,r,n){for(var t=arguments.length>2,e=0;e<r.length;e++)n=t?r[e].call(l,n):r[e].call(l);return t?n:void 0}function Z(l){return typeof l=="symbol"?l:"".concat(l)}function j(l,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function ee(l,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,r)}function te(l,r,n,t){function e(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(b){try{h(t.next(b))}catch(c){o(c)}}function f(b){try{h(t.throw(b))}catch(c){o(c)}}function h(b){b.done?s(b.value):e(b.value).then(a,f)}h((t=t.apply(l,r||[])).next())})}function re(l,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,e,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(b){return f([h,b])}}function f(h){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(n=0)),n;)try{if(t=1,e&&(s=h[0]&2?e.return:h[0]?e.throw||((s=e.return)&&s.call(e),0):e.next)&&!(s=s.call(e,h[1])).done)return s;switch(e=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,e=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=r.call(l,n)}catch(b){h=[6,b],e=0}finally{t=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ne(l,r){for(var n in l)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&T(r,l,n)}function D(l){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&l[r],t=0;if(n)return n.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&t>=l.length&&(l=void 0),{value:l&&l[t++],done:!l}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(l,r){var n=typeof Symbol=="function"&&l[Symbol.iterator];if(!n)return l;var t=n.call(l),e,s=[],o;try{for(;(r===void 0||r-- >0)&&!(e=t.next()).done;)s.push(e.value)}catch(a){o={error:a}}finally{try{e&&!e.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return s}function ie(){for(var l=[],r=0;r<arguments.length;r++)l=l.concat(V(arguments[r]));return l}function le(){for(var l=0,r=0,n=arguments.length;r<n;r++)l+=arguments[r].length;for(var t=Array(l),e=0,r=0;r<n;r++)for(var s=arguments[r],o=0,a=s.length;o<a;o++,e++)t[e]=s[o];return t}function se(l,r,n){if(n||arguments.length===2)for(var t=0,e=r.length,s;t<e;t++)(s||!(t in r))&&(s||(s=Array.prototype.slice.call(r,0,t)),s[t]=r[t]);return l.concat(s||Array.prototype.slice.call(r))}function C(l){return this instanceof C?(this.v=l,this):new C(l)}function oe(l,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n.apply(l,r||[]),e,s=[];return e=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),e[Symbol.asyncIterator]=function(){return this},e;function o(p){return function(m){return Promise.resolve(m).then(p,c)}}function a(p,m){t[p]&&(e[p]=function(u){return new Promise(function(y,N){s.push([p,u,y,N])>1||f(p,u)})},m&&(e[p]=m(e[p])))}function f(p,m){try{h(t[p](m))}catch(u){d(s[0][3],u)}}function h(p){p.value instanceof C?Promise.resolve(p.value.v).then(b,c):d(s[0][2],p)}function b(p){f("next",p)}function c(p){f("throw",p)}function d(p,m){p(m),s.shift(),s.length&&f(s[0][0],s[0][1])}}function ae(l){var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r;function t(e,s){r[e]=l[e]?function(o){return(n=!n)?{value:C(l[e](o)),done:!1}:s?s(o):o}:s}}function fe(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=l[Symbol.asyncIterator],n;return r?r.call(l):(l=typeof D=="function"?D(l):l[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n);function t(s){n[s]=l[s]&&function(o){return new Promise(function(a,f){o=l[s](o),e(a,f,o.done,o.value)})}}function e(s,o,a,f){Promise.resolve(f).then(function(h){s({value:h,done:a})},o)}}function ue(l,r){return Object.defineProperty?Object.defineProperty(l,"raw",{value:r}):l.raw=r,l}function ce(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var n=G(l),t=0;t<n.length;t++)n[t]!=="default"&&T(r,l,n[t]);return De(r,l),r}function he(l){return l&&l.__esModule?l:{default:l}}function ge(l,r,n,t){if(n==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?l!==r||!t:!r.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?t:n==="a"?t.call(l):t?t.value:r.get(l)}function pe(l,r,n,t,e){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?l!==r||!e:!r.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?e.call(l,n):e?e.value=n:r.set(l,n),n}function ye(l,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?r===l:l.has(r)}function de(l,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var t,e;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=r[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=r[Symbol.dispose],n&&(e=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");e&&(t=function(){try{e.call(this)}catch(s){return Promise.reject(s)}}),l.stack.push({value:r,dispose:t,async:n})}else n&&l.stack.push({async:!0});return r}function me(l){function r(s){l.error=l.hasError?new Te(s,l.error,"An error was suppressed during disposal."):s,l.hasError=!0}var n,t=0;function e(){for(;n=l.stack.pop();)try{if(!n.async&&t===1)return t=0,l.stack.push(n),Promise.resolve().then(e);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return t|=2,Promise.resolve(s).then(e,function(o){return r(o),e()})}else t|=1}catch(o){r(o)}if(t===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return e()}function Oe(l,r){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,t,e,s,o){return t?r?".jsx":".js":e&&(!s||!o)?n:e+s+"."+o.toLowerCase()+"js"}):l}var U,k,T,De,G,Te,Fe,be=$e(()=>{U=function(l,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},U(l,r)};k=function(){return k=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},k.apply(this,arguments)};T=Object.create?function(l,r,n,t){t===void 0&&(t=n);var e=Object.getOwnPropertyDescriptor(r,n);(!e||("get"in e?!r.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(l,t,e)}:function(l,r,n,t){t===void 0&&(t=n),l[t]=r[n]};De=Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r},G=function(l){return G=Object.getOwnPropertyNames||function(r){var n=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[n.length]=t);return n},G(l)};Te=typeof SuppressedError=="function"?SuppressedError:function(l,r,n){var t=new Error(n);return t.name="SuppressedError",t.error=l,t.suppressed=r,t};Fe={__extends:M,__assign:k,__rest:H,__decorate:X,__param:Q,__esDecorate:W,__runInitializers:z,__propKey:Z,__setFunctionName:j,__metadata:ee,__awaiter:te,__generator:re,__createBinding:T,__exportStar:ne,__values:D,__read:V,__spread:ie,__spreadArrays:le,__spreadArray:se,__await:C,__asyncGenerator:oe,__asyncDelegator:ae,__asyncValues:fe,__makeTemplateObject:ue,__importStar:ce,__importDefault:he,__classPrivateFieldGet:ge,__classPrivateFieldSet:pe,__classPrivateFieldIn:ye,__addDisposableResource:de,__disposeResources:me,__rewriteRelativeImportExtension:Oe}});var we=P(q=>{(function(l){"use strict";var r=typeof process=="object"&&process.env?process.env:self;l.parser=function(g){return new c(g)},l.CParser=c,l.CStream=p,l.createStream=d,l.MAX_BUFFER_LENGTH=64*1024,l.DEBUG=r.CDEBUG==="debug",l.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",l.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n={textNode:void 0,numberNode:""},t=l.EVENTS.filter(function(g){return g!=="error"&&g!=="end"}),e=0,s;l.STATE={BEGIN:e++,VALUE:e++,OPEN_OBJECT:e++,CLOSE_OBJECT:e++,OPEN_ARRAY:e++,CLOSE_ARRAY:e++,TEXT_ESCAPE:e++,STRING:e++,BACKSLASH:e++,END:e++,OPEN_KEY:e++,CLOSE_KEY:e++,TRUE:e++,TRUE2:e++,TRUE3:e++,FALSE:e++,FALSE2:e++,FALSE3:e++,FALSE4:e++,NULL:e++,NULL2:e++,NULL3:e++,NUMBER_DECIMAL_POINT:e++,NUMBER_DIGIT:e++};for(var o in l.STATE)l.STATE[l.STATE[o]]=o;e=l.STATE;let a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(g){function i(){this.__proto__=g}return i.prototype=g,new i}),Object.getPrototypeOf||(Object.getPrototypeOf=function(g){return g.__proto__}),Object.keys||(Object.keys=function(g){var i=[];for(var w in g)g.hasOwnProperty(w)&&i.push(w);return i});function f(g){var i=Math.max(l.MAX_BUFFER_LENGTH,10),w=0;for(var O in n){var A=g[O]===void 0?0:g[O].length;if(A>i)switch(O){case"text":closeText(g);break;default:S(g,"Max buffer length exceeded: "+O)}w=Math.max(w,A)}g.bufferCheckPosition=l.MAX_BUFFER_LENGTH-w+g.position}function h(g){for(var i in n)g[i]=n[i]}var b=/[\\"\n]/g;function c(g){if(!(this instanceof c))return new c(g);var i=this;h(i),i.bufferCheckPosition=l.MAX_BUFFER_LENGTH,i.q=i.c=i.p="",i.opt=g||{},i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.state=e.BEGIN,i.stack=new Array,i.position=i.column=0,i.line=1,i.slashed=!1,i.unicodeI=0,i.unicodeS=null,i.depth=0,m(i,"onready")}c.prototype={end:function(){_(this)},write:R,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=Re("stream").Stream}catch{s=function(){}}function d(g){return new p(g)}function p(g){if(!(this instanceof p))return new p(g);this._parser=new c(g),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var i=this;s.apply(i),this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(w){i.emit("error",w),i._parser.error=null},t.forEach(function(w){Object.defineProperty(i,"on"+w,{get:function(){return i._parser["on"+w]},set:function(O){if(!O)return i.removeAllListeners(w),i._parser["on"+w]=O,O;i.on(w,O)},enumerable:!0,configurable:!1})})}p.prototype=Object.create(s.prototype,{constructor:{value:p}}),p.prototype.write=function(g){g=new Buffer(g);for(var i=0;i<g.length;i++){var w=g[i];if(this.bytes_remaining>0){for(var O=0;O<this.bytes_remaining;O++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+O]=g[O];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,i=i+O-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&w>=128)if(w>=194&&w<=223&&(this.bytes_in_sequence=2),w>=224&&w<=239&&(this.bytes_in_sequence=3),w>=240&&w<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+i>g.length){for(var A=0;A<=g.length-1-i;A++)this.temp_buffs[this.bytes_in_sequence][A]=g[i+A];return this.bytes_remaining=i+this.bytes_in_sequence-g.length,!0}else{this.string=g.slice(i,i+this.bytes_in_sequence).toString(),i=i+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var v=i;v<g.length&&!(g[v]>=128);v++);this.string=g.slice(i,v).toString(),this._parser.write(this.string),this.emit("data",this.string),i=v-1}},p.prototype.end=function(g){return g&&g.length&&this._parser.write(g.toString()),this._parser.end(),!0},p.prototype.on=function(g,i){var w=this;return!w._parser["on"+g]&&t.indexOf(g)!==-1&&(w._parser["on"+g]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,g),w.emit.apply(w,O)}),s.prototype.on.call(w,g,i)},p.prototype.destroy=function(){h(this._parser),this.emit("close")};function m(g,i,w){l.INFO&&console.log("-- emit",i,w),g[i]&&g[i](w)}function u(g,i,w){y(g),m(g,i,w)}function y(g,i){g.textNode=E(g.opt,g.textNode),g.textNode!==void 0&&m(g,i||"onvalue",g.textNode),g.textNode=void 0}function N(g){g.numberNode&&m(g,"onvalue",parseFloat(g.numberNode)),g.numberNode=""}function E(g,i){return i===void 0||(g.trim&&(i=i.trim()),g.normalize&&(i=i.replace(/\s+/g," "))),i}function S(g,i){return y(g),i+=`
Line: `+g.line+`
Column: `+g.column+`
Char: `+g.c,i=new Error(i),g.error=i,m(g,"onerror",i),g}function _(g){return(g.state!==e.VALUE||g.depth!==0)&&S(g,"Unexpected end"),y(g),g.c="",g.closed=!0,m(g,"onend"),c.call(g,g.opt),g}function x(g){return g===a.carriageReturn||g===a.lineFeed||g===a.space||g===a.tab}function R(g){var i=this;if(this.error)throw this.error;if(i.closed)return S(i,"Cannot write after close. Assign an onready handler.");if(g===null)return _(i);var w=0,O=g.charCodeAt(0),A=i.p,v=!1;for(l.DEBUG&&console.log("write -> ["+g+"]");O&&(A=O,i.c=O=g.charCodeAt(w++),A!==O?i.p=A:A=i.p,!!O);)switch(l.DEBUG&&console.log(w,O,l.STATE[i.state]),v?v=!1:(i.position++,O===a.lineFeed?(i.line++,i.column=0):i.column++),i.state){case e.BEGIN:O===a.openBrace?i.state=e.OPEN_OBJECT:O===a.openBracket?i.state=e.OPEN_ARRAY:x(O)||S(i,"Non-whitespace before {[.");continue;case e.OPEN_KEY:case e.OPEN_OBJECT:if(x(O))continue;if(i.state===e.OPEN_KEY)i.stack.push(e.CLOSE_KEY);else if(O===a.closeBrace){m(i,"onopenobject"),this.depth++,m(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||e.VALUE;continue}else i.stack.push(e.CLOSE_OBJECT);O===a.doubleQuote?i.state=e.STRING:S(i,'Malformed object key should start with "');continue;case e.CLOSE_KEY:case e.CLOSE_OBJECT:if(x(O))continue;var Ge=i.state===e.CLOSE_KEY?"key":"object";O===a.colon?(i.state===e.CLOSE_OBJECT?(i.stack.push(e.CLOSE_OBJECT),y(i,"onopenobject"),this.depth++):y(i,"onkey"),i.state=e.VALUE):O===a.closeBrace?(u(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||e.VALUE):O===a.comma?(i.state===e.CLOSE_OBJECT&&i.stack.push(e.CLOSE_OBJECT),y(i),i.state=e.OPEN_KEY):S(i,"Bad object");continue;case e.OPEN_ARRAY:case e.VALUE:if(x(O))continue;if(i.state===e.OPEN_ARRAY)if(m(i,"onopenarray"),this.depth++,i.state=e.VALUE,O===a.closeBracket){m(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||e.VALUE;continue}else i.stack.push(e.CLOSE_ARRAY);O===a.doubleQuote?i.state=e.STRING:O===a.openBrace?i.state=e.OPEN_OBJECT:O===a.openBracket?i.state=e.OPEN_ARRAY:O===a.t?i.state=e.TRUE:O===a.f?i.state=e.FALSE:O===a.n?i.state=e.NULL:O===a.minus?i.numberNode+="-":a._0<=O&&O<=a._9?(i.numberNode+=String.fromCharCode(O),i.state=e.NUMBER_DIGIT):S(i,"Bad value");continue;case e.CLOSE_ARRAY:if(O===a.comma)i.stack.push(e.CLOSE_ARRAY),y(i,"onvalue"),i.state=e.VALUE;else if(O===a.closeBracket)u(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||e.VALUE;else{if(x(O))continue;S(i,"Bad array")}continue;case e.STRING:i.textNode===void 0&&(i.textNode="");var L=w-1,J=i.slashed,$=i.unicodeI;e:for(;;){for(l.DEBUG&&console.log(w,O,l.STATE[i.state],J);$>0;)if(i.unicodeS+=String.fromCharCode(O),O=g.charCodeAt(w++),i.position++,$===4?(i.textNode+=String.fromCharCode(parseInt(i.unicodeS,16)),$=0,L=w-1):$++,!O)break e;if(O===a.doubleQuote&&!J){i.state=i.stack.pop()||e.VALUE,i.textNode+=g.substring(L,w-1),i.position+=w-1-L;break}if(O===a.backslash&&!J&&(J=!0,i.textNode+=g.substring(L,w-1),i.position+=w-1-L,O=g.charCodeAt(w++),i.position++,!O))break;if(J){if(J=!1,O===a.n?i.textNode+=`
`:O===a.r?i.textNode+="\r":O===a.t?i.textNode+="	":O===a.f?i.textNode+="\f":O===a.b?i.textNode+="\b":O===a.u?($=1,i.unicodeS=""):i.textNode+=String.fromCharCode(O),O=g.charCodeAt(w++),i.position++,L=w-1,O)continue;break}b.lastIndex=w;var F=b.exec(g);if(F===null){w=g.length+1,i.textNode+=g.substring(L,w-1),i.position+=w-1-L;break}if(w=F.index+1,O=g.charCodeAt(F.index),!O){i.textNode+=g.substring(L,w-1),i.position+=w-1-L;break}}i.slashed=J,i.unicodeI=$;continue;case e.TRUE:O===a.r?i.state=e.TRUE2:S(i,"Invalid true started with t"+O);continue;case e.TRUE2:O===a.u?i.state=e.TRUE3:S(i,"Invalid true started with tr"+O);continue;case e.TRUE3:O===a.e?(m(i,"onvalue",!0),i.state=i.stack.pop()||e.VALUE):S(i,"Invalid true started with tru"+O);continue;case e.FALSE:O===a.a?i.state=e.FALSE2:S(i,"Invalid false started with f"+O);continue;case e.FALSE2:O===a.l?i.state=e.FALSE3:S(i,"Invalid false started with fa"+O);continue;case e.FALSE3:O===a.s?i.state=e.FALSE4:S(i,"Invalid false started with fal"+O);continue;case e.FALSE4:O===a.e?(m(i,"onvalue",!1),i.state=i.stack.pop()||e.VALUE):S(i,"Invalid false started with fals"+O);continue;case e.NULL:O===a.u?i.state=e.NULL2:S(i,"Invalid null started with n"+O);continue;case e.NULL2:O===a.l?i.state=e.NULL3:S(i,"Invalid null started with nu"+O);continue;case e.NULL3:O===a.l?(m(i,"onvalue",null),i.state=i.stack.pop()||e.VALUE):S(i,"Invalid null started with nul"+O);continue;case e.NUMBER_DECIMAL_POINT:O===a.period?(i.numberNode+=".",i.state=e.NUMBER_DIGIT):S(i,"Leading zero not followed by .");continue;case e.NUMBER_DIGIT:a._0<=O&&O<=a._9?i.numberNode+=String.fromCharCode(O):O===a.period?(i.numberNode.indexOf(".")!==-1&&S(i,"Invalid number has two dots"),i.numberNode+="."):O===a.e||O===a.E?((i.numberNode.indexOf("e")!==-1||i.numberNode.indexOf("E")!==-1)&&S(i,"Invalid number has two exponential"),i.numberNode+="e"):O===a.plus||O===a.minus?(A===a.e||A===a.E||S(i,"Invalid symbol in number"),i.numberNode+=String.fromCharCode(O)):(N(i),w--,v=!0,i.state=i.stack.pop()||e.VALUE);continue;default:S(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&f(i),i}})(typeof q>"u"?clarinet={}:q)});var _e=P(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.stringify=I.parse=void 0;var Be=(be(),ke(Ne)),Pe=Be.__importDefault(we());function Ue(l){let r=K(),n,t;function e(o){try{let a=r.next(o);a.done&&(n=a.value)}catch(a){t=a}}let s=Pe.default.parser();if(s.onopenobject=o=>e({type:"openobject",key:o}),s.onopenarray=()=>e({type:"openarray"}),s.onkey=o=>e({type:"key",key:o}),s.onvalue=o=>e({type:"value",value:o}),s.oncloseobject=()=>e({type:"closeobject"}),s.onclosearray=()=>e({type:"closearray"}),s.onerror=o=>e({type:"error",err:o}),r.next(),s.write(l).close(),t)throw t;return n}I.parse=Ue;function Y(l){return Array.isArray(l)?`[${l.map(Y).join(",")}]`:l instanceof Map?`{${[...l].map(([r,n])=>JSON.stringify(r)+":"+Y(n)).join(",")}}`:JSON.stringify(l)}I.stringify=Y;var Ee=Symbol();function*K(){let l=yield;switch(l.type){case"value":return l.value;case"openobject":let r=new Map,n=l.key;for(n===void 0&&(yield);n!==void 0;)r.set(n,yield*K()),n=(yield).key;return r;case"openarray":let t=[],e;for(;;){if(e=yield*K(),e===Ee)return t;t.push(e)}case"closearray":return Ee;case"error":throw l.err;default:throw Error(`Unexpected ParseEvent ${l.type}`)}}});var Ae=P((Me,xe)=>{var Se=_e().parse;xe.exports=class{constructor(r=!1){let n=this;if(this.indentation=4,[!0,!1,void 0].indexOf(r)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=r}template(r){let n=this;var t=r.raw[0];for(let s=1;s<r.raw.length;s++)typeof arguments[s]=="string"?t+='"'+arguments[s]+'"':t+=arguments[s],t+=r.raw[s];return n._treeToMap(n._damonToTree(t))}damonToMap(r){let n=this,t=n._damonToTree(r);return t===!0||t===!1||t===null||typeof t=="string"||typeof t=="number"?t:n._treeToMap(n._damonToTree(r))}damonToJSON(r){let n=this;return n.mapToJSON(n.damonToMap(r))}jsonToDamon(r){let n=this;return n.mapToDamon(n.jsonToMap(r),!1)}jsonToMap(r){var t=this._getLines(r,"JSON");if(t=t.filter(e=>!/^ *\/\//.test(e)),t=t.filter(e=>e!=""),t=t.filter(e=>!/^[ \t]+$/.test(e)),t.length==1){if(["true","false","null"].indexOf(t[0].trim())>-1)return JSON.parse(t[0]);if(/^".*"$/.test(t[0].trim()))try{return JSON.parse(t[0].trim())}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="string",e}else if(isFinite(t[0])&&!isNaN(parseFloat(t[0]))&&Number.isFinite(t[0]*1)&&!Number.isNaN(t[0]*1)){if(t[0].indexOf(0)==0&&t[0].length>1&&t[0].indexOf(".")!==1){let e=new Error("Error line number 1: leading 0");throw e.line=1,e.language="DAMON",e}try{return JSON.parse(t[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="number",e}}else if(t[0]*1===1/0)try{JSON.parse(t[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="infinity",e}else return Se(r)}else return Se(r)}_getLines(r,n="DAMON"){if(["DAMON","JSON"].indexOf(n)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(r===""){let s=new Error("Error line 1: empty string");throw s.line=1,s.language=n,s}if(/[\s]/.test(r)&&r.match(new RegExp(/[\s]/))[0].length==r.length){let s=new Error("Error line 1: string only contains whitespace");throw s.line=1,s.language=n,s}var t=/\r\n/.test(r)?`\r
`:`
`,e=r.split(t);if(/\\*\n/.test(r)&&t==`
`){if(/[^\\]\\(\\\\)*\n/.test(r)){let a=r.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,f=new Error("Error line "+a+": oddly escaped newline");throw f.line=a,f.language=n,f}e=r.split("").reverse().join("").split(/\n/).map(a=>a.split("").reverse().join("")).reverse()}return e}_damonToTree(r){let n=this,t=n._getLines(r),e=t.slice(0);if(t=t.filter(u=>!/^ *\/\//.test(u)),t=t.filter(u=>u!=""),t=t.filter(u=>!/^[ \t]+$/.test(u)),t.length==1){if(["true","false","null"].indexOf(t[0].trim())>-1)return JSON.parse(t[0]);if(/^".*"$/.test(t[0].trim()))try{return JSON.parse(t[0].trim())}catch(u){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),u.line=1,u.language="JSON",u.type="string",u}else if(isFinite(t[0])&&!isNaN(parseFloat(t[0]))&&Number.isFinite(t[0]*1)&&!Number.isNaN(t[0]*1)){if(t[0].indexOf(0)==0&&t[0].length>1&&t[0].indexOf(".")!==1){let u=new Error("Error line number 1: leading 0");throw u.line=1,u.language="DAMON",u}try{return JSON.parse(t[0]*1)}catch(u){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),u.line=1,u.language="JSON",u.type="number",u}}else if(t[0]*1===1/0)try{JSON.parse(t[0]*1)}catch(u){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),u.line=1,u.language="JSON",u.type="infinity",u}}let s=0,o=[];for(let u=0,y=e.length;u<y;u++)t.slice(s).indexOf(e[u])>-1?o[u]=t.slice(s).indexOf(e[u]):o[u]=null;let a=new RegExp("^(\\t)+");for(let u=0,y=t.length;u<y;u++){if(a.test(t[u])){let N=t[u].match(a)[0].length;for(let E=0,S=N;E<S;E++)t[u]=t[u].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(t[u])&&/[ \t]+$/.test(t[u])){let N=new Error("Error line "+(o.indexOf(u)+1)+": trailing whitespace");throw N.line=o.indexOf(u)+1,N.language="DAMON",N}}let f=new RegExp("^("+" ".repeat(n.indentation)+")+");if(f.test(t[0])){let u=t[0].match(f)[0].length,y=!0;for(let N=0,E=t.length;N<E;N++)f.test(t[N])&&t[N].match(f)[0].length>=u?t[N]=t[N].slice(u):y=!1;if(!y){let N=new Error("Error line 1: bad formatting");throw N.line=1,N.language="DAMON",N}}else if(f.test(t[1])&&t[1].match(f)[0].length>n.indentation){let u=t[1].match(f)[0].length-n.indentation,y=!0;for(let N=1,E=t.length;N<E;N++)f.test(t[N])&&t[N].match(f)[0].length>=u?t[N]=t[N].slice(u):y=!1;if(!y){let N=new Error("Error line 2: bad formatting");throw N.line=2,N.language="DAMON",N}}let h=!1;if(t.length>1)for(let u=0,y=t.length;u<y;u++)u!==0&&/^- /.test(t[u])&&(h=!0);if(!/^- \{\}$/.test(t[0])&&!/^- \[\]$/.test(t[0])&&(h=!0),h){for(let u=0,y=t.length;u<y;u++)t[u]=" ".repeat(n.indentation)+t[u];t.unshift("- {}")}var b={content:t[0],level:0,id:0,children:[],headless:h,damonOriginalLinesMapping:o},c=b;if(!/^- /.test(t[0].trimStart())||/^ +/.test(t[0])&&(t[0].match(/^ +/)[0].length%n.indentation!=0||t[0].match(/^ +/)[0].length!=n.indentation)){let u=new Error("Error line "+(h*1+1)+": bad formatting");throw u.line=h*1+1,u.language="DAMON",u}t.shift();for(let u=0,y=t.length;u<y;u++){if(!/^- /.test(t[u].trimStart())||/^ +/.test(t[u])&&(t[u].match(/^ +/)[0].length%n.indentation!=0||u==0&&t[u].match(/^ +/)[0].length!=n.indentation||u!=0&&/^- /.test(t[u-1])&&t[u].match(/^ +/)[0].length!=n.indentation||u!=0&&!/^- /.test(t[u-1])&&t[u].match(/^ +/)[0].length>t[u-1].match(/^ +/)[0].length+n.indentation)){let E=new Error("Error line "+(o.indexOf(u)+1)+": bad formatting");throw E.line=o.indexOf(u)+1,E.language="DAMON",E}let N={content:t[u].trimStart().slice(2),level:1+t[u].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(c===b)N.id=b.children.length+1,b.children.push(N);else if(c.level===N.level){var d=n._findListItemCommonDirectParent(c,b);d.level==0?N.id=d.children.length+1:N.id=d.id+"-"+(d.children.length+1),d.children.push(N)}else if(c.level>N.level){var p=n._findListItemCommonAncestor(c,b,N.level);p.level==0?N.id=p.children.length+1:N.id=p.id+"-"+(p.children.length+1),p.children.push(N)}else if(c.level<N.level){var m=n._findListItemCommonDirectParent(c,b);let E=m.children.indexOf(c),S=m.children[E].id,_=m.children[E].children.length+1;N.id=S+"-"+_,m.children[E].children.push(N)}c=N}return b}_findListItemCommonDirectParent(r,n){let t=this;if(n.children.indexOf(r)>-1)return n;var e;for(let s=n.children.length-1,o=0;s>=o;s--)if(e=t._findListItemCommonDirectParent(r,n.children[s]),e)return e}_findListItemCommonAncestor(r,n,t){let e=this;var s=e._findListItemCommonDirectParent(r,n);return s.level<t?s:e._findListItemCommonAncestor(s,n,t)}_treeToMap(r){let n=this;var t=0;if(r.content=="- {}"){let a=new Map;return a.damonOriginalLinesMapping=r.damonOriginalLinesMapping,r.headless&&(a.headless=!0),e(r,a)}else if(r.content=="- []"){let a=[];return a.damonOriginalLinesMapping=r.damonOriginalLinesMapping,e(r,a)}function e(a,f){if(typeof a!="object"||a==null||Array.isArray(a)){let h=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,b=new Error("Error line number "+h+": @param { {} } tree");throw b.line=h,b.language="DAMON",b}if(typeof f=="object"&&f!==null&&!Array.isArray(f)&&f instanceof Map&&f.constructor===Map)s(a,f);else if(Array.isArray(f))o(a,f);else{let h=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,b=new Error("Error line number "+h+": @param { {} | [] } jsonMap");throw b.line=h,b.language="DAMON",b}return f}function s(a,f){for(let h=0,b=a.children.length;h<b;h++)if(t++,a.children[h].content.length==0){let c="";a.children[h].children.length>0?(c="implicit map key",f.set("",new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(""),e(a.children[h],f.get(""))):(c="implicit null key",f.set("",null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(""))}else{let c=a.children[h].content,d="key";try{if(/^.*: +\[/.test(c)&&c[c.length-1]=="]")if(/: +\[ *\]$/.test(c)){let p=JSON.parse(`["${c.slice(0,-1*c.match(/: +\[ *\]$/)[0].length)}"]`)[0];f.set(p,[]),a.children[h].children.length>0&&e(a.children[h],f.get(p))}else{let p=new RegExp(/: +\[/g),m=c.slice(0,-1).split(p),u=c.match(p).concat([""]),y=m.map((_,x)=>_+u[x]),N="",E=[];for(let _=0,x=m.length;_<x;_++)try{let R;if(_==0?R=m[0]:R=y.slice(0,_).join("")+m[_],N=JSON.parse(`["${R}"]`)[0],d="list",E=JSON.parse(`[${y.slice(_+1).join("")}]`),Array.isArray(E))break}catch{if(_==x-2){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,i=new Error("Error line number "+g+": invalid inline list");throw i.line=g,i.language="DAMON",i}}if(E.every(function(_){return _===!0||_===!1||_===null||typeof _=="string"?!0:!!(isFinite(_)&&!isNaN(parseFloat(_))&&Number.isFinite(_*1)&&!Number.isNaN(_*1))}))f.set(N,E),f.damonInlineArrays===void 0&&(f.damonInlineArrays=[]),f.damonInlineArrays.push(N);else{let _=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(t-1)+2,x=new Error("Error line number "+_+": no nesting in inline lists");throw x.line=_,x.language="DAMON",x}if(a.children[h].children.length>0){let _=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+3,x=new Error("Error line number "+_+": inline lists can't have children");throw x.line=_,x.language="DAMON",x}}else if(/: +\{ *\}$/.test(c)){let p=JSON.parse(`["${c.slice(0,-1*c.match(/: +\{ *\}$/)[0].length)}"]`)[0];f.set(p,new Map),e(a.children[h],f.get(p))}else{let p=!1;if(/^.*: /.test(c)&&c.split(new RegExp(/: +/))[c.split(new RegExp(/: +/)).length-1]==="true"){let m=c.match(new RegExp(/: +/g))[c.match(new RegExp(/: +/g)).length-1],u=JSON.parse(`["${c.slice(0,-1*m.length-4)}"]`)[0];f.set(u,!0)}else if(/^.*: /.test(c)&&c.split(new RegExp(/: +/))[c.split(new RegExp(/: +/)).length-1]==="false"){let m=c.match(new RegExp(/: +/g))[c.match(new RegExp(/: +/g)).length-1],u=JSON.parse(`["${c.slice(0,-1*m.length-5)}"]`)[0];f.set(u,!1)}else if(/^.*: /.test(c)&&c.split(new RegExp(/: +/))[c.split(new RegExp(/: +/)).length-1]==="null"){let m=c.match(new RegExp(/: +/g))[c.match(new RegExp(/: +/g)).length-1],u=JSON.parse(`["${c.slice(0,-1*m.length-4)}"]`)[0];f.set(u,null)}else if(/^.*: +"/.test(c)&&c[c.length-1]=='"'){let m=c.match(new RegExp(/: +"/g));if(m.length==1){let u=JSON.parse(`["${c.split(m[0])[0]}"]`)[0];d="string";let y=JSON.parse(`["${c.split(m[0]).slice(1).join("").slice(0,-1)}"]`)[0];f.set(u,y)}else if(m.length==2&&/: +"$/.test(c)){let u=JSON.parse(`["${c.split(m[0])[0]}"]`)[0];d="string";let y=JSON.parse(`["${c.split(m[0]).slice(1).join("")+": "}"]`)[0];f.set(u,y)}else{let u=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(t-1)+2,y=new Error("Error line number "+u+": unescaped double quote");throw y.line=u,y.language="DAMON",y}}else if(/^.*: /.test(c)&&isFinite(c.split(": ")[c.split(": ").length-1])&&!isNaN(parseFloat(c.split(": ")[c.split(": ").length-1]))&&Number.isFinite(c.split(": ")[c.split(": ").length-1]*1)&&!Number.isNaN(c.split(": ")[c.split(": ").length-1]*1)){let m=JSON.parse(`["${c.split(": ").slice(0,-1).join(": ")}"]`)[0];d="number";let u=c.match(new RegExp(/: +/g)),y=u[u.length-1],N=c.split(y)[c.split(y).length-1];if(N.indexOf(0)==0&&N.length>1&&N.indexOf(".")!==1){let S=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,_=new Error("Error line number "+S+": leading 0");throw _.line=S,_.language="DAMON",_}let E=JSON.parse(`[${c.split(": ")[c.split(": ").length-1]*1}]`)[0];f.set(m,E)}else if(/^.*: /.test(c)&&c.split(new RegExp(/: +/))[c.split(new RegExp(/: +/)).length-1]*1===1/0){let m=JSON.parse(`["${c.split(": ").slice(0,-1).join(": ")}"]`)[0];d="infinity";let u=JSON.parse(`[${c.split(": ")[c.split(": ").length-1]*1}]`)}else{let m=!1,u=0;if(/\[ *\]$/.test(c)&&(m=!0,u=c.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(c)&&(m=!0,u=c.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(c)&&(m=!0,u=4),/false$/.test(c)&&(m=!0,u=5),/null$/.test(c)&&(m=!0,u=4),/".*"$/.test(c)&&(m=!0,u=c.match(new RegExp(/".*"$/g))[0].length),!m){let y="";for(let N=c.length-1;N>-1&&(y=c[N].concat(y),isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1));N--){if(!/[ \t]/.test(c[N]))break;m=!0,u=y.length}}if(m)if(JSON.parse(`["${c.slice(0,-1*u)}"]`)[0],n.pedantic){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t),N=new Error("Error line number "+y+": missing separator");throw N.line=y,N.language="DAMON",N.errorType="pedantic",N}else if(p=!0,a.children[h].children.length>0){d="implicit map key";let y=JSON.parse(`["${c}"]`)[0];f.set(y,new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(y),e(a.children[h],f.get(y))}else{d="implicit null key";let y=JSON.parse(`["${c}"]`)[0];f.set(y,null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(y)}else{let y=JSON.parse(`["${c.slice(0,-1*u)}"]`)[0];if(n.pedantic)if(/: +$/.test(y)){let N=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t),E=new Error("Error line number "+N+": bad value");throw E.line=N,E.language="DAMON",E.errorType="pedantic",E}else{let N=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t),E=new Error("Error line number "+N+": missing separator");throw E.line=N,E.language="DAMON",E.errorType="pedantic",E}else if(p=!0,a.children[h].children.length>0){d="implicit map key";let N=JSON.parse(`["${c}"]`)[0];f.set(N,new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(N),e(a.children[h],f.get(N))}else{d="implicit null key";let N=JSON.parse(`["${c}"]`)[0];f.set(N,null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(N)}}}if(!p&&a.children[h].children.length>0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+3,u=new Error("Error line number "+m+": missing container or excess indentation");throw u.line=m,u.language="DAMON",u}}}catch(p){if(p.language===void 0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;console.error("Error line number "+m+": not JSON-compliant, detailed error follows"),p.line=m,p.language="JSON",p.type=d}throw p}}}function o(a,f){for(let h=0,b=a.children.length;h<b;h++)if(t++,a.children[h].content.length){let c=a.children[h].content;if(/^[ \t]*\[/.test(c)&&c[c.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(c))f.push([]),e(a.children[h],f[f.length-1]);else{let d;try{d=JSON.parse(c)}catch{let u=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,y=new Error("Error line number "+u+": invalid inline lists");throw y.line=u,y.language="JSON",y.type="list",y}if(d.every(function(m){return m===!0||m===!1||m===null||typeof m=="string"?!0:!!(isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1))}))f.push(d),f.damonInlineArrays===void 0&&(f.damonInlineArrays=[]),f.damonInlineArrays.push(h);else{let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,u=new Error("Error line number "+m+": no nesting in inline lists");throw u.line=m,u.language="DAMON",u}if(a.children[h].children.length>0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+3,u=new Error("Error line number "+m+": inline lists can't have children");throw u.line=m,u.language="DAMON",u}}else if(/^[ \t]*\{\}$/.test(c))f.push(new Map),e(a.children[h],f[f.length-1]);else if(/^[ \t]*true$/.test(c))f.push(!0);else if(/^[ \t]*false$/.test(c))f.push(!1);else if(/^[ \t]*null$/.test(c))f.push(null);else if(/^[ \t]*".*"$/.test(c))try{f.push(JSON.parse(`[${c.trimStart()}]`)[0])}catch(d){let p=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;throw console.error("Error line number "+p+": not JSON-compliant, detailed error follows"),d.line=p,d.language="JSON",d.type="string",d}else if(isFinite(c)&&!isNaN(parseFloat(c))&&Number.isFinite(c*1)&&!Number.isNaN(c*1)){if(c.indexOf(0)==0&&c.length>1&&c.indexOf(".")!==1){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,p=new Error("Error line number "+d+": leading 0");throw p.line=d,p.language="DAMON",p}try{f.push(JSON.parse(`[${c*1}]`)[0])}catch(d){let p=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;throw console.error("Error line number "+p+": not JSON-compliant, detailed error follows"),d.line=p,d.language="JSON",d.type="number",d}}else if(c*1===1/0)try{JSON.parse(c*1)}catch(d){let p=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;throw console.error("Error line number "+p+": not JSON-compliant, detailed error follows"),d.line=p,d.language="JSON",d.type="infinity",d}else{let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,p=new Error("Error line number "+d+": list items can't have a key");throw p.line=d,p.language="DAMON",p}}else{let c=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,d=new Error("Error line number "+c+": empty list node");throw d.line=c,d.language="DAMON",d}}}mapToDamon(r,n){let t=this;var e="";if(Array.isArray(r))e+=`- []
`;else if(typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map)e+=`- {}
`;else return typeof r=="string"&&(r='"'+r+'"'),JSON.parse(r),r;return s(r),t.damonToMap(e.slice(0,-1)),e.slice(0,-1);function s(o,a=1){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map){let b=Array.from(o.keys()),c=!1;o.implicitNulls!==void 0&&o.implicitNulls.length===b.length&&(c=!0);for(let[d,p]of o)if(typeof p=="object"&&p!==null)if(Array.isArray(p)){let m=0,u=p.filter(function(y){return y===!0||y===!1?!0:y===null?(m++,!0):typeof y=="string"?!0:!!(isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1))});if(p.length==u.length&&a*4+2+p.join(", ").length+m*4<=80||n&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(d)>-1){let y="["+p.map(function(N){return typeof N=="string"&&(N=JSON.stringify(N)),N}).join(", ")+"]";e+="    ".repeat(a)+"- "+JSON.stringify(d).slice(1,-1)+": "+y+`
`}else e+="    ".repeat(a)+"- "+JSON.stringify(d).slice(1,-1)+`: []
`,s(p,a+1)}else e+="    ".repeat(a)+"- "+JSON.stringify(d).slice(1,-1)+`: {}
`,s(p,a+1);else c?e+="    ".repeat(a)+"- "+JSON.stringify(d).slice(1,-1)+`
`:(e+="    ".repeat(a)+"- "+JSON.stringify(d).slice(1,-1)+": ",p===!0?e+=`true
`:p===!1?e+=`false
`:p===null?e+=`null
`:Number.isFinite(p)&&!Number.isNaN(p)?e+=p+`
`:e+=JSON.stringify(p)+`
`)}else if(Array.isArray(o))for(var f=0,h=o.length;f<h;f++)if(typeof o[f]=="object"&&o[f]!==null)if(Array.isArray(o[f])){let b=0,c=o[f].filter(function(d){return d===!0||d===!1?!0:d===null?(b++,!0):typeof d=="string"?!0:!!(isFinite(d)&&!isNaN(parseFloat(d))&&Number.isFinite(d*1)&&!Number.isNaN(d*1))});if(o[f].length==c.length&&a*4+2+o[f].join(", ").length+b*4<=80||n&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(f)>-1){let d="["+o[f].map(function(p){return typeof p=="string"&&(p=JSON.stringify(p)),p}).join(", ")+"]";e+="    ".repeat(a)+"- "+d+`
`}else e+="    ".repeat(a)+`- []
`,s(o[f],a+1)}else e+="    ".repeat(a)+`- {}
`,s(o[f],a+1);else o[f]===!0?e+="    ".repeat(a)+`- true
`:o[f]===!1?e+="    ".repeat(a)+`- false
`:o[f]===null?e+="    ".repeat(a)+`- null
`:Number.isFinite(o[f])&&!Number.isNaN(o[f])?e+="    ".repeat(a)+"- "+o[f]+`
`:e+="    ".repeat(a)+"- "+JSON.stringify(o[f])+`
`}}mapToJSON(r){let n=this;var t="";if(Array.isArray(r))return t+=`[\r
`,e(r),t+="]",JSON.parse(t),t;return typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map?(t+=`{\r
`,e(r),t+="}",JSON.parse(t),t):(typeof r=="string"&&(r=JSON.stringify(r)),JSON.parse(r),r);function e(s,o=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[h,b]of s)typeof b=="object"&&b!==null?Array.isArray(b)?b.length>0?(t+="    ".repeat(o)+`${JSON.stringify(h)}: [\r
`,e(b,o+1),t+="    ".repeat(o)+"]"):t+="    ".repeat(o)+`${JSON.stringify(h)}: []`:Array.from(b.keys()).length>0?(t+="    ".repeat(o)+`${JSON.stringify(h)}: {\r
`,e(b,o+1),t+="    ".repeat(o)+"}"):t+="    ".repeat(o)+`${JSON.stringify(h)}: {}`:b===!0?t+="    ".repeat(o)+`${JSON.stringify(h)}: true`:b===!1?t+="    ".repeat(o)+`${JSON.stringify(h)}: false`:b===null?t+="    ".repeat(o)+`${JSON.stringify(h)}: null`:Number.isFinite(b)&&!Number.isNaN(b)?t+="    ".repeat(o)+`${JSON.stringify(h)}: `+b:t+="    ".repeat(o)+`${JSON.stringify(h)}: `+JSON.stringify(b),h!=Array.from(s.keys())[Array.from(s.keys()).length-1]?t+=`,\r
`:t+=`\r
`;else if(Array.isArray(s))for(var a=0,f=s.length;a<f;a++)typeof s[a]=="object"&&s[a]!==null?Array.isArray(s[a])?s[a].length>0?(t+="    ".repeat(o)+`[\r
`,e(s[a],o+1),t+="    ".repeat(o)+"]"):t+="    ".repeat(o)+"[]":Array.from(s[a].keys()).length>0?(t+="    ".repeat(o)+`{\r
`,e(s[a],o+1),t+="    ".repeat(o)+"}"):t+="    ".repeat(o)+"{}":s[a]===!0?t+="    ".repeat(o)+"true":s[a]===!1?t+="    ".repeat(o)+"false":s[a]===null?t+="    ".repeat(o)+"null":Number.isFinite(s[a])&&!Number.isNaN(s[a])?t+="    ".repeat(o)+s[a]:t+="    ".repeat(o)+JSON.stringify(s[a]),a!=f-1?t+=`,\r
`:t+=`\r
`}}getPathsList(r){let t=this.damonToMap(r),e=[];return s(t),e;function s(o,a=[]){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map)for(let[f,h]of o)typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map&&Array.from(h.keys()).length?(e.push(a.concat(f)),s(h,a.concat([f]))):Array.isArray(h)&&(o.damonInlineArrays==null||o.damonInlineArrays.indexOf(f)===-1)&&h.length?(e.push(a.concat(f)),s(h,a.concat([f]))):e.push(a.concat(f).concat(h));else for(let f=0,h=o.length;f<h;f++)typeof o[f]=="object"&&o[f]!==null&&!Array.isArray(o[f])&&o[f]instanceof Map&&o[f].constructor===Map&&Array.from(o[f].keys()).length?(e.push(a.concat(f)),s(o[f],a.concat([f]))):Array.isArray(o[f])&&(o.damonInlineArrays==null||o.damonInlineArrays.indexOf(f)===-1)&&o[f].length?(e.push(a.concat(f)),s(o[f],a.concat([f]))):e.push(a.concat(o[f]))}}getRangeFromPath(r,n){let t=this,e=t.damonToMap(r),s=-1,o=!1;c(e,n);let a=t.mapIndexToLine(e,s),f=t._getLines(r)[a],h=0,b=f.length;if(n.length==1)typeof n[n.length-1]=="string"?h=f.length-f.trimStart().slice(2+n[n.length-1].length+2).trimStart().length:h=f.length-f.trimStart().slice(2).length;else if(typeof n[n.length-2]=="string")if(typeof n[n.length-1]=="string")h=f.length-f.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(f[f.length-1]=="]"&&!/\[ *\]$/.test(f)){let d=f.trimStart().slice(2+n[n.length-2].length+2),p=JSON.parse(d),m=p.slice(0,n[n.length-1].length).reduce((N,E)=>N+(E===p[n[n.length-1]]),0),u=0,y=p[n[n.length-1]];typeof y=="string"&&(y='"'+y+'"');for(let N=0,E=m+1;N<E;N++)u=d.indexOf(y,u);h=f.length-d.length+u,b=h+y.length}else h=f.length-f.trimStart().slice(2).length;else if(typeof n[n.length-1]=="string")h=f.length-f.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(f[f.length-1]=="]"&&!/\[ *\]$/.test(f)){let d=f.trimStart().slice(2),p=JSON.parse(d),m=p.slice(0,n[n.length-1]).reduce((N,E)=>N+(E===p[n[n.length-1]]),0),u=0,y=p[n[n.length-1]];typeof y=="string"&&(y='"'+y+'"');for(let N=0,E=m+1;N<E;N++)u=d.indexOf(y,u);h=f.length-d.length+u,b=h+y.length}else h=f.length-f.trimStart().slice(2).length;return[[a,h],[a,b]];function c(d,p,m=[]){if(s+=1,typeof d=="object"&&d!==null&&!Array.isArray(d)&&d instanceof Map&&d.constructor===Map)for(let[u,y]of d){if(o==!0)return;if(s+=1,JSON.stringify(p)===JSON.stringify(m.concat([u]))){o=!0;return}if(typeof y=="object"&&y!==null&&!Array.isArray(y)&&y instanceof Map&&y.constructor===Map&&Array.from(y.keys()).length)s-=1,c(y,p,m.concat([u]));else if(Array.isArray(y)&&y.length){if(d.damonInlineArrays==null||d.damonInlineArrays.indexOf(u)===-1)s-=1,c(y,p,m.concat([u]));else if(JSON.stringify(p.slice(0,-1))===JSON.stringify(m.concat([u]))){o=!0;return}}}else for(let u=0,y=d.length;u<y;u++){if(o==!0)return;if(s+=1,JSON.stringify(p)===JSON.stringify(m.concat([u]))){o=!0;return}if(typeof d[u]=="object"&&d[u]!==null&&!Array.isArray(d[u])&&d[u]instanceof Map&&d[u].constructor===Map&&Array.from(d[u].keys()).length)s-=1,c(d[u],p,m.concat([u]));else if(Array.isArray(d[u])&&d[u].length){if(d.damonInlineArrays==null||d.damonInlineArrays.indexOf(u)===-1)s-=1,c(d[u],p,m.concat([u]));else if(JSON.stringify(p.slice(0,-1))===JSON.stringify(m.concat([u]))){o=!0;return}}}}}getTokenFromCoordinates(r,n){let t=this,e={},s=t._getLines(r).slice(0,n[0]);if(s[n[0]-1]=="")return e.type="newline",e.path=null,e.range=[n,n],e;if(/^[ \t]+$/.test(s[n[0]-1]))return e.type="indentation",e.path=null,e.range=[[n[0],1],[n[0],s[s.length-1].length]],e;if(/^[ \t]+/.test(s[n[0]-1].slice(0,n[1]-1))&&(e.type="indentation",e.range=[[n[0],1],[n[0],s[n[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(s[n[0]-1]))return e.type=="indentation"?(e.path=null,e):(e.type="comment",e.path=null,e.range=[[[n[0],s[n[0]-1].split("//")[0].length]],[[n[0],s[n[0]-1].length]]],e);if(s.length==1)try{let b=JSON.parse(r);if(b===!0||b===!1||b===null||typeof b=="string"||typeof b=="number"){let c=r.match(/^ */)[0].length,d=r.match(/ *$/)[0].length;return e.type="null",typeof b!="object"&&(e.type=typeof b),e.path=null,e.range=[[0,c],[0,r.length-d]],e}}catch{}let o=t.damonToMap(s.join(`
`)),a=Array.from(o.keys()),f=[];for(;a.length;){let b=a[a.length-1];if(f.push(b),typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map?o=o.get(b):Array.isArray(o)&&(o=o[b]),o===!0||o===!1||o===null||typeof o=="string"||typeof o=="number")break;a=Array.from(o.keys())}e.path=f;let h=t.getRangeFromPath(r,f);if(typeof f[f.length-1]=="string")if(n[1]<h[0][1]){let b=s[n[0]-1].slice(0,-1*(h[1][1]-h[0][1])-1).length;if(n[1]<b){let c=s[n[0]-1].match(/^[ \t]+/)[0].length+3;n[1]>=c?(e.type="property",e.range=[[n[0],c],[n[0],b]]):(e.type="hyphen",e.range=[[n[0],c-2],[n[0],c-1]])}else e.type="separator",e.range=[[n[0],b+1],[n[0],h[0][1]-1]]}else e.type="?",e.range=h;else if(n[1]<h[0][1]){e.type="hyphen";let b=s[n[0]-1].match(/^[ \t]+/)[0].length+1;e.range=[[n[0],b],[n[0],b+1]]}else e.type="?",e.range=h;return e}mapIndexToLine(r,n){let t=0,e=0;r.headless&&(n-=1);for(let s=0,o=r.damonOriginalLinesMapping.length;s<o;s++)if(r.damonOriginalLinesMapping[s]!==null&&e++,e==n){t=s+1;break}return t}}});(function(){window.Damon=Ae()})();})();
