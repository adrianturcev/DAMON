(()=>{var B=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var Je=Object.prototype.hasOwnProperty;var Re=(l=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(l,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):l)(function(l){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+l+'" is not supported')});var $e=(l,r)=>()=>(l&&(r=l(l=0)),r);var P=(l,r)=>()=>(r||l((r={exports:{}}).exports,r),r.exports),Ce=(l,r)=>{for(var n in r)B(l,n,{get:r[n],enumerable:!0})},Ie=(l,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of ve(r))!Je.call(l,e)&&e!==n&&B(l,e,{get:()=>r[e],enumerable:!(t=Le(r,e))||t.enumerable});return l};var ke=l=>Ie(B({},"__esModule",{value:!0}),l);var Ne={};Ce(Ne,{__addDisposableResource:()=>de,__assign:()=>k,__asyncDelegator:()=>ae,__asyncGenerator:()=>oe,__asyncValues:()=>fe,__await:()=>C,__awaiter:()=>te,__classPrivateFieldGet:()=>ge,__classPrivateFieldIn:()=>ye,__classPrivateFieldSet:()=>pe,__createBinding:()=>F,__decorate:()=>X,__disposeResources:()=>me,__esDecorate:()=>W,__exportStar:()=>ne,__extends:()=>M,__generator:()=>re,__importDefault:()=>he,__importStar:()=>ce,__makeTemplateObject:()=>ue,__metadata:()=>ee,__param:()=>Q,__propKey:()=>Z,__read:()=>V,__rest:()=>H,__rewriteRelativeImportExtension:()=>Oe,__runInitializers:()=>z,__setFunctionName:()=>j,__spread:()=>ie,__spreadArray:()=>se,__spreadArrays:()=>le,__values:()=>D,default:()=>Te});function M(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");U(l,r);function n(){this.constructor=l}l.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function H(l,r){var n={};for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&r.indexOf(t)<0&&(n[t]=l[t]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(l);e<t.length;e++)r.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(l,t[e])&&(n[t[e]]=l[t[e]]);return n}function X(l,r,n,t){var e=arguments.length,s=e<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,n):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(l,r,n,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(s=(e<3?a(s):e>3?a(r,n,s):a(r,n))||s);return e>3&&s&&Object.defineProperty(r,n,s),s}function Q(l,r){return function(n,t){r(n,t,l)}}function W(l,r,n,t,e,s){function a(d){if(d!==void 0&&typeof d!="function")throw new TypeError("Function expected");return d}for(var o=t.kind,f=o==="getter"?"get":o==="setter"?"set":"value",h=!r&&l?t.static?l:l.prototype:null,N=r||(h?Object.getOwnPropertyDescriptor(h,t.name):{}),u,b=!1,g=n.length-1;g>=0;g--){var m={};for(var c in t)m[c]=c==="access"?{}:t[c];for(var c in t.access)m.access[c]=t.access[c];m.addInitializer=function(d){if(b)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(d||null))};var y=(0,n[g])(o==="accessor"?{get:N.get,set:N.set}:N[f],m);if(o==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(u=a(y.get))&&(N.get=u),(u=a(y.set))&&(N.set=u),(u=a(y.init))&&e.unshift(u)}else(u=a(y))&&(o==="field"?e.unshift(u):N[f]=u)}h&&Object.defineProperty(h,t.name,N),b=!0}function z(l,r,n){for(var t=arguments.length>2,e=0;e<r.length;e++)n=t?r[e].call(l,n):r[e].call(l);return t?n:void 0}function Z(l){return typeof l=="symbol"?l:"".concat(l)}function j(l,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function ee(l,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,r)}function te(l,r,n,t){function e(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(N){try{h(t.next(N))}catch(u){a(u)}}function f(N){try{h(t.throw(N))}catch(u){a(u)}}function h(N){N.done?s(N.value):e(N.value).then(o,f)}h((t=t.apply(l,r||[])).next())})}function re(l,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,e,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(h){return function(N){return f([h,N])}}function f(h){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(t=1,e&&(s=h[0]&2?e.return:h[0]?e.throw||((s=e.return)&&s.call(e),0):e.next)&&!(s=s.call(e,h[1])).done)return s;switch(e=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,e=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=r.call(l,n)}catch(N){h=[6,N],e=0}finally{t=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ne(l,r){for(var n in l)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&F(r,l,n)}function D(l){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&l[r],t=0;if(n)return n.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&t>=l.length&&(l=void 0),{value:l&&l[t++],done:!l}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(l,r){var n=typeof Symbol=="function"&&l[Symbol.iterator];if(!n)return l;var t=n.call(l),e,s=[],a;try{for(;(r===void 0||r-- >0)&&!(e=t.next()).done;)s.push(e.value)}catch(o){a={error:o}}finally{try{e&&!e.done&&(n=t.return)&&n.call(t)}finally{if(a)throw a.error}}return s}function ie(){for(var l=[],r=0;r<arguments.length;r++)l=l.concat(V(arguments[r]));return l}function le(){for(var l=0,r=0,n=arguments.length;r<n;r++)l+=arguments[r].length;for(var t=Array(l),e=0,r=0;r<n;r++)for(var s=arguments[r],a=0,o=s.length;a<o;a++,e++)t[e]=s[a];return t}function se(l,r,n){if(n||arguments.length===2)for(var t=0,e=r.length,s;t<e;t++)(s||!(t in r))&&(s||(s=Array.prototype.slice.call(r,0,t)),s[t]=r[t]);return l.concat(s||Array.prototype.slice.call(r))}function C(l){return this instanceof C?(this.v=l,this):new C(l)}function oe(l,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n.apply(l,r||[]),e,s=[];return e=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),e[Symbol.asyncIterator]=function(){return this},e;function a(g){return function(m){return Promise.resolve(m).then(g,u)}}function o(g,m){t[g]&&(e[g]=function(c){return new Promise(function(y,d){s.push([g,c,y,d])>1||f(g,c)})},m&&(e[g]=m(e[g])))}function f(g,m){try{h(t[g](m))}catch(c){b(s[0][3],c)}}function h(g){g.value instanceof C?Promise.resolve(g.value.v).then(N,u):b(s[0][2],g)}function N(g){f("next",g)}function u(g){f("throw",g)}function b(g,m){g(m),s.shift(),s.length&&f(s[0][0],s[0][1])}}function ae(l){var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r;function t(e,s){r[e]=l[e]?function(a){return(n=!n)?{value:C(l[e](a)),done:!1}:s?s(a):a}:s}}function fe(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=l[Symbol.asyncIterator],n;return r?r.call(l):(l=typeof D=="function"?D(l):l[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n);function t(s){n[s]=l[s]&&function(a){return new Promise(function(o,f){a=l[s](a),e(o,f,a.done,a.value)})}}function e(s,a,o,f){Promise.resolve(f).then(function(h){s({value:h,done:o})},a)}}function ue(l,r){return Object.defineProperty?Object.defineProperty(l,"raw",{value:r}):l.raw=r,l}function ce(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var n=G(l),t=0;t<n.length;t++)n[t]!=="default"&&F(r,l,n[t]);return De(r,l),r}function he(l){return l&&l.__esModule?l:{default:l}}function ge(l,r,n,t){if(n==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?l!==r||!t:!r.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?t:n==="a"?t.call(l):t?t.value:r.get(l)}function pe(l,r,n,t,e){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?l!==r||!e:!r.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?e.call(l,n):e?e.value=n:r.set(l,n),n}function ye(l,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?r===l:l.has(r)}function de(l,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var t,e;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=r[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=r[Symbol.dispose],n&&(e=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");e&&(t=function(){try{e.call(this)}catch(s){return Promise.reject(s)}}),l.stack.push({value:r,dispose:t,async:n})}else n&&l.stack.push({async:!0});return r}function me(l){function r(s){l.error=l.hasError?new Fe(s,l.error,"An error was suppressed during disposal."):s,l.hasError=!0}var n,t=0;function e(){for(;n=l.stack.pop();)try{if(!n.async&&t===1)return t=0,l.stack.push(n),Promise.resolve().then(e);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return t|=2,Promise.resolve(s).then(e,function(a){return r(a),e()})}else t|=1}catch(a){r(a)}if(t===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return e()}function Oe(l,r){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,t,e,s,a){return t?r?".jsx":".js":e&&(!s||!a)?n:e+s+"."+a.toLowerCase()+"js"}):l}var U,k,F,De,G,Fe,Te,be=$e(()=>{U=function(l,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},U(l,r)};k=function(){return k=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},k.apply(this,arguments)};F=Object.create?function(l,r,n,t){t===void 0&&(t=n);var e=Object.getOwnPropertyDescriptor(r,n);(!e||("get"in e?!r.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(l,t,e)}:function(l,r,n,t){t===void 0&&(t=n),l[t]=r[n]};De=Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r},G=function(l){return G=Object.getOwnPropertyNames||function(r){var n=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[n.length]=t);return n},G(l)};Fe=typeof SuppressedError=="function"?SuppressedError:function(l,r,n){var t=new Error(n);return t.name="SuppressedError",t.error=l,t.suppressed=r,t};Te={__extends:M,__assign:k,__rest:H,__decorate:X,__param:Q,__esDecorate:W,__runInitializers:z,__propKey:Z,__setFunctionName:j,__metadata:ee,__awaiter:te,__generator:re,__createBinding:F,__exportStar:ne,__values:D,__read:V,__spread:ie,__spreadArrays:le,__spreadArray:se,__await:C,__asyncGenerator:oe,__asyncDelegator:ae,__asyncValues:fe,__makeTemplateObject:ue,__importStar:ce,__importDefault:he,__classPrivateFieldGet:ge,__classPrivateFieldSet:pe,__classPrivateFieldIn:ye,__addDisposableResource:de,__disposeResources:me,__rewriteRelativeImportExtension:Oe}});var we=P(q=>{(function(l){"use strict";var r=typeof process=="object"&&process.env?process.env:self;l.parser=function(p){return new u(p)},l.CParser=u,l.CStream=g,l.createStream=b,l.MAX_BUFFER_LENGTH=64*1024,l.DEBUG=r.CDEBUG==="debug",l.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",l.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n={textNode:void 0,numberNode:""},t=l.EVENTS.filter(function(p){return p!=="error"&&p!=="end"}),e=0,s;l.STATE={BEGIN:e++,VALUE:e++,OPEN_OBJECT:e++,CLOSE_OBJECT:e++,OPEN_ARRAY:e++,CLOSE_ARRAY:e++,TEXT_ESCAPE:e++,STRING:e++,BACKSLASH:e++,END:e++,OPEN_KEY:e++,CLOSE_KEY:e++,TRUE:e++,TRUE2:e++,TRUE3:e++,FALSE:e++,FALSE2:e++,FALSE3:e++,FALSE4:e++,NULL:e++,NULL2:e++,NULL3:e++,NUMBER_DECIMAL_POINT:e++,NUMBER_DIGIT:e++};for(var a in l.STATE)l.STATE[l.STATE[a]]=a;e=l.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(p){function i(){this.__proto__=p}return i.prototype=p,new i}),Object.getPrototypeOf||(Object.getPrototypeOf=function(p){return p.__proto__}),Object.keys||(Object.keys=function(p){var i=[];for(var w in p)p.hasOwnProperty(w)&&i.push(w);return i});function f(p){var i=Math.max(l.MAX_BUFFER_LENGTH,10),w=0;for(var O in n){var A=p[O]===void 0?0:p[O].length;if(A>i)switch(O){case"text":closeText(p);break;default:_(p,"Max buffer length exceeded: "+O)}w=Math.max(w,A)}p.bufferCheckPosition=l.MAX_BUFFER_LENGTH-w+p.position}function h(p){for(var i in n)p[i]=n[i]}var N=/[\\"\n]/g;function u(p){if(!(this instanceof u))return new u(p);var i=this;h(i),i.bufferCheckPosition=l.MAX_BUFFER_LENGTH,i.q=i.c=i.p="",i.opt=p||{},i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.state=e.BEGIN,i.stack=new Array,i.position=i.column=0,i.line=1,i.slashed=!1,i.unicodeI=0,i.unicodeS=null,i.depth=0,m(i,"onready")}u.prototype={end:function(){S(this)},write:R,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=Re("stream").Stream}catch{s=function(){}}function b(p){return new g(p)}function g(p){if(!(this instanceof g))return new g(p);this._parser=new u(p),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var i=this;s.apply(i),this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(w){i.emit("error",w),i._parser.error=null},t.forEach(function(w){Object.defineProperty(i,"on"+w,{get:function(){return i._parser["on"+w]},set:function(O){if(!O)return i.removeAllListeners(w),i._parser["on"+w]=O,O;i.on(w,O)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(s.prototype,{constructor:{value:g}}),g.prototype.write=function(p){p=new Buffer(p);for(var i=0;i<p.length;i++){var w=p[i];if(this.bytes_remaining>0){for(var O=0;O<this.bytes_remaining;O++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+O]=p[O];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,i=i+O-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&w>=128)if(w>=194&&w<=223&&(this.bytes_in_sequence=2),w>=224&&w<=239&&(this.bytes_in_sequence=3),w>=240&&w<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+i>p.length){for(var A=0;A<=p.length-1-i;A++)this.temp_buffs[this.bytes_in_sequence][A]=p[i+A];return this.bytes_remaining=i+this.bytes_in_sequence-p.length,!0}else{this.string=p.slice(i,i+this.bytes_in_sequence).toString(),i=i+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var v=i;v<p.length&&!(p[v]>=128);v++);this.string=p.slice(i,v).toString(),this._parser.write(this.string),this.emit("data",this.string),i=v-1}},g.prototype.end=function(p){return p&&p.length&&this._parser.write(p.toString()),this._parser.end(),!0},g.prototype.on=function(p,i){var w=this;return!w._parser["on"+p]&&t.indexOf(p)!==-1&&(w._parser["on"+p]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,p),w.emit.apply(w,O)}),s.prototype.on.call(w,p,i)},g.prototype.destroy=function(){h(this._parser),this.emit("close")};function m(p,i,w){l.INFO&&console.log("-- emit",i,w),p[i]&&p[i](w)}function c(p,i,w){y(p),m(p,i,w)}function y(p,i){p.textNode=E(p.opt,p.textNode),p.textNode!==void 0&&m(p,i||"onvalue",p.textNode),p.textNode=void 0}function d(p){p.numberNode&&m(p,"onvalue",parseFloat(p.numberNode)),p.numberNode=""}function E(p,i){return i===void 0||(p.trim&&(i=i.trim()),p.normalize&&(i=i.replace(/\s+/g," "))),i}function _(p,i){return y(p),i+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c,i=new Error(i),p.error=i,m(p,"onerror",i),p}function S(p){return(p.state!==e.VALUE||p.depth!==0)&&_(p,"Unexpected end"),y(p),p.c="",p.closed=!0,m(p,"onend"),u.call(p,p.opt),p}function x(p){return p===o.carriageReturn||p===o.lineFeed||p===o.space||p===o.tab}function R(p){var i=this;if(this.error)throw this.error;if(i.closed)return _(i,"Cannot write after close. Assign an onready handler.");if(p===null)return S(i);var w=0,O=p.charCodeAt(0),A=i.p,v=!1;for(l.DEBUG&&console.log("write -> ["+p+"]");O&&(A=O,i.c=O=p.charCodeAt(w++),A!==O?i.p=A:A=i.p,!!O);)switch(l.DEBUG&&console.log(w,O,l.STATE[i.state]),v?v=!1:(i.position++,O===o.lineFeed?(i.line++,i.column=0):i.column++),i.state){case e.BEGIN:O===o.openBrace?i.state=e.OPEN_OBJECT:O===o.openBracket?i.state=e.OPEN_ARRAY:x(O)||_(i,"Non-whitespace before {[.");continue;case e.OPEN_KEY:case e.OPEN_OBJECT:if(x(O))continue;if(i.state===e.OPEN_KEY)i.stack.push(e.CLOSE_KEY);else if(O===o.closeBrace){m(i,"onopenobject"),this.depth++,m(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||e.VALUE;continue}else i.stack.push(e.CLOSE_OBJECT);O===o.doubleQuote?i.state=e.STRING:_(i,'Malformed object key should start with "');continue;case e.CLOSE_KEY:case e.CLOSE_OBJECT:if(x(O))continue;var Ge=i.state===e.CLOSE_KEY?"key":"object";O===o.colon?(i.state===e.CLOSE_OBJECT?(i.stack.push(e.CLOSE_OBJECT),y(i,"onopenobject"),this.depth++):y(i,"onkey"),i.state=e.VALUE):O===o.closeBrace?(c(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||e.VALUE):O===o.comma?(i.state===e.CLOSE_OBJECT&&i.stack.push(e.CLOSE_OBJECT),y(i),i.state=e.OPEN_KEY):_(i,"Bad object");continue;case e.OPEN_ARRAY:case e.VALUE:if(x(O))continue;if(i.state===e.OPEN_ARRAY)if(m(i,"onopenarray"),this.depth++,i.state=e.VALUE,O===o.closeBracket){m(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||e.VALUE;continue}else i.stack.push(e.CLOSE_ARRAY);O===o.doubleQuote?i.state=e.STRING:O===o.openBrace?i.state=e.OPEN_OBJECT:O===o.openBracket?i.state=e.OPEN_ARRAY:O===o.t?i.state=e.TRUE:O===o.f?i.state=e.FALSE:O===o.n?i.state=e.NULL:O===o.minus?i.numberNode+="-":o._0<=O&&O<=o._9?(i.numberNode+=String.fromCharCode(O),i.state=e.NUMBER_DIGIT):_(i,"Bad value");continue;case e.CLOSE_ARRAY:if(O===o.comma)i.stack.push(e.CLOSE_ARRAY),y(i,"onvalue"),i.state=e.VALUE;else if(O===o.closeBracket)c(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||e.VALUE;else{if(x(O))continue;_(i,"Bad array")}continue;case e.STRING:i.textNode===void 0&&(i.textNode="");var L=w-1,J=i.slashed,$=i.unicodeI;e:for(;;){for(l.DEBUG&&console.log(w,O,l.STATE[i.state],J);$>0;)if(i.unicodeS+=String.fromCharCode(O),O=p.charCodeAt(w++),i.position++,$===4?(i.textNode+=String.fromCharCode(parseInt(i.unicodeS,16)),$=0,L=w-1):$++,!O)break e;if(O===o.doubleQuote&&!J){i.state=i.stack.pop()||e.VALUE,i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}if(O===o.backslash&&!J&&(J=!0,i.textNode+=p.substring(L,w-1),i.position+=w-1-L,O=p.charCodeAt(w++),i.position++,!O))break;if(J){if(J=!1,O===o.n?i.textNode+=`
`:O===o.r?i.textNode+="\r":O===o.t?i.textNode+="	":O===o.f?i.textNode+="\f":O===o.b?i.textNode+="\b":O===o.u?($=1,i.unicodeS=""):i.textNode+=String.fromCharCode(O),O=p.charCodeAt(w++),i.position++,L=w-1,O)continue;break}N.lastIndex=w;var T=N.exec(p);if(T===null){w=p.length+1,i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}if(w=T.index+1,O=p.charCodeAt(T.index),!O){i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}}i.slashed=J,i.unicodeI=$;continue;case e.TRUE:O===o.r?i.state=e.TRUE2:_(i,"Invalid true started with t"+O);continue;case e.TRUE2:O===o.u?i.state=e.TRUE3:_(i,"Invalid true started with tr"+O);continue;case e.TRUE3:O===o.e?(m(i,"onvalue",!0),i.state=i.stack.pop()||e.VALUE):_(i,"Invalid true started with tru"+O);continue;case e.FALSE:O===o.a?i.state=e.FALSE2:_(i,"Invalid false started with f"+O);continue;case e.FALSE2:O===o.l?i.state=e.FALSE3:_(i,"Invalid false started with fa"+O);continue;case e.FALSE3:O===o.s?i.state=e.FALSE4:_(i,"Invalid false started with fal"+O);continue;case e.FALSE4:O===o.e?(m(i,"onvalue",!1),i.state=i.stack.pop()||e.VALUE):_(i,"Invalid false started with fals"+O);continue;case e.NULL:O===o.u?i.state=e.NULL2:_(i,"Invalid null started with n"+O);continue;case e.NULL2:O===o.l?i.state=e.NULL3:_(i,"Invalid null started with nu"+O);continue;case e.NULL3:O===o.l?(m(i,"onvalue",null),i.state=i.stack.pop()||e.VALUE):_(i,"Invalid null started with nul"+O);continue;case e.NUMBER_DECIMAL_POINT:O===o.period?(i.numberNode+=".",i.state=e.NUMBER_DIGIT):_(i,"Leading zero not followed by .");continue;case e.NUMBER_DIGIT:o._0<=O&&O<=o._9?i.numberNode+=String.fromCharCode(O):O===o.period?(i.numberNode.indexOf(".")!==-1&&_(i,"Invalid number has two dots"),i.numberNode+="."):O===o.e||O===o.E?((i.numberNode.indexOf("e")!==-1||i.numberNode.indexOf("E")!==-1)&&_(i,"Invalid number has two exponential"),i.numberNode+="e"):O===o.plus||O===o.minus?(A===o.e||A===o.E||_(i,"Invalid symbol in number"),i.numberNode+=String.fromCharCode(O)):(d(i),w--,v=!0,i.state=i.stack.pop()||e.VALUE);continue;default:_(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&f(i),i}})(typeof q>"u"?clarinet={}:q)});var _e=P(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.stringify=I.parse=void 0;var Be=(be(),ke(Ne)),Pe=Be.__importDefault(we());function Ue(l){let r=K(),n,t;function e(a){try{let o=r.next(a);o.done&&(n=o.value)}catch(o){t=o}}let s=Pe.default.parser();if(s.onopenobject=a=>e({type:"openobject",key:a}),s.onopenarray=()=>e({type:"openarray"}),s.onkey=a=>e({type:"key",key:a}),s.onvalue=a=>e({type:"value",value:a}),s.oncloseobject=()=>e({type:"closeobject"}),s.onclosearray=()=>e({type:"closearray"}),s.onerror=a=>e({type:"error",err:a}),r.next(),s.write(l).close(),t)throw t;return n}I.parse=Ue;function Y(l){return Array.isArray(l)?`[${l.map(Y).join(",")}]`:l instanceof Map?`{${[...l].map(([r,n])=>JSON.stringify(r)+":"+Y(n)).join(",")}}`:JSON.stringify(l)}I.stringify=Y;var Ee=Symbol();function*K(){let l=yield;switch(l.type){case"value":return l.value;case"openobject":let r=new Map,n=l.key;for(n===void 0&&(yield);n!==void 0;)r.set(n,yield*K()),n=(yield).key;return r;case"openarray":let t=[],e;for(;;){if(e=yield*K(),e===Ee)return t;t.push(e)}case"closearray":return Ee;case"error":throw l.err;default:throw Error(`Unexpected ParseEvent ${l.type}`)}}});var Ae=P((Me,xe)=>{var Se=_e().parse;xe.exports=class{constructor(r=!1){let n=this;if(this.indentation=4,[!0,!1,void 0].indexOf(r)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=r}template(r){let n=this;var t=r.raw[0];for(let s=1;s<r.raw.length;s++)typeof arguments[s]=="string"?t+='"'+arguments[s]+'"':t+=arguments[s],t+=r.raw[s];return n._treeToMap(n._damonToTree(t))}damonToMap(r){let n=this,t=n._damonToTree(r);return t===!0||t===!1||t===null||typeof t=="string"||typeof t=="number"?t:n._treeToMap(n._damonToTree(r))}damonToJSON(r){let n=this;return n.mapToJSON(n.damonToMap(r))}jsonToDamon(r){let n=this;return n.mapToDamon(n.jsonToMap(r),!1)}jsonToMap(r){var t=this._getLines(r,"JSON");if(t=t.filter(e=>!/^ *\/\//.test(e)),t=t.filter(e=>e!=""),t=t.filter(e=>!/^[ \t]+$/.test(e)),t.length==1){if(["true","false","null"].indexOf(t[0].trim())>-1)return JSON.parse(t[0]);if(/^".*"$/.test(t[0].trim()))try{return JSON.parse(t[0].trim())}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="string",e}else if(isFinite(t[0])&&!isNaN(parseFloat(t[0]))&&Number.isFinite(t[0]*1)&&!Number.isNaN(t[0]*1)){if(t[0].indexOf(0)==0&&t[0].length>1&&t[0].indexOf(".")!==1){let e=new Error("Error line number 1: leading 0");throw e.line=1,e.language="DAMON",e}try{return JSON.parse(t[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="number",e}}else if(t[0]*1===1/0)try{JSON.parse(t[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="infinity",e}else return Se(r)}else return Se(r)}_getLines(r,n="DAMON"){if(["DAMON","JSON"].indexOf(n)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(r===""){let s=new Error("Error line 1: empty string");throw s.line=1,s.language=n,s}if(/[\s]/.test(r)&&r.match(new RegExp(/[\s]/))[0].length==r.length){let s=new Error("Error line 1: string only contains whitespace");throw s.line=1,s.language=n,s}var t=/\r\n/.test(r)?`\r
`:`
`,e=r.split(t);if(/\\*\n/.test(r)&&t==`
`){if(/[^\\]\\(\\\\)*\n/.test(r)){let o=r.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,f=new Error("Error line "+o+": oddly escaped newline");throw f.line=o,f.language=n,f}e=r.split("").reverse().join("").split(/\n/).map(o=>o.split("").reverse().join("")).reverse()}return e}_damonToTree(r){let n=this,t=n._getLines(r),e=t.slice(0);if(t=t.filter(c=>!/^ *\/\//.test(c)),t=t.filter(c=>c!=""),t=t.filter(c=>!/^[ \t]+$/.test(c)),t.length==1){if(["true","false","null"].indexOf(t[0].trim())>-1)return JSON.parse(t[0]);if(/^".*"$/.test(t[0].trim()))try{return JSON.parse(t[0].trim())}catch(c){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),c.line=1,c.language="JSON",c.type="string",c}else if(isFinite(t[0])&&!isNaN(parseFloat(t[0]))&&Number.isFinite(t[0]*1)&&!Number.isNaN(t[0]*1)){if(t[0].indexOf(0)==0&&t[0].length>1&&t[0].indexOf(".")!==1){let c=new Error("Error line number 1: leading 0");throw c.line=1,c.language="DAMON",c}try{return JSON.parse(t[0]*1)}catch(c){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),c.line=1,c.language="JSON",c.type="number",c}}else if(t[0]*1===1/0)try{JSON.parse(t[0]*1)}catch(c){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),c.line=1,c.language="JSON",c.type="infinity",c}}let s=0,a=[];for(let c=0,y=e.length;c<y;c++)t.slice(s).indexOf(e[c])>-1?a[c]=t.slice(s).indexOf(e[c]):a[c]=null;let o=new RegExp("^(\\t)+");for(let c=0,y=t.length;c<y;c++){if(o.test(t[c])){let d=t[c].match(o)[0].length;for(let E=0,_=d;E<_;E++)t[c]=t[c].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(t[c])&&/[ \t]+$/.test(t[c])){let d=new Error("Error line "+(a.indexOf(c)+1)+": trailing whitespace");throw d.line=a.indexOf(c)+1,d.language="DAMON",d}}let f=new RegExp("^("+" ".repeat(n.indentation)+")+");if(f.test(t[0])){let c=t[0].match(f)[0].length,y=!0;for(let d=0,E=t.length;d<E;d++)f.test(t[d])&&t[d].match(f)[0].length>=c?t[d]=t[d].slice(c):y=!1;if(!y){let d=new Error("Error line 1: bad formatting");throw d.line=1,d.language="DAMON",d}}else if(f.test(t[1])&&t[1].match(f)[0].length>n.indentation){let c=t[1].match(f)[0].length-n.indentation,y=!0;for(let d=1,E=t.length;d<E;d++)f.test(t[d])&&t[d].match(f)[0].length>=c?t[d]=t[d].slice(c):y=!1;if(!y){let d=new Error("Error line 2: bad formatting");throw d.line=2,d.language="DAMON",d}}let h=!1;if(t.length>1)for(let c=0,y=t.length;c<y;c++)c!==0&&/^- /.test(t[c])&&(h=!0);if(!/^- \{\}$/.test(t[0])&&!/^- \[\]$/.test(t[0])&&(h=!0),h){for(let c=0,y=t.length;c<y;c++)t[c]=" ".repeat(n.indentation)+t[c];t.unshift("- {}")}var N={content:t[0],level:0,id:0,children:[],headless:h,damonOriginalLinesMapping:a},u=N;if(!/^- /.test(t[0].trimStart())||/^ +/.test(t[0])&&(t[0].match(/^ +/)[0].length%n.indentation!=0||t[0].match(/^ +/)[0].length!=n.indentation)){let c=new Error("Error line "+(h*1+1)+": bad formatting");throw c.line=h*1+1,c.language="DAMON",c}t.shift();for(let c=0,y=t.length;c<y;c++){if(!/^- /.test(t[c].trimStart())||/^ +/.test(t[c])&&(t[c].match(/^ +/)[0].length%n.indentation!=0||c==0&&t[c].match(/^ +/)[0].length!=n.indentation||c!=0&&/^- /.test(t[c-1])&&t[c].match(/^ +/)[0].length!=n.indentation||c!=0&&!/^- /.test(t[c-1])&&t[c].match(/^ +/)[0].length>t[c-1].match(/^ +/)[0].length+n.indentation)){let E=new Error("Error line "+(a.indexOf(c)+1)+": bad formatting");throw E.line=a.indexOf(c)+1,E.language="DAMON",E}let d={content:t[c].trimStart().slice(2),level:1+t[c].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(u===N)d.id=N.children.length+1,N.children.push(d);else if(u.level===d.level){var b=n._findListItemCommonDirectParent(u,N);b.level==0?d.id=b.children.length+1:d.id=b.id+"-"+(b.children.length+1),b.children.push(d)}else if(u.level>d.level){var g=n._findListItemCommonAncestor(u,N,d.level);g.level==0?d.id=g.children.length+1:d.id=g.id+"-"+(g.children.length+1),g.children.push(d)}else if(u.level<d.level){var m=n._findListItemCommonDirectParent(u,N);let E=m.children.indexOf(u),_=m.children[E].id,S=m.children[E].children.length+1;d.id=_+"-"+S,m.children[E].children.push(d)}u=d}return N}_findListItemCommonDirectParent(r,n){let t=this;if(n.children.indexOf(r)>-1)return n;var e;for(let s=n.children.length-1,a=0;s>=a;s--)if(e=t._findListItemCommonDirectParent(r,n.children[s]),e)return e}_findListItemCommonAncestor(r,n,t){let e=this;var s=e._findListItemCommonDirectParent(r,n);return s.level<t?s:e._findListItemCommonAncestor(s,n,t)}_treeToMap(r){let n=this;var t=0;if(r.content=="- {}"){let o=new Map;return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,r.headless&&(o.headless=!0),e(r,o)}else if(r.content=="- []"){let o=[];return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,e(r,o)}function e(o,f){if(typeof o!="object"||o==null||Array.isArray(o)){let h=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,N=new Error("Error line number "+h+": @param { {} } tree");throw N.line=h,N.language="DAMON",N}if(typeof f=="object"&&f!==null&&!Array.isArray(f)&&f instanceof Map&&f.constructor===Map)s(o,f);else if(Array.isArray(f))a(o,f);else{let h=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,N=new Error("Error line number "+h+": @param { {} | [] } jsonMap");throw N.line=h,N.language="DAMON",N}return f}function s(o,f){for(let h=0,N=o.children.length;h<N;h++)if(t++,o.children[h].content.length==0){let u="";o.children[h].children.length>0?(u="implicit map key",f.set("",new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(""),e(o.children[h],f.get(""))):(u="implicit null key",f.set("",null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(""))}else{let u=o.children[h].content,b="key";try{if(/^.*: +\[/.test(u)&&u[u.length-1]=="]")if(/: +\[ *\]$/.test(u)){let g=JSON.parse(`["${u.slice(0,-1*u.match(/: +\[ *\]$/)[0].length)}"]`)[0];f.set(g,[]),o.children[h].children.length>0&&e(o.children[h],f.get(g))}else{let g=new RegExp(/: +\[/g),m=u.slice(0,-1).split(g),c=u.match(g).concat([""]),y=m.map((S,x)=>S+c[x]),d="",E=[];for(let S=0,x=m.length;S<x;S++)try{let R;if(S==0?R=m[0]:R=y.slice(0,S).join("")+m[S],d=JSON.parse(`["${R}"]`)[0],b="list",E=JSON.parse(`[${y.slice(S+1).join("")}]`),Array.isArray(E))break}catch{if(S==x-2){let p=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,i=new Error("Error line number "+p+": invalid inline list");throw i.line=p,i.language="DAMON",i}}if(E.every(function(S){return S===!0||S===!1||S===null||typeof S=="string"?!0:!!(isFinite(S)&&!isNaN(parseFloat(S))&&Number.isFinite(S*1)&&!Number.isNaN(S*1))}))f.set(d,E),f.damonInlineArrays===void 0&&(f.damonInlineArrays=[]),f.damonInlineArrays.push(d);else{let S=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(t-1)+2,x=new Error("Error line number "+S+": no nesting in inline lists");throw x.line=S,x.language="DAMON",x}if(o.children[h].children.length>0){let S=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+3,x=new Error("Error line number "+S+": inline lists can't have children");throw x.line=S,x.language="DAMON",x}}else if(/: +\{ *\}$/.test(u)){let g=JSON.parse(`["${u.slice(0,-1*u.match(/: +\{ *\}$/)[0].length)}"]`)[0];f.set(g,new Map),e(o.children[h],f.get(g))}else{let g=!1;if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]==="true"){let m=u.match(new RegExp(/: +/g))[u.match(new RegExp(/: +/g)).length-1],c=JSON.parse(`["${u.slice(0,-1*m.length-4)}"]`)[0];f.set(c,!0)}else if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]==="false"){let m=u.match(new RegExp(/: +/g))[u.match(new RegExp(/: +/g)).length-1],c=JSON.parse(`["${u.slice(0,-1*m.length-5)}"]`)[0];f.set(c,!1)}else if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]==="null"){let m=u.match(new RegExp(/: +/g))[u.match(new RegExp(/: +/g)).length-1],c=JSON.parse(`["${u.slice(0,-1*m.length-4)}"]`)[0];f.set(c,null)}else if(/^.*: +"/.test(u)&&u[u.length-1]=='"'){let m=u.match(new RegExp(/: +"/g));if(m.length==1){let c=JSON.parse(`["${u.split(m[0])[0]}"]`)[0];b="string";let y=JSON.parse(`["${u.split(m[0]).slice(1).join("").slice(0,-1)}"]`)[0];f.set(c,y)}else if(m.length==2&&/: +"$/.test(u)){let c=JSON.parse(`["${u.split(m[0])[0]}"]`)[0];b="string";let y=JSON.parse(`["${u.split(m[0]).slice(1).join("")+": "}"]`)[0];f.set(c,y)}else{let c=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(t-1)+2,y=new Error("Error line number "+c+": unescaped double quote");throw y.line=c,y.language="DAMON",y}}else if(/^.*: /.test(u)&&isFinite(u.split(": ")[u.split(": ").length-1])&&!isNaN(parseFloat(u.split(": ")[u.split(": ").length-1]))&&Number.isFinite(u.split(": ")[u.split(": ").length-1]*1)&&!Number.isNaN(u.split(": ")[u.split(": ").length-1]*1)){let m=JSON.parse(`["${u.split(": ").slice(0,-1).join(": ")}"]`)[0];b="number";let c=u.match(new RegExp(/: +/g)),y=c[c.length-1],d=u.split(y)[u.split(y).length-1];if(d.indexOf(0)==0&&d.length>1&&d.indexOf(".")!==1){let _=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,S=new Error("Error line number "+_+": leading 0");throw S.line=_,S.language="DAMON",S}let E=JSON.parse(`[${u.split(": ")[u.split(": ").length-1]*1}]`)[0];f.set(m,E)}else if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]*1===1/0){let m=JSON.parse(`["${u.split(": ").slice(0,-1).join(": ")}"]`)[0];b="infinity";let c=JSON.parse(`[${u.split(": ")[u.split(": ").length-1]*1}]`)}else{let m=!1,c=0;if(/\[ *\]$/.test(u)&&(m=!0,c=u.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(u)&&(m=!0,c=u.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(u)&&(m=!0,c=4),/false$/.test(u)&&(m=!0,c=5),/null$/.test(u)&&(m=!0,c=4),/".*"$/.test(u)&&(m=!0,c=u.match(new RegExp(/".*"$/g))[0].length),!m){let y="";for(let d=u.length-1;d>-1&&(y=u[d].concat(y),isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1));d--){if(!/[ \t]/.test(u[d]))break;m=!0,c=y.length}}if(m)if(JSON.parse(`["${u.slice(0,-1*c)}"]`)[0],n.pedantic){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t),d=new Error("Error line number "+y+": missing separator");throw d.line=y,d.language="DAMON",d.errorType="pedantic",d}else if(g=!0,o.children[h].children.length>0){b="implicit map key";let y=JSON.parse(`["${u}"]`)[0];f.set(y,new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(y),e(o.children[h],f.get(y))}else{b="implicit null key";let y=JSON.parse(`["${u}"]`)[0];f.set(y,null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(y)}else{let y=JSON.parse(`["${u.slice(0,-1*c)}"]`)[0];if(n.pedantic)if(/: +$/.test(y)){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t),E=new Error("Error line number "+d+": bad value");throw E.line=d,E.language="DAMON",E.errorType="pedantic",E}else{let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t),E=new Error("Error line number "+d+": missing separator");throw E.line=d,E.language="DAMON",E.errorType="pedantic",E}else if(g=!0,o.children[h].children.length>0){b="implicit map key";let d=JSON.parse(`["${u}"]`)[0];f.set(d,new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(d),e(o.children[h],f.get(d))}else{b="implicit null key";let d=JSON.parse(`["${u}"]`)[0];f.set(d,null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(d)}}}if(!g&&o.children[h].children.length>0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+3,c=new Error("Error line number "+m+": missing container or excess indentation");throw c.line=m,c.language="DAMON",c}}}catch(g){if(g.language===void 0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;console.error("Error line number "+m+": not JSON-compliant, detailed error follows"),g.line=m,g.language="JSON",g.type=b}throw g}}}function a(o,f){for(let h=0,N=o.children.length;h<N;h++)if(t++,o.children[h].content.length){let u=o.children[h].content;if(/^[ \t]*\[/.test(u)&&u[u.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(u))f.push([]),e(o.children[h],f[f.length-1]);else{let b;try{b=JSON.parse(u)}catch{let c=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,y=new Error("Error line number "+c+": invalid inline lists");throw y.line=c,y.language="JSON",y.type="list",y}if(b.every(function(m){return m===!0||m===!1||m===null||typeof m=="string"?!0:!!(isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1))}))f.push(b),f.damonInlineArrays===void 0&&(f.damonInlineArrays=[]),f.damonInlineArrays.push(h);else{let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,c=new Error("Error line number "+m+": no nesting in inline lists");throw c.line=m,c.language="DAMON",c}if(o.children[h].children.length>0){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+3,c=new Error("Error line number "+m+": inline lists can't have children");throw c.line=m,c.language="DAMON",c}}else if(/^[ \t]*\{\}$/.test(u))f.push(new Map),e(o.children[h],f[f.length-1]);else if(/^[ \t]*true$/.test(u))f.push(!0);else if(/^[ \t]*false$/.test(u))f.push(!1);else if(/^[ \t]*null$/.test(u))f.push(null);else if(/^[ \t]*".*"$/.test(u))try{f.push(JSON.parse(`[${u.trimStart()}]`)[0])}catch(b){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;throw console.error("Error line number "+g+": not JSON-compliant, detailed error follows"),b.line=g,b.language="JSON",b.type="string",b}else if(isFinite(u)&&!isNaN(parseFloat(u))&&Number.isFinite(u*1)&&!Number.isNaN(u*1)){if(u.indexOf(0)==0&&u.length>1&&u.indexOf(".")!==1){let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,g=new Error("Error line number "+b+": leading 0");throw g.line=b,g.language="DAMON",g}try{f.push(JSON.parse(`[${u*1}]`)[0])}catch(b){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;throw console.error("Error line number "+g+": not JSON-compliant, detailed error follows"),b.line=g,b.language="JSON",b.type="number",b}}else if(u*1===1/0)try{JSON.parse(u*1)}catch(b){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2;throw console.error("Error line number "+g+": not JSON-compliant, detailed error follows"),b.line=g,b.language="JSON",b.type="infinity",b}else{let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,g=new Error("Error line number "+b+": list items can't have a key");throw g.line=b,g.language="DAMON",g}}else{let u=r.headless*-1+r.damonOriginalLinesMapping.indexOf(t-1)+2,b=new Error("Error line number "+u+": empty list node");throw b.line=u,b.language="DAMON",b}}}mapToDamon(r,n){let t=this;var e="";if(Array.isArray(r))e+=`- []
`;else if(typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map)e+=`- {}
`;else return typeof r=="string"&&(r='"'+r+'"'),JSON.parse(r),r;return s(r),t.damonToMap(e.slice(0,-1)),e.slice(0,-1);function s(a,o=1){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map){let N=Array.from(a.keys()),u=!1;a.implicitNulls!==void 0&&a.implicitNulls.length===N.length&&(u=!0);for(let[b,g]of a)if(typeof g=="object"&&g!==null)if(Array.isArray(g)){let m=0,c=g.filter(function(y){return y===!0||y===!1?!0:y===null?(m++,!0):typeof y=="string"?!0:!!(isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1))});if(g.length==c.length&&o*4+2+g.join(", ").length+m*4<=80||n&&a.damonInlineArrays!==void 0&&a.damonInlineArrays.indexOf(b)>-1){let y="["+g.map(function(d){return typeof d=="string"&&(d=JSON.stringify(d)),d}).join(", ")+"]";e+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+": "+y+`
`}else e+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+`: []
`,s(g,o+1)}else e+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+`: {}
`,s(g,o+1);else u?e+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+`
`:(e+="    ".repeat(o)+"- "+JSON.stringify(b).slice(1,-1)+": ",g===!0?e+=`true
`:g===!1?e+=`false
`:g===null?e+=`null
`:Number.isFinite(g)&&!Number.isNaN(g)?e+=g+`
`:e+=JSON.stringify(g)+`
`)}else if(Array.isArray(a))for(var f=0,h=a.length;f<h;f++)if(typeof a[f]=="object"&&a[f]!==null)if(Array.isArray(a[f])){let N=0,u=a[f].filter(function(b){return b===!0||b===!1?!0:b===null?(N++,!0):typeof b=="string"?!0:!!(isFinite(b)&&!isNaN(parseFloat(b))&&Number.isFinite(b*1)&&!Number.isNaN(b*1))});if(a[f].length==u.length&&o*4+2+a[f].join(", ").length+N*4<=80||n&&a.damonInlineArrays!==void 0&&a.damonInlineArrays.indexOf(f)>-1){let b="["+a[f].map(function(g){return typeof g=="string"&&(g=JSON.stringify(g)),g}).join(", ")+"]";e+="    ".repeat(o)+"- "+b+`
`}else e+="    ".repeat(o)+`- []
`,s(a[f],o+1)}else e+="    ".repeat(o)+`- {}
`,s(a[f],o+1);else a[f]===!0?e+="    ".repeat(o)+`- true
`:a[f]===!1?e+="    ".repeat(o)+`- false
`:a[f]===null?e+="    ".repeat(o)+`- null
`:Number.isFinite(a[f])&&!Number.isNaN(a[f])?e+="    ".repeat(o)+"- "+a[f]+`
`:e+="    ".repeat(o)+"- "+JSON.stringify(a[f])+`
`}}mapToJSON(r){let n=this;var t="";if(Array.isArray(r))return t+=`[\r
`,e(r),t+="]",JSON.parse(t),t;return typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map?(t+=`{\r
`,e(r),t+="}",JSON.parse(t),t):(typeof r=="string"&&(r=JSON.stringify(r)),JSON.parse(r),r);function e(s,a=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[h,N]of s)typeof N=="object"&&N!==null?Array.isArray(N)?N.length>0?(t+="    ".repeat(a)+`${JSON.stringify(h)}: [\r
`,e(N,a+1),t+="    ".repeat(a)+"]"):t+="    ".repeat(a)+`${JSON.stringify(h)}: []`:Array.from(N.keys()).length>0?(t+="    ".repeat(a)+`${JSON.stringify(h)}: {\r
`,e(N,a+1),t+="    ".repeat(a)+"}"):t+="    ".repeat(a)+`${JSON.stringify(h)}: {}`:N===!0?t+="    ".repeat(a)+`${JSON.stringify(h)}: true`:N===!1?t+="    ".repeat(a)+`${JSON.stringify(h)}: false`:N===null?t+="    ".repeat(a)+`${JSON.stringify(h)}: null`:Number.isFinite(N)&&!Number.isNaN(N)?t+="    ".repeat(a)+`${JSON.stringify(h)}: `+N:t+="    ".repeat(a)+`${JSON.stringify(h)}: `+JSON.stringify(N),h!=Array.from(s.keys())[Array.from(s.keys()).length-1]?t+=`,\r
`:t+=`\r
`;else if(Array.isArray(s))for(var o=0,f=s.length;o<f;o++)typeof s[o]=="object"&&s[o]!==null?Array.isArray(s[o])?s[o].length>0?(t+="    ".repeat(a)+`[\r
`,e(s[o],a+1),t+="    ".repeat(a)+"]"):t+="    ".repeat(a)+"[]":Array.from(s[o].keys()).length>0?(t+="    ".repeat(a)+`{\r
`,e(s[o],a+1),t+="    ".repeat(a)+"}"):t+="    ".repeat(a)+"{}":s[o]===!0?t+="    ".repeat(a)+"true":s[o]===!1?t+="    ".repeat(a)+"false":s[o]===null?t+="    ".repeat(a)+"null":Number.isFinite(s[o])&&!Number.isNaN(s[o])?t+="    ".repeat(a)+s[o]:t+="    ".repeat(a)+JSON.stringify(s[o]),o!=f-1?t+=`,\r
`:t+=`\r
`}}getPathsList(r){let t=this.damonToMap(r),e=[];return s(t),e;function s(a,o=[]){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map)for(let[f,h]of a)typeof h=="object"&&h!==null&&!Array.isArray(h)&&h instanceof Map&&h.constructor===Map&&Array.from(h.keys()).length?(e.push(o.concat(f)),s(h,o.concat([f]))):Array.isArray(h)&&(a.damonInlineArrays==null||a.damonInlineArrays.indexOf(f)===-1)&&h.length?(e.push(o.concat(f)),s(h,o.concat([f]))):e.push(o.concat(f).concat(h));else for(let f=0,h=a.length;f<h;f++)typeof a[f]=="object"&&a[f]!==null&&!Array.isArray(a[f])&&a[f]instanceof Map&&a[f].constructor===Map&&Array.from(a[f].keys()).length?(e.push(o.concat(f)),s(a[f],o.concat([f]))):Array.isArray(a[f])&&(a.damonInlineArrays==null||a.damonInlineArrays.indexOf(f)===-1)&&a[f].length?(e.push(o.concat(f)),s(a[f],o.concat([f]))):e.push(o.concat(a[f]))}}getRangeFromPath(r,n){let t=this,e=t.damonToMap(r),s=-1,a=!1;b(e,n),e.headless&&(s-=1);let o=0,f=0;for(let g=0,m=e.damonOriginalLinesMapping.length;g<m;g++)if(e.damonOriginalLinesMapping[g]!==null&&f++,f==s){o=g+1;break}let h=t._getLines(r)[o],N=0,u=h.length;if(n.length==1)typeof n[n.length-1]=="string"?N=h.length-h.trimStart().slice(2+n[n.length-1].length+2).trimStart().length:N=h.length-h.trimStart().slice(2).length;else if(typeof n[n.length-2]=="string")if(typeof n[n.length-1]=="string")N=h.length-h.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(h[h.length-1]=="]"&&!/\[ *\]$/.test(h)){let g=h.trimStart().slice(2+n[n.length-2].length+2),m=JSON.parse(g),c=m.slice(0,n[n.length-1].length).reduce((E,_)=>E+(_===m[n[n.length-1]]),0),y=0,d=m[n[n.length-1]];typeof d=="string"&&(d='"'+d+'"');for(let E=0,_=c+1;E<_;E++)y=g.indexOf(d,y);N=h.length-g.length+y,u=N+d.length}else N=h.length-h.trimStart().slice(2).length;else if(typeof n[n.length-1]=="string")N=h.length-h.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(h[h.length-1]=="]"&&!/\[ *\]$/.test(h)){let g=h.trimStart().slice(2),m=JSON.parse(g),c=m.slice(0,n[n.length-1]).reduce((E,_)=>E+(_===m[n[n.length-1]]),0),y=0,d=m[n[n.length-1]];typeof d=="string"&&(d='"'+d+'"');for(let E=0,_=c+1;E<_;E++)y=g.indexOf(d,y);N=h.length-g.length+y,u=N+d.length}else N=h.length-h.trimStart().slice(2).length;return[[o,N],[o,u]];function b(g,m,c=[]){if(s+=1,typeof g=="object"&&g!==null&&!Array.isArray(g)&&g instanceof Map&&g.constructor===Map)for(let[y,d]of g){if(a==!0)return;if(s+=1,JSON.stringify(m)===JSON.stringify(c.concat([y]))){a=!0;return}if(typeof d=="object"&&d!==null&&!Array.isArray(d)&&d instanceof Map&&d.constructor===Map&&Array.from(d.keys()).length)s-=1,b(d,m,c.concat([y]));else if(Array.isArray(d)&&d.length){if(g.damonInlineArrays==null||g.damonInlineArrays.indexOf(y)===-1)s-=1,b(d,m,c.concat([y]));else if(JSON.stringify(m.slice(0,-1))===JSON.stringify(c.concat([y]))){a=!0;return}}}else for(let y=0,d=g.length;y<d;y++){if(a==!0)return;if(s+=1,JSON.stringify(m)===JSON.stringify(c.concat([y]))){a=!0;return}if(typeof g[y]=="object"&&g[y]!==null&&!Array.isArray(g[y])&&g[y]instanceof Map&&g[y].constructor===Map&&Array.from(g[y].keys()).length)s-=1,b(g[y],m,c.concat([y]));else if(Array.isArray(g[y])&&g[y].length){if(g.damonInlineArrays==null||g.damonInlineArrays.indexOf(y)===-1)s-=1,b(g[y],m,c.concat([y]));else if(JSON.stringify(m.slice(0,-1))===JSON.stringify(c.concat([y]))){a=!0;return}}}}}getTokenFromCoordinates(r,n){let t=this,e={},s=t._getLines(r).slice(0,n[0]);if(s[n[0]-1]=="")return e.type="newline",e.path=null,e.range=[n,n],e;if(/^[ \t]+$/.test(s[n[0]-1]))return e.type="indentation",e.path=null,e.range=[[n[0],1],[n[0],s[s.length-1].length]],e;if(/^[ \t]+/.test(s[n[0]-1].slice(0,n[1]-1))&&(e.type="indentation",e.range=[[n[0],1],[n[0],s[n[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(s[n[0]-1]))return e.type=="indentation"?(e.path=null,e):(e.type="comment",e.path=null,e.range=[[[n[0],s[n[0]-1].split("//")[0].length]],[[n[0],s[n[0]-1].length]]],e);if(s.length==1)try{let N=JSON.parse(r);if(N===!0||N===!1||N===null||typeof N=="string"||typeof N=="number"){let u=r.match(/^ */)[0].length,b=r.match(/ *$/)[0].length;return e.type="null",typeof N!="object"&&(e.type=typeof N),e.path=null,e.range=[[0,u],[0,r.length-b]],e}}catch{}let a=t.damonToMap(s.join(`
`)),o=Array.from(a.keys()),f=[];for(;o.length;){let N=o[o.length-1];if(f.push(N),typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map?a=a.get(N):Array.isArray(a)&&(a=a[N]),a===!0||a===!1||a===null||typeof a=="string"||typeof a=="number")break;o=Array.from(a.keys())}e.path=f;let h=t.getRangeFromPath(r,f);if(typeof f[f.length-1]=="string")if(n[1]<h[0][1]){let N=s[n[0]-1].slice(0,-1*(h[1][1]-h[0][1])-1).length;if(n[1]<N){let u=s[n[0]-1].match(/^[ \t]+/)[0].length+3;n[1]>=u?(e.type="property",e.range=[[n[0],u],[n[0],N]]):(e.type="hyphen",e.range=[[n[0],u-2],[n[0],u-1]])}else e.type="separator",e.range=[[n[0],N+1],[n[0],h[0][1]-1]]}else e.type="?",e.range=h;else if(n[1]<h[0][1]){e.type="hyphen";let N=s[n[0]-1].match(/^[ \t]+/)[0].length+1;e.range=[[n[0],N],[n[0],N+1]]}else e.type="?",e.range=h;return e}}});(function(){window.Damon=Ae()})();})();
