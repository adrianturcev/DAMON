(()=>{var B=Object.defineProperty;var ve=Object.getOwnPropertyDescriptor;var Je=Object.getOwnPropertyNames;var Re=Object.prototype.hasOwnProperty;var $e=(l=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(l,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):l)(function(l){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+l+'" is not supported')});var Le=(l,r)=>()=>(l&&(r=l(l=0)),r);var P=(l,r)=>()=>(r||l((r={exports:{}}).exports,r),r.exports),Ce=(l,r)=>{for(var t in r)B(l,t,{get:r[t],enumerable:!0})},Ie=(l,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of Je(r))!Re.call(l,e)&&e!==t&&B(l,e,{get:()=>r[e],enumerable:!(n=ve(r,e))||n.enumerable});return l};var De=l=>Ie(B({},"__esModule",{value:!0}),l);var Ne={};Ce(Ne,{__addDisposableResource:()=>de,__assign:()=>D,__asyncDelegator:()=>ae,__asyncGenerator:()=>oe,__asyncValues:()=>fe,__await:()=>C,__awaiter:()=>te,__classPrivateFieldGet:()=>ge,__classPrivateFieldIn:()=>ye,__classPrivateFieldSet:()=>pe,__createBinding:()=>T,__decorate:()=>X,__disposeResources:()=>me,__esDecorate:()=>W,__exportStar:()=>ne,__extends:()=>M,__generator:()=>re,__importDefault:()=>he,__importStar:()=>ce,__makeTemplateObject:()=>ue,__metadata:()=>ee,__param:()=>Q,__propKey:()=>Z,__read:()=>V,__rest:()=>H,__rewriteRelativeImportExtension:()=>Oe,__runInitializers:()=>z,__setFunctionName:()=>j,__spread:()=>ie,__spreadArray:()=>se,__spreadArrays:()=>le,__values:()=>k,default:()=>Fe});function M(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");U(l,r);function t(){this.constructor=l}l.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}function H(l,r){var t={};for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&r.indexOf(n)<0&&(t[n]=l[n]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(l);e<n.length;e++)r.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(l,n[e])&&(t[n[e]]=l[n[e]]);return t}function X(l,r,t,n){var e=arguments.length,s=e<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(l,r,t,n);else for(var c=l.length-1;c>=0;c--)(o=l[c])&&(s=(e<3?o(s):e>3?o(r,t,s):o(r,t))||s);return e>3&&s&&Object.defineProperty(r,t,s),s}function Q(l,r){return function(t,n){r(t,n,l)}}function W(l,r,t,n,e,s){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var c=n.kind,h=c==="getter"?"get":c==="setter"?"set":"value",f=!r&&l?n.static?l:l.prototype:null,y=r||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),w,u=!1,g=t.length-1;g>=0;g--){var O={};for(var d in n)O[d]=d==="access"?{}:n[d];for(var d in n.access)O.access[d]=n.access[d];O.addInitializer=function(b){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(b||null))};var a=(0,t[g])(c==="accessor"?{get:y.get,set:y.set}:y[h],O);if(c==="accessor"){if(a===void 0)continue;if(a===null||typeof a!="object")throw new TypeError("Object expected");(w=o(a.get))&&(y.get=w),(w=o(a.set))&&(y.set=w),(w=o(a.init))&&e.unshift(w)}else(w=o(a))&&(c==="field"?e.unshift(w):y[h]=w)}f&&Object.defineProperty(f,n.name,y),u=!0}function z(l,r,t){for(var n=arguments.length>2,e=0;e<r.length;e++)t=n?r[e].call(l,t):r[e].call(l);return n?t:void 0}function Z(l){return typeof l=="symbol"?l:"".concat(l)}function j(l,r,t){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:t?"".concat(t," ",r):r})}function ee(l,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,r)}function te(l,r,t,n){function e(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(y){try{f(n.next(y))}catch(w){o(w)}}function h(y){try{f(n.throw(y))}catch(w){o(w)}}function f(y){y.done?s(y.value):e(y.value).then(c,h)}f((n=n.apply(l,r||[])).next())})}function re(l,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,e,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(f){return function(y){return h([f,y])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(n=1,e&&(s=f[0]&2?e.return:f[0]?e.throw||((s=e.return)&&s.call(e),0):e.next)&&!(s=s.call(e,f[1])).done)return s;switch(e=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,e=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=r.call(l,t)}catch(y){f=[6,y],e=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function ne(l,r){for(var t in l)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&T(r,l,t)}function k(l){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&l[r],n=0;if(t)return t.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&n>=l.length&&(l=void 0),{value:l&&l[n++],done:!l}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(l,r){var t=typeof Symbol=="function"&&l[Symbol.iterator];if(!t)return l;var n=t.call(l),e,s=[],o;try{for(;(r===void 0||r-- >0)&&!(e=n.next()).done;)s.push(e.value)}catch(c){o={error:c}}finally{try{e&&!e.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function ie(){for(var l=[],r=0;r<arguments.length;r++)l=l.concat(V(arguments[r]));return l}function le(){for(var l=0,r=0,t=arguments.length;r<t;r++)l+=arguments[r].length;for(var n=Array(l),e=0,r=0;r<t;r++)for(var s=arguments[r],o=0,c=s.length;o<c;o++,e++)n[e]=s[o];return n}function se(l,r,t){if(t||arguments.length===2)for(var n=0,e=r.length,s;n<e;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return l.concat(s||Array.prototype.slice.call(r))}function C(l){return this instanceof C?(this.v=l,this):new C(l)}function oe(l,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(l,r||[]),e,s=[];return e=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),e[Symbol.asyncIterator]=function(){return this},e;function o(g){return function(O){return Promise.resolve(O).then(g,w)}}function c(g,O){n[g]&&(e[g]=function(d){return new Promise(function(a,b){s.push([g,d,a,b])>1||h(g,d)})},O&&(e[g]=O(e[g])))}function h(g,O){try{f(n[g](O))}catch(d){u(s[0][3],d)}}function f(g){g.value instanceof C?Promise.resolve(g.value.v).then(y,w):u(s[0][2],g)}function y(g){h("next",g)}function w(g){h("throw",g)}function u(g,O){g(O),s.shift(),s.length&&h(s[0][0],s[0][1])}}function ae(l){var r,t;return r={},n("next"),n("throw",function(e){throw e}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(e,s){r[e]=l[e]?function(o){return(t=!t)?{value:C(l[e](o)),done:!1}:s?s(o):o}:s}}function fe(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=l[Symbol.asyncIterator],t;return r?r.call(l):(l=typeof k=="function"?k(l):l[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=l[s]&&function(o){return new Promise(function(c,h){o=l[s](o),e(c,h,o.done,o.value)})}}function e(s,o,c,h){Promise.resolve(h).then(function(f){s({value:f,done:c})},o)}}function ue(l,r){return Object.defineProperty?Object.defineProperty(l,"raw",{value:r}):l.raw=r,l}function ce(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var t=G(l),n=0;n<t.length;n++)t[n]!=="default"&&T(r,l,t[n]);return ke(r,l),r}function he(l){return l&&l.__esModule?l:{default:l}}function ge(l,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?l!==r||!n:!r.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(l):n?n.value:r.get(l)}function pe(l,r,t,n,e){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?l!==r||!e:!r.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?e.call(l,t):e?e.value=t:r.set(l,t),t}function ye(l,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?r===l:l.has(r)}function de(l,r,t){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var n,e;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(e=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");e&&(n=function(){try{e.call(this)}catch(s){return Promise.reject(s)}}),l.stack.push({value:r,dispose:n,async:t})}else t&&l.stack.push({async:!0});return r}function me(l){function r(s){l.error=l.hasError?new Te(s,l.error,"An error was suppressed during disposal."):s,l.hasError=!0}var t,n=0;function e(){for(;t=l.stack.pop();)try{if(!t.async&&n===1)return n=0,l.stack.push(t),Promise.resolve().then(e);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(s).then(e,function(o){return r(o),e()})}else n|=1}catch(o){r(o)}if(n===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return e()}function Oe(l,r){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,e,s,o){return n?r?".jsx":".js":e&&(!s||!o)?t:e+s+"."+o.toLowerCase()+"js"}):l}var U,D,T,ke,G,Te,Fe,be=Le(()=>{U=function(l,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},U(l,r)};D=function(){return D=Object.assign||function(r){for(var t,n=1,e=arguments.length;n<e;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},D.apply(this,arguments)};T=Object.create?function(l,r,t,n){n===void 0&&(n=t);var e=Object.getOwnPropertyDescriptor(r,t);(!e||("get"in e?!r.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(l,n,e)}:function(l,r,t,n){n===void 0&&(n=t),l[n]=r[t]};ke=Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r},G=function(l){return G=Object.getOwnPropertyNames||function(r){var t=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[t.length]=n);return t},G(l)};Te=typeof SuppressedError=="function"?SuppressedError:function(l,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=l,n.suppressed=r,n};Fe={__extends:M,__assign:D,__rest:H,__decorate:X,__param:Q,__esDecorate:W,__runInitializers:z,__propKey:Z,__setFunctionName:j,__metadata:ee,__awaiter:te,__generator:re,__createBinding:T,__exportStar:ne,__values:k,__read:V,__spread:ie,__spreadArrays:le,__spreadArray:se,__await:C,__asyncGenerator:oe,__asyncDelegator:ae,__asyncValues:fe,__makeTemplateObject:ue,__importStar:ce,__importDefault:he,__classPrivateFieldGet:ge,__classPrivateFieldSet:pe,__classPrivateFieldIn:ye,__addDisposableResource:de,__disposeResources:me,__rewriteRelativeImportExtension:Oe}});var we=P(q=>{(function(l){"use strict";var r=typeof process=="object"&&process.env?process.env:self;l.parser=function(p){return new w(p)},l.CParser=w,l.CStream=g,l.createStream=u,l.MAX_BUFFER_LENGTH=64*1024,l.DEBUG=r.CDEBUG==="debug",l.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",l.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var t={textNode:void 0,numberNode:""},n=l.EVENTS.filter(function(p){return p!=="error"&&p!=="end"}),e=0,s;l.STATE={BEGIN:e++,VALUE:e++,OPEN_OBJECT:e++,CLOSE_OBJECT:e++,OPEN_ARRAY:e++,CLOSE_ARRAY:e++,TEXT_ESCAPE:e++,STRING:e++,BACKSLASH:e++,END:e++,OPEN_KEY:e++,CLOSE_KEY:e++,TRUE:e++,TRUE2:e++,TRUE3:e++,FALSE:e++,FALSE2:e++,FALSE3:e++,FALSE4:e++,NULL:e++,NULL2:e++,NULL3:e++,NUMBER_DECIMAL_POINT:e++,NUMBER_DIGIT:e++};for(var o in l.STATE)l.STATE[l.STATE[o]]=o;e=l.STATE;let c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(p){function i(){this.__proto__=p}return i.prototype=p,new i}),Object.getPrototypeOf||(Object.getPrototypeOf=function(p){return p.__proto__}),Object.keys||(Object.keys=function(p){var i=[];for(var E in p)p.hasOwnProperty(E)&&i.push(E);return i});function h(p){var i=Math.max(l.MAX_BUFFER_LENGTH,10),E=0;for(var m in t){var A=p[m]===void 0?0:p[m].length;if(A>i)switch(m){case"text":closeText(p);break;default:_(p,"Max buffer length exceeded: "+m)}E=Math.max(E,A)}p.bufferCheckPosition=l.MAX_BUFFER_LENGTH-E+p.position}function f(p){for(var i in t)p[i]=t[i]}var y=/[\\"\n]/g;function w(p){if(!(this instanceof w))return new w(p);var i=this;f(i),i.bufferCheckPosition=l.MAX_BUFFER_LENGTH,i.q=i.c=i.p="",i.opt=p||{},i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.state=e.BEGIN,i.stack=new Array,i.position=i.column=0,i.line=1,i.slashed=!1,i.unicodeI=0,i.unicodeS=null,i.depth=0,O(i,"onready")}w.prototype={end:function(){v(this)},write:x,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=$e("stream").Stream}catch{s=function(){}}function u(p){return new g(p)}function g(p){if(!(this instanceof g))return new g(p);this._parser=new w(p),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var i=this;s.apply(i),this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(E){i.emit("error",E),i._parser.error=null},n.forEach(function(E){Object.defineProperty(i,"on"+E,{get:function(){return i._parser["on"+E]},set:function(m){if(!m)return i.removeAllListeners(E),i._parser["on"+E]=m,m;i.on(E,m)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(s.prototype,{constructor:{value:g}}),g.prototype.write=function(p){p=new Buffer(p);for(var i=0;i<p.length;i++){var E=p[i];if(this.bytes_remaining>0){for(var m=0;m<this.bytes_remaining;m++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+m]=p[m];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,i=i+m-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&E>=128)if(E>=194&&E<=223&&(this.bytes_in_sequence=2),E>=224&&E<=239&&(this.bytes_in_sequence=3),E>=240&&E<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+i>p.length){for(var A=0;A<=p.length-1-i;A++)this.temp_buffs[this.bytes_in_sequence][A]=p[i+A];return this.bytes_remaining=i+this.bytes_in_sequence-p.length,!0}else{this.string=p.slice(i,i+this.bytes_in_sequence).toString(),i=i+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var R=i;R<p.length&&!(p[R]>=128);R++);this.string=p.slice(i,R).toString(),this._parser.write(this.string),this.emit("data",this.string),i=R-1}},g.prototype.end=function(p){return p&&p.length&&this._parser.write(p.toString()),this._parser.end(),!0},g.prototype.on=function(p,i){var E=this;return!E._parser["on"+p]&&n.indexOf(p)!==-1&&(E._parser["on"+p]=function(){var m=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);m.splice(0,0,p),E.emit.apply(E,m)}),s.prototype.on.call(E,p,i)},g.prototype.destroy=function(){f(this._parser),this.emit("close")};function O(p,i,E){l.INFO&&console.log("-- emit",i,E),p[i]&&p[i](E)}function d(p,i,E){a(p),O(p,i,E)}function a(p,i){p.textNode=N(p.opt,p.textNode),p.textNode!==void 0&&O(p,i||"onvalue",p.textNode),p.textNode=void 0}function b(p){p.numberNode&&O(p,"onvalue",parseFloat(p.numberNode)),p.numberNode=""}function N(p,i){return i===void 0||(p.trim&&(i=i.trim()),p.normalize&&(i=i.replace(/\s+/g," "))),i}function _(p,i){return a(p),i+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c,i=new Error(i),p.error=i,O(p,"onerror",i),p}function v(p){return(p.state!==e.VALUE||p.depth!==0)&&_(p,"Unexpected end"),a(p),p.c="",p.closed=!0,O(p,"onend"),w.call(p,p.opt),p}function S(p){return p===c.carriageReturn||p===c.lineFeed||p===c.space||p===c.tab}function x(p){var i=this;if(this.error)throw this.error;if(i.closed)return _(i,"Cannot write after close. Assign an onready handler.");if(p===null)return v(i);var E=0,m=p.charCodeAt(0),A=i.p,R=!1;for(l.DEBUG&&console.log("write -> ["+p+"]");m&&(A=m,i.c=m=p.charCodeAt(E++),A!==m?i.p=A:A=i.p,!!m);)switch(l.DEBUG&&console.log(E,m,l.STATE[i.state]),R?R=!1:(i.position++,m===c.lineFeed?(i.line++,i.column=0):i.column++),i.state){case e.BEGIN:m===c.openBrace?i.state=e.OPEN_OBJECT:m===c.openBracket?i.state=e.OPEN_ARRAY:S(m)||_(i,"Non-whitespace before {[.");continue;case e.OPEN_KEY:case e.OPEN_OBJECT:if(S(m))continue;if(i.state===e.OPEN_KEY)i.stack.push(e.CLOSE_KEY);else if(m===c.closeBrace){O(i,"onopenobject"),this.depth++,O(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||e.VALUE;continue}else i.stack.push(e.CLOSE_OBJECT);m===c.doubleQuote?i.state=e.STRING:_(i,'Malformed object key should start with "');continue;case e.CLOSE_KEY:case e.CLOSE_OBJECT:if(S(m))continue;var Ge=i.state===e.CLOSE_KEY?"key":"object";m===c.colon?(i.state===e.CLOSE_OBJECT?(i.stack.push(e.CLOSE_OBJECT),a(i,"onopenobject"),this.depth++):a(i,"onkey"),i.state=e.VALUE):m===c.closeBrace?(d(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||e.VALUE):m===c.comma?(i.state===e.CLOSE_OBJECT&&i.stack.push(e.CLOSE_OBJECT),a(i),i.state=e.OPEN_KEY):_(i,"Bad object");continue;case e.OPEN_ARRAY:case e.VALUE:if(S(m))continue;if(i.state===e.OPEN_ARRAY)if(O(i,"onopenarray"),this.depth++,i.state=e.VALUE,m===c.closeBracket){O(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||e.VALUE;continue}else i.stack.push(e.CLOSE_ARRAY);m===c.doubleQuote?i.state=e.STRING:m===c.openBrace?i.state=e.OPEN_OBJECT:m===c.openBracket?i.state=e.OPEN_ARRAY:m===c.t?i.state=e.TRUE:m===c.f?i.state=e.FALSE:m===c.n?i.state=e.NULL:m===c.minus?i.numberNode+="-":c._0<=m&&m<=c._9?(i.numberNode+=String.fromCharCode(m),i.state=e.NUMBER_DIGIT):_(i,"Bad value");continue;case e.CLOSE_ARRAY:if(m===c.comma)i.stack.push(e.CLOSE_ARRAY),a(i,"onvalue"),i.state=e.VALUE;else if(m===c.closeBracket)d(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||e.VALUE;else{if(S(m))continue;_(i,"Bad array")}continue;case e.STRING:i.textNode===void 0&&(i.textNode="");var J=E-1,$=i.slashed,L=i.unicodeI;e:for(;;){for(l.DEBUG&&console.log(E,m,l.STATE[i.state],$);L>0;)if(i.unicodeS+=String.fromCharCode(m),m=p.charCodeAt(E++),i.position++,L===4?(i.textNode+=String.fromCharCode(parseInt(i.unicodeS,16)),L=0,J=E-1):L++,!m)break e;if(m===c.doubleQuote&&!$){i.state=i.stack.pop()||e.VALUE,i.textNode+=p.substring(J,E-1),i.position+=E-1-J;break}if(m===c.backslash&&!$&&($=!0,i.textNode+=p.substring(J,E-1),i.position+=E-1-J,m=p.charCodeAt(E++),i.position++,!m))break;if($){if($=!1,m===c.n?i.textNode+=`
`:m===c.r?i.textNode+="\r":m===c.t?i.textNode+="	":m===c.f?i.textNode+="\f":m===c.b?i.textNode+="\b":m===c.u?(L=1,i.unicodeS=""):i.textNode+=String.fromCharCode(m),m=p.charCodeAt(E++),i.position++,J=E-1,m)continue;break}y.lastIndex=E;var F=y.exec(p);if(F===null){E=p.length+1,i.textNode+=p.substring(J,E-1),i.position+=E-1-J;break}if(E=F.index+1,m=p.charCodeAt(F.index),!m){i.textNode+=p.substring(J,E-1),i.position+=E-1-J;break}}i.slashed=$,i.unicodeI=L;continue;case e.TRUE:m===c.r?i.state=e.TRUE2:_(i,"Invalid true started with t"+m);continue;case e.TRUE2:m===c.u?i.state=e.TRUE3:_(i,"Invalid true started with tr"+m);continue;case e.TRUE3:m===c.e?(O(i,"onvalue",!0),i.state=i.stack.pop()||e.VALUE):_(i,"Invalid true started with tru"+m);continue;case e.FALSE:m===c.a?i.state=e.FALSE2:_(i,"Invalid false started with f"+m);continue;case e.FALSE2:m===c.l?i.state=e.FALSE3:_(i,"Invalid false started with fa"+m);continue;case e.FALSE3:m===c.s?i.state=e.FALSE4:_(i,"Invalid false started with fal"+m);continue;case e.FALSE4:m===c.e?(O(i,"onvalue",!1),i.state=i.stack.pop()||e.VALUE):_(i,"Invalid false started with fals"+m);continue;case e.NULL:m===c.u?i.state=e.NULL2:_(i,"Invalid null started with n"+m);continue;case e.NULL2:m===c.l?i.state=e.NULL3:_(i,"Invalid null started with nu"+m);continue;case e.NULL3:m===c.l?(O(i,"onvalue",null),i.state=i.stack.pop()||e.VALUE):_(i,"Invalid null started with nul"+m);continue;case e.NUMBER_DECIMAL_POINT:m===c.period?(i.numberNode+=".",i.state=e.NUMBER_DIGIT):_(i,"Leading zero not followed by .");continue;case e.NUMBER_DIGIT:c._0<=m&&m<=c._9?i.numberNode+=String.fromCharCode(m):m===c.period?(i.numberNode.indexOf(".")!==-1&&_(i,"Invalid number has two dots"),i.numberNode+="."):m===c.e||m===c.E?((i.numberNode.indexOf("e")!==-1||i.numberNode.indexOf("E")!==-1)&&_(i,"Invalid number has two exponential"),i.numberNode+="e"):m===c.plus||m===c.minus?(A===c.e||A===c.E||_(i,"Invalid symbol in number"),i.numberNode+=String.fromCharCode(m)):(b(i),E--,R=!0,i.state=i.stack.pop()||e.VALUE);continue;default:_(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&h(i),i}})(typeof q>"u"?clarinet={}:q)});var _e=P(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.stringify=I.parse=void 0;var Be=(be(),De(Ne)),Pe=Be.__importDefault(we());function Ue(l){let r=K(),t,n;function e(o){try{let c=r.next(o);c.done&&(t=c.value)}catch(c){n=c}}let s=Pe.default.parser();if(s.onopenobject=o=>e({type:"openobject",key:o}),s.onopenarray=()=>e({type:"openarray"}),s.onkey=o=>e({type:"key",key:o}),s.onvalue=o=>e({type:"value",value:o}),s.oncloseobject=()=>e({type:"closeobject"}),s.onclosearray=()=>e({type:"closearray"}),s.onerror=o=>e({type:"error",err:o}),r.next(),s.write(l).close(),n)throw n;return t}I.parse=Ue;function Y(l){return Array.isArray(l)?`[${l.map(Y).join(",")}]`:l instanceof Map?`{${[...l].map(([r,t])=>JSON.stringify(r)+":"+Y(t)).join(",")}}`:JSON.stringify(l)}I.stringify=Y;var Ee=Symbol();function*K(){let l=yield;switch(l.type){case"value":return l.value;case"openobject":let r=new Map,t=l.key;for(t===void 0&&(yield);t!==void 0;)r.set(t,yield*K()),t=(yield).key;return r;case"openarray":let n=[],e;for(;;){if(e=yield*K(),e===Ee)return n;n.push(e)}case"closearray":return Ee;case"error":throw l.err;default:throw Error(`Unexpected ParseEvent ${l.type}`)}}});var Ae=P((Me,xe)=>{var Se=_e().parse;xe.exports=class{constructor(r=!1){let t=this;if(this.indentation=4,[!0,!1,void 0].indexOf(r)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=r}template(r){let t=this;var n=r.raw[0];for(let s=1;s<r.raw.length;s++)typeof arguments[s]=="string"?n+='"'+arguments[s]+'"':n+=arguments[s],n+=r.raw[s];return t._treeToMap(t._damonToTree(n))}damonToMap(r,t=0){let n=this,e=n._damonToTree(r,t);return e===!0||e===!1||e===null||typeof e=="string"||typeof e=="number"?e:n._treeToMap(n._damonToTree(r,t),t)}damonToJSON(r){let t=this;return t.mapToJSON(t.damonToMap(r))}jsonToDamon(r){let t=this;return t.mapToDamon(t.jsonToMap(r),!1)}jsonToMap(r){var n=this._getLines(r,"JSON");if(n=n.filter(e=>!/^ *\/\//.test(e)),n=n.filter(e=>e!=""),n=n.filter(e=>!/^[ \t]+$/.test(e)),n.length==1){if(["true","false","null"].indexOf(n[0].trim())>-1)return JSON.parse(n[0]);if(/^".*"$/.test(n[0].trim()))try{return JSON.parse(n[0].trim())}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="string",e}else if(isFinite(n[0])&&!isNaN(parseFloat(n[0]))&&Number.isFinite(n[0]*1)&&!Number.isNaN(n[0]*1)){if(n[0].indexOf(0)==0&&n[0].length>1&&n[0].indexOf(".")!==1){let e=new Error("Error line number 1: leading 0");throw e.line=1,e.language="DAMON",e}try{return JSON.parse(n[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="number",e}}else if(n[0]*1===1/0)try{JSON.parse(n[0]*1)}catch(e){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),e.line=1,e.language="JSON",e.type="infinity",e}else return Se(r)}else return Se(r)}_getLines(r,t="DAMON",n=0){if(["DAMON","JSON"].indexOf(t)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(r===""){let o=new Error("Error line "+(n+1)+": empty string");throw o.line=n+1,o.language=t,o}if(/[\s]/.test(r)&&r.match(new RegExp(/[\s]/))[0].length==r.length){let o=new Error("Error line "+(n+1)+": string only contains whitespace");throw o.line=n+1,o.language=t,o}var e=/\r\n/.test(r)?`\r
`:`
`,s=r.split(e);if(e==`
`&&/\\*\n/.test(r)){if(/[^\\]\\(\\\\)*\n/.test(r)){let h=r.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,f=new Error("Error line "+(n+h)+": oddly escaped newline");throw f.line=n+h,f.language=t,f}s=r.split("").reverse().join("").split(/\n/).map(h=>h.split("").reverse().join("")).reverse()}return s}_damonToTree(r,t){let n=this,e=n._getLines(r,"DAMON",t),s=e.slice(0);if(e=e.filter(a=>!/^ *\/\//.test(a)),e=e.filter(a=>a!=""),e=e.filter(a=>!/^[ \t]+$/.test(a)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(a){throw console.error("Error line number "+(t+1)+": not JSON-compliant, detailed error follows"),a.line=t+1,a.language="JSON",a.type="string",a}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1){let a=new Error("Error line number "+(t+1)+": leading 0");throw a.line=t+1,a.language="DAMON",a}try{return JSON.parse(e[0]*1)}catch(a){throw console.error("Error line number "+(t+1)+": not JSON-compliant, detailed error follows"),a.line=t+1,a.language="JSON",a.type="number",a}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(a){throw console.error("Error line number "+(t+1)+": not JSON-compliant, detailed error follows"),a.line=t+1,a.language="JSON",a.type="infinity",a}}let o=0,c=[];for(let a=0,b=s.length;a<b;a++)e.slice(o).indexOf(s[a])>-1?c[a]=e.slice(o).indexOf(s[a]):c[a]=null;let h=new RegExp("^(\\t)+");for(let a=0,b=e.length;a<b;a++){if(h.test(e[a])){let N=e[a].match(h)[0].length;for(let _=0,v=N;_<v;_++)e[a]=e[a].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(e[a])&&/[ \t]+$/.test(e[a])){let N=new Error("Error line "+(t+c.indexOf(a)+1)+": trailing whitespace");throw N.line=t+c.indexOf(a)+1,N.language="DAMON",N}}let f=new RegExp("^("+" ".repeat(n.indentation)+")+");if(f.test(e[0])){let a=e[0].match(f)[0].length,b=!0;for(let N=0,_=e.length;N<_;N++)f.test(e[N])&&e[N].match(f)[0].length>=a?e[N]=e[N].slice(a):b=!1;if(!b){let N=new Error("Error line "+(t+1)+": bad formatting");throw N.line=t+1,N.language="DAMON",N}}else if(f.test(e[1])&&e[1].match(f)[0].length>n.indentation){let a=e[1].match(f)[0].length-n.indentation,b=!0;for(let N=1,_=e.length;N<_;N++)f.test(e[N])&&e[N].match(f)[0].length>=a?e[N]=e[N].slice(a):b=!1;if(!b){let N=new Error("Error line "+(t+2)+": bad formatting");throw N.line=t+2,N.language="DAMON",N}}let y=!1;if(e.length>1)for(let a=0,b=e.length;a<b;a++)a!==0&&/^- /.test(e[a])&&(y=!0);if(!/^- \{\}$/.test(e[0])&&!/^- \[\]$/.test(e[0])&&(y=!0),y){for(let a=0,b=e.length;a<b;a++)e[a]=" ".repeat(n.indentation)+e[a];e.unshift("- {}")}var w={content:e[0],level:0,id:0,children:[],headless:y,damonOriginalLinesMapping:c},u=w;if(!/^- /.test(e[0].trimStart())||/^ +/.test(e[0])&&(e[0].match(/^ +/)[0].length%n.indentation!=0||e[0].match(/^ +/)[0].length!=n.indentation)){let a=new Error("Error line "+(t+(y*1+1))+": bad formatting");throw a.line=t+y*1+1,a.language="DAMON",a}e.shift();for(let a=0,b=e.length;a<b;a++){if(!/^- /.test(e[a].trimStart())||/^ +/.test(e[a])&&(e[a].match(/^ +/)[0].length%n.indentation!=0||a==0&&e[a].match(/^ +/)[0].length!=n.indentation||a!=0&&/^- /.test(e[a-1])&&e[a].match(/^ +/)[0].length!=n.indentation||a!=0&&!/^- /.test(e[a-1])&&e[a].match(/^ +/)[0].length>e[a-1].match(/^ +/)[0].length+n.indentation)){let _=new Error("Error line "+(t+c.indexOf(a)+1)+": bad formatting");throw _.line=t+c.indexOf(a)+1,_.language="DAMON",_}let N={content:e[a].trimStart().slice(2),level:1+e[a].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(u===w)N.id=w.children.length+1,w.children.push(N);else if(u.level===N.level){var g=n._findListItemCommonDirectParent(u,w);g.level==0?N.id=g.children.length+1:N.id=g.id+"-"+(g.children.length+1),g.children.push(N)}else if(u.level>N.level){var O=n._findListItemCommonAncestor(u,w,N.level);O.level==0?N.id=O.children.length+1:N.id=O.id+"-"+(O.children.length+1),O.children.push(N)}else if(u.level<N.level){var d=n._findListItemCommonDirectParent(u,w);let _=d.children.indexOf(u),v=d.children[_].id,S=d.children[_].children.length+1;N.id=v+"-"+S,d.children[_].children.push(N)}u=N}return w}_findListItemCommonDirectParent(r,t){let n=this;if(t.children.indexOf(r)>-1)return t;var e;for(let s=t.children.length-1,o=0;s>=o;s--)if(e=n._findListItemCommonDirectParent(r,t.children[s]),e)return e}_findListItemCommonAncestor(r,t,n){let e=this;var s=e._findListItemCommonDirectParent(r,t);return s.level<n?s:e._findListItemCommonAncestor(s,t,n)}_treeToMap(r,t){let n=this;var e=0;if(r.content=="- {}"){let h=new Map;return h.damonOriginalLinesMapping=r.damonOriginalLinesMapping,r.headless&&(h.headless=!0),s(r,h)}else if(r.content=="- []"){let h=[];return h.damonOriginalLinesMapping=r.damonOriginalLinesMapping,s(r,h)}function s(h,f){if(typeof h!="object"||h==null||Array.isArray(h)){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,w=new Error("Error line number "+(t+y)+": @param { {} } tree");throw w.line=t+y,w.language="DAMON",w}if(typeof f=="object"&&f!==null&&!Array.isArray(f)&&f instanceof Map&&f.constructor===Map)o(h,f);else if(Array.isArray(f))c(h,f);else{let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,w=new Error("Error line number "+(t+y)+": @param { {} | [] } jsonMap");throw w.line=t+y,w.language="DAMON",w}return f}function o(h,f){for(let y=0,w=h.children.length;y<w;y++)if(e++,h.children[y].content.length==0){let u="";h.children[y].children.length>0?(u="implicit map key",f.set("",new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(""),s(h.children[y],f.get(""))):(u="implicit null key",f.set("",null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(""))}else{let u=h.children[y].content,g="key";try{if(/^.*: +\[/.test(u)&&u[u.length-1]=="]")if(/: +\[ *\]$/.test(u)){let O=JSON.parse(`["${u.slice(0,-1*u.match(/: +\[ *\]$/)[0].length)}"]`)[0];f.set(O,[]),h.children[y].children.length>0&&s(h.children[y],f.get(O))}else{let O=new RegExp(/: +\[/g),d=u.slice(0,-1).split(O),a=u.match(O).concat([""]),b=d.map((S,x)=>S+a[x]),N="",_=[];for(let S=0,x=d.length;S<x;S++)try{let p;if(S==0?p=d[0]:p=b.slice(0,S).join("")+d[S],N=JSON.parse(`["${p}"]`)[0],g="list",_=JSON.parse(`[${b.slice(S+1).join("")}]`),Array.isArray(_))break}catch{if(S==x-2){let i=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,E=new Error("Error line number "+(t+i)+": invalid inline list");throw E.line=t+i,E.language="DAMON",E}}if(_.every(function(S){return S===!0||S===!1||S===null||typeof S=="string"?!0:!!(isFinite(S)&&!isNaN(parseFloat(S))&&Number.isFinite(S*1)&&!Number.isNaN(S*1))}))f.set(N,_),f.damonInlineArrays===void 0&&(f.damonInlineArrays=[]),f.damonInlineArrays.push(N);else{let S=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(e-1)+2,x=new Error("Error line number "+(t+S)+": no nesting in inline lists");throw x.line=t+S,x.language="DAMON",x}if(h.children[y].children.length>0){let S=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,x=new Error("Error line number "+(t+S)+": inline lists can't have children");throw x.line=t+S,x.language="DAMON",x}}else if(/: +\{ *\}$/.test(u)){let O=JSON.parse(`["${u.slice(0,-1*u.match(/: +\{ *\}$/)[0].length)}"]`)[0];f.set(O,new Map),s(h.children[y],f.get(O))}else{let O=!1;if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]==="true"){let d=u.match(new RegExp(/: +/g))[u.match(new RegExp(/: +/g)).length-1],a=JSON.parse(`["${u.slice(0,-1*d.length-4)}"]`)[0];f.set(a,!0)}else if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]==="false"){let d=u.match(new RegExp(/: +/g))[u.match(new RegExp(/: +/g)).length-1],a=JSON.parse(`["${u.slice(0,-1*d.length-5)}"]`)[0];f.set(a,!1)}else if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]==="null"){let d=u.match(new RegExp(/: +/g))[u.match(new RegExp(/: +/g)).length-1],a=JSON.parse(`["${u.slice(0,-1*d.length-4)}"]`)[0];f.set(a,null)}else if(/^.*: +"/.test(u)&&u[u.length-1]=='"'){let d=u.match(new RegExp(/: +"/g));if(d.length==1){let a=JSON.parse(`["${u.split(d[0])[0]}"]`)[0];g="string";let b=JSON.parse(`["${u.split(d[0]).slice(1).join("").slice(0,-1)}"]`)[0];f.set(a,b)}else if(d.length==2&&/: +"$/.test(u)){let a=JSON.parse(`["${u.split(d[0])[0]}"]`)[0];g="string";let b=JSON.parse(`["${u.split(d[0]).slice(1).join("")+": "}"]`)[0];f.set(a,b)}else{let a=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(e-1)+2,b=new Error("Error line number "+(t+a)+": unescaped double quote");throw b.line=t+a,b.language="DAMON",b}}else if(/^.*: /.test(u)&&isFinite(u.split(": ")[u.split(": ").length-1])&&!isNaN(parseFloat(u.split(": ")[u.split(": ").length-1]))&&Number.isFinite(u.split(": ")[u.split(": ").length-1]*1)&&!Number.isNaN(u.split(": ")[u.split(": ").length-1]*1)){let d=JSON.parse(`["${u.split(": ").slice(0,-1).join(": ")}"]`)[0];g="number";let a=u.match(new RegExp(/: +/g)),b=a[a.length-1],N=u.split(b)[u.split(b).length-1];if(N.indexOf(0)==0&&N.length>1&&N.indexOf(".")!==1){let v=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,S=new Error("Error line number "+(t+v)+": leading 0");throw S.line=t+v,S.language="DAMON",S}let _=JSON.parse(`[${u.split(": ")[u.split(": ").length-1]*1}]`)[0];f.set(d,_)}else if(/^.*: /.test(u)&&u.split(new RegExp(/: +/))[u.split(new RegExp(/: +/)).length-1]*1===1/0){let d=JSON.parse(`["${u.split(": ").slice(0,-1).join(": ")}"]`)[0];g="infinity";let a=JSON.parse(`[${u.split(": ")[u.split(": ").length-1]*1}]`)}else{let d=!1,a=0;if(/\[ *\]$/.test(u)&&(d=!0,a=u.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(u)&&(d=!0,a=u.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(u)&&(d=!0,a=4),/false$/.test(u)&&(d=!0,a=5),/null$/.test(u)&&(d=!0,a=4),/".*"$/.test(u)&&(d=!0,a=u.match(new RegExp(/".*"$/g))[0].length),!d){let b="";for(let N=u.length-1;N>-1&&(b=u[N].concat(b),isFinite(b)&&!isNaN(parseFloat(b))&&Number.isFinite(b*1)&&!Number.isNaN(b*1));N--){if(!/[ \t]/.test(u[N]))break;d=!0,a=b.length}}if(d)if(JSON.parse(`["${u.slice(0,-1*a)}"]`)[0],n.pedantic){let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),N=new Error("Error line number "+(t+b)+": missing separator");throw N.line=t+b,N.language="DAMON",N.errorType="pedantic",N}else if(O=!0,h.children[y].children.length>0){g="implicit map key";let b=JSON.parse(`["${u}"]`)[0];f.set(b,new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(b),s(h.children[y],f.get(b))}else{g="implicit null key";let b=JSON.parse(`["${u}"]`)[0];f.set(b,null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(b)}else{let b=JSON.parse(`["${u.slice(0,-1*a)}"]`)[0];if(n.pedantic)if(/: +$/.test(b)){let N=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),_=new Error("Error line number "+(t+N)+": bad value");throw _.line=t+N,_.language="DAMON",_.errorType="pedantic",_}else{let N=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),_=new Error("Error line number "+(t+N)+": missing separator");throw _.line=t+N,_.language="DAMON",_.errorType="pedantic",_}else if(O=!0,h.children[y].children.length>0){g="implicit map key";let N=JSON.parse(`["${u}"]`)[0];f.set(N,new Map),f.implicitMaps===void 0&&(f.implicitMaps=[]),f.implicitMaps.push(N),s(h.children[y],f.get(N))}else{g="implicit null key";let N=JSON.parse(`["${u}"]`)[0];f.set(N,null),f.implicitNulls===void 0&&(f.implicitNulls=[]),f.implicitNulls.push(N)}}}if(!O&&h.children[y].children.length>0){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,a=new Error("Error line number "+(t+d)+": missing container or excess indentation");throw a.line=t+d,a.language="DAMON",a}}}catch(O){if(O.language===void 0){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;console.error("Error line number "+(t+d)+": not JSON-compliant, detailed error follows"),O.line=t+d,O.language="JSON",O.type=g}throw O}}}function c(h,f){for(let y=0,w=h.children.length;y<w;y++)if(e++,h.children[y].content.length){let u=h.children[y].content;if(/^[ \t]*\[/.test(u)&&u[u.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(u))f.push([]),s(h.children[y],f[f.length-1]);else{let g;try{g=JSON.parse(u)}catch{let a=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,b=new Error("Error line number "+(t+a)+": invalid inline lists");throw b.line=t+a,b.language="JSON",b.type="list",b}if(g.every(function(d){return d===!0||d===!1||d===null||typeof d=="string"?!0:!!(isFinite(d)&&!isNaN(parseFloat(d))&&Number.isFinite(d*1)&&!Number.isNaN(d*1))}))f.push(g),f.damonInlineArrays===void 0&&(f.damonInlineArrays=[]),f.damonInlineArrays.push(y);else{let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,a=new Error("Error line number "+(t+d)+": no nesting in inline lists");throw a.line=t+d,a.language="DAMON",a}if(h.children[y].children.length>0){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,a=new Error("Error line number "+(t+d)+": inline lists can't have children");throw a.line=t+d,a.language="DAMON",a}}else if(/^[ \t]*\{\}$/.test(u))f.push(new Map),s(h.children[y],f[f.length-1]);else if(/^[ \t]*true$/.test(u))f.push(!0);else if(/^[ \t]*false$/.test(u))f.push(!1);else if(/^[ \t]*null$/.test(u))f.push(null);else if(/^[ \t]*".*"$/.test(u))try{f.push(JSON.parse(`[${u.trimStart()}]`)[0])}catch(g){let O=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+(t+O)+": not JSON-compliant, detailed error follows"),g.line=t+O,g.language="JSON",g.type="string",g}else if(isFinite(u)&&!isNaN(parseFloat(u))&&Number.isFinite(u*1)&&!Number.isNaN(u*1)){if(u.indexOf(0)==0&&u.length>1&&u.indexOf(".")!==1){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,O=new Error("Error line number "+(t+g)+": leading 0");throw O.line=t+g,O.language="DAMON",O}try{f.push(JSON.parse(`[${u*1}]`)[0])}catch(g){let O=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+(t+O)+": not JSON-compliant, detailed error follows"),g.line=t+O,g.language="JSON",g.type="number",g}}else if(u*1===1/0)try{JSON.parse(u*1)}catch(g){let O=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+(t+O)+": not JSON-compliant, detailed error follows"),g.line=t+O,g.language="JSON",g.type="infinity",g}else{let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,O=new Error("Error line number "+(t+g)+": list items can't have a key");throw O.line=t+g,O.language="DAMON",O}}else{let u=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,g=new Error("Error line number "+(t+u)+": empty list node");throw g.line=t+u,g.language="DAMON",g}}}mapToDamon(r,t){let n=this;var e="";if(Array.isArray(r))e+=`- []
`;else if(typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map)e+=`- {}
`;else return typeof r=="string"&&(r='"'+r+'"'),JSON.parse(r),r;return s(r),n.damonToMap(e.slice(0,-1)),e.slice(0,-1);function s(o,c=1){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map){let y=Array.from(o.keys()),w=!1;o.implicitNulls!==void 0&&o.implicitNulls.length===y.length&&(w=!0);for(let[u,g]of o)if(typeof g=="object"&&g!==null)if(Array.isArray(g)){let O=0,d=g.filter(function(a){return a===!0||a===!1?!0:a===null?(O++,!0):typeof a=="string"?!0:!!(isFinite(a)&&!isNaN(parseFloat(a))&&Number.isFinite(a*1)&&!Number.isNaN(a*1))});if(g.length==d.length&&c*4+2+g.join(", ").length+O*4<=80||t&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(u)>-1){let a="["+g.map(function(b){return typeof b=="string"&&(b=JSON.stringify(b)),b}).join(", ")+"]";e+="    ".repeat(c)+"- "+JSON.stringify(u).slice(1,-1)+": "+a+`
`}else e+="    ".repeat(c)+"- "+JSON.stringify(u).slice(1,-1)+`: []
`,s(g,c+1)}else e+="    ".repeat(c)+"- "+JSON.stringify(u).slice(1,-1)+`: {}
`,s(g,c+1);else w?e+="    ".repeat(c)+"- "+JSON.stringify(u).slice(1,-1)+`
`:(e+="    ".repeat(c)+"- "+JSON.stringify(u).slice(1,-1)+": ",g===!0?e+=`true
`:g===!1?e+=`false
`:g===null?e+=`null
`:Number.isFinite(g)&&!Number.isNaN(g)?e+=g+`
`:e+=JSON.stringify(g)+`
`)}else if(Array.isArray(o))for(var h=0,f=o.length;h<f;h++)if(typeof o[h]=="object"&&o[h]!==null)if(Array.isArray(o[h])){let y=0,w=o[h].filter(function(u){return u===!0||u===!1?!0:u===null?(y++,!0):typeof u=="string"?!0:!!(isFinite(u)&&!isNaN(parseFloat(u))&&Number.isFinite(u*1)&&!Number.isNaN(u*1))});if(o[h].length==w.length&&c*4+2+o[h].join(", ").length+y*4<=80||t&&o.damonInlineArrays!==void 0&&o.damonInlineArrays.indexOf(h)>-1){let u="["+o[h].map(function(g){return typeof g=="string"&&(g=JSON.stringify(g)),g}).join(", ")+"]";e+="    ".repeat(c)+"- "+u+`
`}else e+="    ".repeat(c)+`- []
`,s(o[h],c+1)}else e+="    ".repeat(c)+`- {}
`,s(o[h],c+1);else o[h]===!0?e+="    ".repeat(c)+`- true
`:o[h]===!1?e+="    ".repeat(c)+`- false
`:o[h]===null?e+="    ".repeat(c)+`- null
`:Number.isFinite(o[h])&&!Number.isNaN(o[h])?e+="    ".repeat(c)+"- "+o[h]+`
`:e+="    ".repeat(c)+"- "+JSON.stringify(o[h])+`
`}}mapToJSON(r){let t=this;var n="";if(Array.isArray(r))return n+=`[\r
`,e(r),n+="]",JSON.parse(n),n;return typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map?(n+=`{\r
`,e(r),n+="}",JSON.parse(n),n):(typeof r=="string"&&(r=JSON.stringify(r)),JSON.parse(r),r);function e(s,o=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[f,y]of s)typeof y=="object"&&y!==null?Array.isArray(y)?y.length>0?(n+="    ".repeat(o)+`${JSON.stringify(f)}: [\r
`,e(y,o+1),n+="    ".repeat(o)+"]"):n+="    ".repeat(o)+`${JSON.stringify(f)}: []`:Array.from(y.keys()).length>0?(n+="    ".repeat(o)+`${JSON.stringify(f)}: {\r
`,e(y,o+1),n+="    ".repeat(o)+"}"):n+="    ".repeat(o)+`${JSON.stringify(f)}: {}`:y===!0?n+="    ".repeat(o)+`${JSON.stringify(f)}: true`:y===!1?n+="    ".repeat(o)+`${JSON.stringify(f)}: false`:y===null?n+="    ".repeat(o)+`${JSON.stringify(f)}: null`:Number.isFinite(y)&&!Number.isNaN(y)?n+="    ".repeat(o)+`${JSON.stringify(f)}: `+y:n+="    ".repeat(o)+`${JSON.stringify(f)}: `+JSON.stringify(y),f!=Array.from(s.keys())[Array.from(s.keys()).length-1]?n+=`,\r
`:n+=`\r
`;else if(Array.isArray(s))for(var c=0,h=s.length;c<h;c++)typeof s[c]=="object"&&s[c]!==null?Array.isArray(s[c])?s[c].length>0?(n+="    ".repeat(o)+`[\r
`,e(s[c],o+1),n+="    ".repeat(o)+"]"):n+="    ".repeat(o)+"[]":Array.from(s[c].keys()).length>0?(n+="    ".repeat(o)+`{\r
`,e(s[c],o+1),n+="    ".repeat(o)+"}"):n+="    ".repeat(o)+"{}":s[c]===!0?n+="    ".repeat(o)+"true":s[c]===!1?n+="    ".repeat(o)+"false":s[c]===null?n+="    ".repeat(o)+"null":Number.isFinite(s[c])&&!Number.isNaN(s[c])?n+="    ".repeat(o)+s[c]:n+="    ".repeat(o)+JSON.stringify(s[c]),c!=h-1?n+=`,\r
`:n+=`\r
`}}getPathsList(r){let n=this.damonToMap(r),e=[];return s(n),e;function s(o,c=[]){if(typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map)for(let[h,f]of o)typeof f=="object"&&f!==null&&!Array.isArray(f)&&f instanceof Map&&f.constructor===Map&&Array.from(f.keys()).length?(e.push(c.concat(h)),s(f,c.concat([h]))):Array.isArray(f)&&(o.damonInlineArrays==null||o.damonInlineArrays.indexOf(h)===-1)&&f.length?(e.push(c.concat(h)),s(f,c.concat([h]))):e.push(c.concat(h).concat(f));else for(let h=0,f=o.length;h<f;h++)typeof o[h]=="object"&&o[h]!==null&&!Array.isArray(o[h])&&o[h]instanceof Map&&o[h].constructor===Map&&Array.from(o[h].keys()).length?(e.push(c.concat(h)),s(o[h],c.concat([h]))):Array.isArray(o[h])&&(o.damonInlineArrays==null||o.damonInlineArrays.indexOf(h)===-1)&&o[h].length?(e.push(c.concat(h)),s(o[h],c.concat([h]))):e.push(c.concat(o[h]))}}getRangeFromPath(r,t){let n=this,e=n.damonToMap(r),s=-1,o=!1;w(e,t);let c=n.mapIndexToLine(e,s),h=n._getLines(r)[c],f=0,y=h.length;if(t.length==1)typeof t[t.length-1]=="string"?f=h.length-h.trimStart().slice(2+t[t.length-1].length+2).trimStart().length:f=h.length-h.trimStart().slice(2).length;else if(typeof t[t.length-2]=="string")if(typeof t[t.length-1]=="string")f=h.length-h.trimStart().slice(2+t[t.length-1].length+2).trimStart().length;else if(h[h.length-1]=="]"&&!/\[ *\]$/.test(h)){let u=h.trimStart().slice(2+t[t.length-2].length+2),g=JSON.parse(u),O=g.slice(0,t[t.length-1].length).reduce((b,N)=>b+(N===g[t[t.length-1]]),0),d=0,a=g[t[t.length-1]];typeof a=="string"&&(a='"'+a+'"');for(let b=0,N=O+1;b<N;b++)d=u.indexOf(a,d);f=h.length-u.length+d,y=f+a.length}else f=h.length-h.trimStart().slice(2).length;else if(typeof t[t.length-1]=="string")f=h.length-h.trimStart().slice(2+t[t.length-1].length+2).trimStart().length;else if(h[h.length-1]=="]"&&!/\[ *\]$/.test(h)){let u=h.trimStart().slice(2),g=JSON.parse(u),O=g.slice(0,t[t.length-1]).reduce((b,N)=>b+(N===g[t[t.length-1]]),0),d=0,a=g[t[t.length-1]];typeof a=="string"&&(a='"'+a+'"');for(let b=0,N=O+1;b<N;b++)d=u.indexOf(a,d);f=h.length-u.length+d,y=f+a.length}else f=h.length-h.trimStart().slice(2).length;return[[c,f],[c,y]];function w(u,g,O=[]){if(s+=1,typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map)for(let[d,a]of u){if(o==!0)return;if(s+=1,JSON.stringify(g)===JSON.stringify(O.concat([d]))){o=!0;return}if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map&&Array.from(a.keys()).length)s-=1,w(a,g,O.concat([d]));else if(Array.isArray(a)&&a.length){if(u.damonInlineArrays==null||u.damonInlineArrays.indexOf(d)===-1)s-=1,w(a,g,O.concat([d]));else if(JSON.stringify(g.slice(0,-1))===JSON.stringify(O.concat([d]))){o=!0;return}}}else for(let d=0,a=u.length;d<a;d++){if(o==!0)return;if(s+=1,JSON.stringify(g)===JSON.stringify(O.concat([d]))){o=!0;return}if(typeof u[d]=="object"&&u[d]!==null&&!Array.isArray(u[d])&&u[d]instanceof Map&&u[d].constructor===Map&&Array.from(u[d].keys()).length)s-=1,w(u[d],g,O.concat([d]));else if(Array.isArray(u[d])&&u[d].length){if(u.damonInlineArrays==null||u.damonInlineArrays.indexOf(d)===-1)s-=1,w(u[d],g,O.concat([d]));else if(JSON.stringify(g.slice(0,-1))===JSON.stringify(O.concat([d]))){o=!0;return}}}}}getTokenFromCoordinates(r,t){let n=this,e={},s=n._getLines(r).slice(0,t[0]);if(s[t[0]-1]=="")return e.type="newline",e.path=null,e.range=[t,t],e;if(/^[ \t]+$/.test(s[t[0]-1]))return e.type="indentation",e.path=null,e.range=[[t[0],1],[t[0],s[s.length-1].length]],e;if(/^[ \t]+/.test(s[t[0]-1].slice(0,t[1]-1))&&(e.type="indentation",e.range=[[t[0],1],[t[0],s[t[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(s[t[0]-1]))return e.type=="indentation"?(e.path=null,e):(e.type="comment",e.path=null,e.range=[[[t[0],s[t[0]-1].split("//")[0].length]],[[t[0],s[t[0]-1].length]]],e);if(s.length==1)try{let y=JSON.parse(r);if(y===!0||y===!1||y===null||typeof y=="string"||typeof y=="number"){let w=r.match(/^ */)[0].length,u=r.match(/ *$/)[0].length;return e.type="null",typeof y!="object"&&(e.type=typeof y),e.path=null,e.range=[[0,w],[0,r.length-u]],e}}catch{}let o=n.damonToMap(s.join(`
`)),c=Array.from(o.keys()),h=[];for(;c.length;){let y=c[c.length-1];if(h.push(y),typeof o=="object"&&o!==null&&!Array.isArray(o)&&o instanceof Map&&o.constructor===Map?o=o.get(y):Array.isArray(o)&&(o=o[y]),o===!0||o===!1||o===null||typeof o=="string"||typeof o=="number")break;c=Array.from(o.keys())}e.path=h;let f=n.getRangeFromPath(r,h);if(typeof h[h.length-1]=="string")if(t[1]<f[0][1]){let y=s[t[0]-1].slice(0,-1*(f[1][1]-f[0][1])-1).length;if(t[1]<y){let w=s[t[0]-1].match(/^[ \t]+/)[0].length+3;t[1]>=w?(e.type="property",e.range=[[t[0],w],[t[0],y]]):(e.type="hyphen",e.range=[[t[0],w-2],[t[0],w-1]])}else e.type="separator",e.range=[[t[0],y+1],[t[0],f[0][1]-1]]}else e.type="?",e.range=f;else if(t[1]<f[0][1]){e.type="hyphen";let y=s[t[0]-1].match(/^[ \t]+/)[0].length+1;e.range=[[t[0],y],[t[0],y+1]]}else e.type="?",e.range=f;return e}mapIndexToLine(r,t){let n=0,e=0;r.headless&&(t-=1);for(let s=0,o=r.damonOriginalLinesMapping.length;s<o;s++)if(r.damonOriginalLinesMapping[s]!==null&&e++,e==t){n=s+1;break}return n}}});(function(){window.Damon=Ae()})();})();
