(()=>{var or=Object.create;var Pe=Object.defineProperty;var fr=Object.getOwnPropertyDescriptor;var cr=Object.getOwnPropertyNames;var ur=Object.getPrototypeOf,pr=Object.prototype.hasOwnProperty;var dr=(f=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(f,{get:(n,l)=>(typeof require<"u"?require:n)[l]}):f)(function(f){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+f+'" is not supported')});var hr=(f,n)=>()=>(f&&(n=f(f=0)),n);var fe=(f,n)=>()=>(n||f((n={exports:{}}).exports,n),n.exports),mr=(f,n)=>{for(var l in n)Pe(f,l,{get:n[l],enumerable:!0})},zt=(f,n,l,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of cr(n))!pr.call(f,e)&&e!==l&&Pe(f,e,{get:()=>n[e],enumerable:!(t=fr(n,e))||t.enumerable});return f};var tt=(f,n,l)=>(l=f!=null?or(ur(f)):{},zt(n||!f||!f.__esModule?Pe(l,"default",{value:f,enumerable:!0}):l,f)),gr=f=>zt(Pe({},"__esModule",{value:!0}),f);var hn={};mr(hn,{__addDisposableResource:()=>pn,__assign:()=>ke,__asyncDelegator:()=>rn,__asyncGenerator:()=>nn,__asyncValues:()=>ln,__await:()=>ye,__awaiter:()=>Xt,__classPrivateFieldGet:()=>fn,__classPrivateFieldIn:()=>un,__classPrivateFieldSet:()=>cn,__createBinding:()=>Ue,__decorate:()=>qt,__disposeResources:()=>dn,__esDecorate:()=>yr,__exportStar:()=>Qt,__extends:()=>Wt,__generator:()=>Zt,__importDefault:()=>on,__importStar:()=>an,__makeTemplateObject:()=>sn,__metadata:()=>Kt,__param:()=>Vt,__propKey:()=>Or,__read:()=>rt,__rest:()=>Yt,__runInitializers:()=>Er,__setFunctionName:()=>Nr,__spread:()=>jt,__spreadArray:()=>tn,__spreadArrays:()=>en,__values:()=>Me,default:()=>Ar});function Wt(f,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");nt(f,n);function l(){this.constructor=f}f.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}function Yt(f,n){var l={};for(var t in f)Object.prototype.hasOwnProperty.call(f,t)&&n.indexOf(t)<0&&(l[t]=f[t]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(f);e<t.length;e++)n.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(f,t[e])&&(l[t[e]]=f[t[e]]);return l}function qt(f,n,l,t){var e=arguments.length,s=e<3?n:t===null?t=Object.getOwnPropertyDescriptor(n,l):t,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(f,n,l,t);else for(var o=f.length-1;o>=0;o--)(u=f[o])&&(s=(e<3?u(s):e>3?u(n,l,s):u(n,l))||s);return e>3&&s&&Object.defineProperty(n,l,s),s}function Vt(f,n){return function(l,t){n(l,t,f)}}function yr(f,n,l,t,e,s){function u(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=t.kind,m=o==="getter"?"get":o==="setter"?"set":"value",d=!n&&f?t.static?f:f.prototype:null,E=n||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),a,b=!1,O=l.length-1;O>=0;O--){var g={};for(var h in t)g[h]=h==="access"?{}:t[h];for(var h in t.access)g.access[h]=t.access[h];g.addInitializer=function(w){if(b)throw new TypeError("Cannot add initializers after decoration has completed");s.push(u(w||null))};var _=(0,l[O])(o==="accessor"?{get:E.get,set:E.set}:E[m],g);if(o==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(a=u(_.get))&&(E.get=a),(a=u(_.set))&&(E.set=a),(a=u(_.init))&&e.unshift(a)}else(a=u(_))&&(o==="field"?e.unshift(a):E[m]=a)}d&&Object.defineProperty(d,t.name,E),b=!0}function Er(f,n,l){for(var t=arguments.length>2,e=0;e<n.length;e++)l=t?n[e].call(f,l):n[e].call(f);return t?l:void 0}function Or(f){return typeof f=="symbol"?f:"".concat(f)}function Nr(f,n,l){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:l?"".concat(l," ",n):n})}function Kt(f,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,n)}function Xt(f,n,l,t){function e(s){return s instanceof l?s:new l(function(u){u(s)})}return new(l||(l=Promise))(function(s,u){function o(E){try{d(t.next(E))}catch(a){u(a)}}function m(E){try{d(t.throw(E))}catch(a){u(a)}}function d(E){E.done?s(E.value):e(E.value).then(o,m)}d((t=t.apply(f,n||[])).next())})}function Zt(f,n){var l={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,e,s,u;return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(d){return function(E){return m([d,E])}}function m(d){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(l=0)),l;)try{if(t=1,e&&(s=d[0]&2?e.return:d[0]?e.throw||((s=e.return)&&s.call(e),0):e.next)&&!(s=s.call(e,d[1])).done)return s;switch(e=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return l.label++,{value:d[1],done:!1};case 5:l.label++,e=d[1],d=[0];continue;case 7:d=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){l=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){l.label=d[1];break}if(d[0]===6&&l.label<s[1]){l.label=s[1],s=d;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(d);break}s[2]&&l.ops.pop(),l.trys.pop();continue}d=n.call(f,l)}catch(E){d=[6,E],e=0}finally{t=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Qt(f,n){for(var l in f)l!=="default"&&!Object.prototype.hasOwnProperty.call(n,l)&&Ue(n,f,l)}function Me(f){var n=typeof Symbol=="function"&&Symbol.iterator,l=n&&f[n],t=0;if(l)return l.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&t>=f.length&&(f=void 0),{value:f&&f[t++],done:!f}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(f,n){var l=typeof Symbol=="function"&&f[Symbol.iterator];if(!l)return f;var t=l.call(f),e,s=[],u;try{for(;(n===void 0||n-- >0)&&!(e=t.next()).done;)s.push(e.value)}catch(o){u={error:o}}finally{try{e&&!e.done&&(l=t.return)&&l.call(t)}finally{if(u)throw u.error}}return s}function jt(){for(var f=[],n=0;n<arguments.length;n++)f=f.concat(rt(arguments[n]));return f}function en(){for(var f=0,n=0,l=arguments.length;n<l;n++)f+=arguments[n].length;for(var t=Array(f),e=0,n=0;n<l;n++)for(var s=arguments[n],u=0,o=s.length;u<o;u++,e++)t[e]=s[u];return t}function tn(f,n,l){if(l||arguments.length===2)for(var t=0,e=n.length,s;t<e;t++)(s||!(t in n))&&(s||(s=Array.prototype.slice.call(n,0,t)),s[t]=n[t]);return f.concat(s||Array.prototype.slice.call(n))}function ye(f){return this instanceof ye?(this.v=f,this):new ye(f)}function nn(f,n,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=l.apply(f,n||[]),e,s=[];return e={},u("next"),u("throw"),u("return"),e[Symbol.asyncIterator]=function(){return this},e;function u(b){t[b]&&(e[b]=function(O){return new Promise(function(g,h){s.push([b,O,g,h])>1||o(b,O)})})}function o(b,O){try{m(t[b](O))}catch(g){a(s[0][3],g)}}function m(b){b.value instanceof ye?Promise.resolve(b.value.v).then(d,E):a(s[0][2],b)}function d(b){o("next",b)}function E(b){o("throw",b)}function a(b,O){b(O),s.shift(),s.length&&o(s[0][0],s[0][1])}}function rn(f){var n,l;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n;function t(e,s){n[e]=f[e]?function(u){return(l=!l)?{value:ye(f[e](u)),done:!1}:s?s(u):u}:s}}function ln(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=f[Symbol.asyncIterator],l;return n?n.call(f):(f=typeof Me=="function"?Me(f):f[Symbol.iterator](),l={},t("next"),t("throw"),t("return"),l[Symbol.asyncIterator]=function(){return this},l);function t(s){l[s]=f[s]&&function(u){return new Promise(function(o,m){u=f[s](u),e(o,m,u.done,u.value)})}}function e(s,u,o,m){Promise.resolve(m).then(function(d){s({value:d,done:o})},u)}}function sn(f,n){return Object.defineProperty?Object.defineProperty(f,"raw",{value:n}):f.raw=n,f}function an(f){if(f&&f.__esModule)return f;var n={};if(f!=null)for(var l in f)l!=="default"&&Object.prototype.hasOwnProperty.call(f,l)&&Ue(n,f,l);return _r(n,f),n}function on(f){return f&&f.__esModule?f:{default:f}}function fn(f,n,l,t){if(l==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?f!==n||!t:!n.has(f))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?t:l==="a"?t.call(f):t?t.value:n.get(f)}function cn(f,n,l,t,e){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?f!==n||!e:!n.has(f))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?e.call(f,l):e?e.value=l:n.set(f,l),l}function un(f,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof f=="function"?n===f:f.has(n)}function pn(f,n,l){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var t;if(l){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=n[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=n[Symbol.dispose]}if(typeof t!="function")throw new TypeError("Object not disposable.");f.stack.push({value:n,dispose:t,async:l})}else l&&f.stack.push({async:!0});return n}function dn(f){function n(t){f.error=f.hasError?new br(t,f.error,"An error was suppressed during disposal."):t,f.hasError=!0}function l(){for(;f.stack.length;){var t=f.stack.pop();try{var e=t.dispose&&t.dispose.call(t.value);if(t.async)return Promise.resolve(e).then(l,function(s){return n(s),l()})}catch(s){n(s)}}if(f.hasError)throw f.error}return l()}var nt,ke,Ue,_r,br,Ar,mn=hr(()=>{nt=function(f,n){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,t){l.__proto__=t}||function(l,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(l[e]=t[e])},nt(f,n)};ke=function(){return ke=Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n[s]=l[s])}return n},ke.apply(this,arguments)};Ue=Object.create?function(f,n,l,t){t===void 0&&(t=l);var e=Object.getOwnPropertyDescriptor(n,l);(!e||("get"in e?!n.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return n[l]}}),Object.defineProperty(f,t,e)}:function(f,n,l,t){t===void 0&&(t=l),f[t]=n[l]};_r=Object.create?function(f,n){Object.defineProperty(f,"default",{enumerable:!0,value:n})}:function(f,n){f.default=n};br=typeof SuppressedError=="function"?SuppressedError:function(f,n,l){var t=new Error(l);return t.name="SuppressedError",t.error=f,t.suppressed=n,t};Ar={__extends:Wt,__assign:ke,__rest:Yt,__decorate:qt,__param:Vt,__metadata:Kt,__awaiter:Xt,__generator:Zt,__createBinding:Ue,__exportStar:Qt,__values:Me,__read:rt,__spread:jt,__spreadArrays:en,__spreadArray:tn,__await:ye,__asyncGenerator:nn,__asyncDelegator:rn,__asyncValues:ln,__makeTemplateObject:sn,__importStar:an,__importDefault:on,__classPrivateFieldGet:fn,__classPrivateFieldSet:cn,__classPrivateFieldIn:un,__addDisposableResource:pn,__disposeResources:dn}});var gn=fe(it=>{(function(f){"use strict";var n=typeof process=="object"&&process.env?process.env:self;f.parser=function(y){return new a(y)},f.CParser=a,f.CStream=O,f.createStream=b,f.MAX_BUFFER_LENGTH=64*1024,f.DEBUG=n.CDEBUG==="debug",f.INFO=n.CDEBUG==="debug"||n.CDEBUG==="info",f.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var l={textNode:void 0,numberNode:""},t=f.EVENTS.filter(function(y){return y!=="error"&&y!=="end"}),e=0,s;f.STATE={BEGIN:e++,VALUE:e++,OPEN_OBJECT:e++,CLOSE_OBJECT:e++,OPEN_ARRAY:e++,CLOSE_ARRAY:e++,TEXT_ESCAPE:e++,STRING:e++,BACKSLASH:e++,END:e++,OPEN_KEY:e++,CLOSE_KEY:e++,TRUE:e++,TRUE2:e++,TRUE3:e++,FALSE:e++,FALSE2:e++,FALSE3:e++,FALSE4:e++,NULL:e++,NULL2:e++,NULL3:e++,NUMBER_DECIMAL_POINT:e++,NUMBER_DIGIT:e++};for(var u in f.STATE)f.STATE[f.STATE[u]]=u;e=f.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(y){function r(){this.__proto__=y}return r.prototype=y,new r}),Object.getPrototypeOf||(Object.getPrototypeOf=function(y){return y.__proto__}),Object.keys||(Object.keys=function(y){var r=[];for(var C in y)y.hasOwnProperty(C)&&r.push(C);return r});function m(y){var r=Math.max(f.MAX_BUFFER_LENGTH,10),C=0;for(var N in l){var F=y[N]===void 0?0:y[N].length;if(F>r)switch(N){case"text":closeText(y);break;default:T(y,"Max buffer length exceeded: "+N)}C=Math.max(C,F)}y.bufferCheckPosition=f.MAX_BUFFER_LENGTH-C+y.position}function d(y){for(var r in l)y[r]=l[r]}var E=/[\\"\n]/g;function a(y){if(!(this instanceof a))return new a(y);var r=this;d(r),r.bufferCheckPosition=f.MAX_BUFFER_LENGTH,r.q=r.c=r.p="",r.opt=y||{},r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.state=e.BEGIN,r.stack=new Array,r.position=r.column=0,r.line=1,r.slashed=!1,r.unicodeI=0,r.unicodeS=null,r.depth=0,g(r,"onready")}a.prototype={end:function(){x(this)},write:v,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=dr("stream").Stream}catch{s=function(){}}function b(y){return new O(y)}function O(y){if(!(this instanceof O))return new O(y);this._parser=new a(y),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var r=this;s.apply(r),this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(C){r.emit("error",C),r._parser.error=null},t.forEach(function(C){Object.defineProperty(r,"on"+C,{get:function(){return r._parser["on"+C]},set:function(N){if(!N)return r.removeAllListeners(C),r._parser["on"+C]=N,N;r.on(C,N)},enumerable:!0,configurable:!1})})}O.prototype=Object.create(s.prototype,{constructor:{value:O}}),O.prototype.write=function(y){y=new Buffer(y);for(var r=0;r<y.length;r++){var C=y[r];if(this.bytes_remaining>0){for(var N=0;N<this.bytes_remaining;N++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+N]=y[N];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+N-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&C>=128)if(C>=194&&C<=223&&(this.bytes_in_sequence=2),C>=224&&C<=239&&(this.bytes_in_sequence=3),C>=240&&C<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>y.length){for(var F=0;F<=y.length-1-r;F++)this.temp_buffs[this.bytes_in_sequence][F]=y[r+F];return this.bytes_remaining=r+this.bytes_in_sequence-y.length,!0}else{this.string=y.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var Q=r;Q<y.length&&!(y[Q]>=128);Q++);this.string=y.slice(r,Q).toString(),this._parser.write(this.string),this.emit("data",this.string),r=Q-1}},O.prototype.end=function(y){return y&&y.length&&this._parser.write(y.toString()),this._parser.end(),!0},O.prototype.on=function(y,r){var C=this;return!C._parser["on"+y]&&t.indexOf(y)!==-1&&(C._parser["on"+y]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,y),C.emit.apply(C,N)}),s.prototype.on.call(C,y,r)},O.prototype.destroy=function(){d(this._parser),this.emit("close")};function g(y,r,C){f.INFO&&console.log("-- emit",r,C),y[r]&&y[r](C)}function h(y,r,C){_(y),g(y,r,C)}function _(y,r){y.textNode=S(y.opt,y.textNode),y.textNode!==void 0&&g(y,r||"onvalue",y.textNode),y.textNode=void 0}function w(y){y.numberNode&&g(y,"onvalue",parseFloat(y.numberNode)),y.numberNode=""}function S(y,r){return r===void 0||(y.trim&&(r=r.trim()),y.normalize&&(r=r.replace(/\s+/g," "))),r}function T(y,r){return _(y),r+=`
Line: `+y.line+`
Column: `+y.column+`
Char: `+y.c,r=new Error(r),y.error=r,g(y,"onerror",r),y}function x(y){return(y.state!==e.VALUE||y.depth!==0)&&T(y,"Unexpected end"),_(y),y.c="",y.closed=!0,g(y,"onend"),a.call(y,y.opt),y}function I(y){return y===o.carriageReturn||y===o.lineFeed||y===o.space||y===o.tab}function v(y){var r=this;if(this.error)throw this.error;if(r.closed)return T(r,"Cannot write after close. Assign an onready handler.");if(y===null)return x(r);var C=0,N=y.charCodeAt(0),F=r.p,Q=!1;for(f.DEBUG&&console.log("write -> ["+y+"]");N&&(F=N,r.c=N=y.charCodeAt(C++),F!==N?r.p=F:F=r.p,!!N);)switch(f.DEBUG&&console.log(C,N,f.STATE[r.state]),Q?Q=!1:(r.position++,N===o.lineFeed?(r.line++,r.column=0):r.column++),r.state){case e.BEGIN:N===o.openBrace?r.state=e.OPEN_OBJECT:N===o.openBracket?r.state=e.OPEN_ARRAY:I(N)||T(r,"Non-whitespace before {[.");continue;case e.OPEN_KEY:case e.OPEN_OBJECT:if(I(N))continue;if(r.state===e.OPEN_KEY)r.stack.push(e.CLOSE_KEY);else if(N===o.closeBrace){g(r,"onopenobject"),this.depth++,g(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||e.VALUE;continue}else r.stack.push(e.CLOSE_OBJECT);N===o.doubleQuote?r.state=e.STRING:T(r,'Malformed object key should start with "');continue;case e.CLOSE_KEY:case e.CLOSE_OBJECT:if(I(N))continue;var Le=r.state===e.CLOSE_KEY?"key":"object";N===o.colon?(r.state===e.CLOSE_OBJECT?(r.stack.push(e.CLOSE_OBJECT),_(r,"onopenobject"),this.depth++):_(r,"onkey"),r.state=e.VALUE):N===o.closeBrace?(h(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||e.VALUE):N===o.comma?(r.state===e.CLOSE_OBJECT&&r.stack.push(e.CLOSE_OBJECT),_(r),r.state=e.OPEN_KEY):T(r,"Bad object");continue;case e.OPEN_ARRAY:case e.VALUE:if(I(N))continue;if(r.state===e.OPEN_ARRAY)if(g(r,"onopenarray"),this.depth++,r.state=e.VALUE,N===o.closeBracket){g(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||e.VALUE;continue}else r.stack.push(e.CLOSE_ARRAY);N===o.doubleQuote?r.state=e.STRING:N===o.openBrace?r.state=e.OPEN_OBJECT:N===o.openBracket?r.state=e.OPEN_ARRAY:N===o.t?r.state=e.TRUE:N===o.f?r.state=e.FALSE:N===o.n?r.state=e.NULL:N===o.minus?r.numberNode+="-":o._0<=N&&N<=o._9?(r.numberNode+=String.fromCharCode(N),r.state=e.NUMBER_DIGIT):T(r,"Bad value");continue;case e.CLOSE_ARRAY:if(N===o.comma)r.stack.push(e.CLOSE_ARRAY),_(r,"onvalue"),r.state=e.VALUE;else if(N===o.closeBracket)h(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||e.VALUE;else{if(I(N))continue;T(r,"Bad array")}continue;case e.STRING:r.textNode===void 0&&(r.textNode="");var K=C-1,ne=r.slashed,j=r.unicodeI;e:for(;;){for(f.DEBUG&&console.log(C,N,f.STATE[r.state],ne);j>0;)if(r.unicodeS+=String.fromCharCode(N),N=y.charCodeAt(C++),r.position++,j===4?(r.textNode+=String.fromCharCode(parseInt(r.unicodeS,16)),j=0,K=C-1):j++,!N)break e;if(N===o.doubleQuote&&!ne){r.state=r.stack.pop()||e.VALUE,r.textNode+=y.substring(K,C-1),r.position+=C-1-K;break}if(N===o.backslash&&!ne&&(ne=!0,r.textNode+=y.substring(K,C-1),r.position+=C-1-K,N=y.charCodeAt(C++),r.position++,!N))break;if(ne){if(ne=!1,N===o.n?r.textNode+=`
`:N===o.r?r.textNode+="\r":N===o.t?r.textNode+="	":N===o.f?r.textNode+="\f":N===o.b?r.textNode+="\b":N===o.u?(j=1,r.unicodeS=""):r.textNode+=String.fromCharCode(N),N=y.charCodeAt(C++),r.position++,K=C-1,N)continue;break}E.lastIndex=C;var Oe=E.exec(y);if(Oe===null){C=y.length+1,r.textNode+=y.substring(K,C-1),r.position+=C-1-K;break}if(C=Oe.index+1,N=y.charCodeAt(Oe.index),!N){r.textNode+=y.substring(K,C-1),r.position+=C-1-K;break}}r.slashed=ne,r.unicodeI=j;continue;case e.TRUE:N===o.r?r.state=e.TRUE2:T(r,"Invalid true started with t"+N);continue;case e.TRUE2:N===o.u?r.state=e.TRUE3:T(r,"Invalid true started with tr"+N);continue;case e.TRUE3:N===o.e?(g(r,"onvalue",!0),r.state=r.stack.pop()||e.VALUE):T(r,"Invalid true started with tru"+N);continue;case e.FALSE:N===o.a?r.state=e.FALSE2:T(r,"Invalid false started with f"+N);continue;case e.FALSE2:N===o.l?r.state=e.FALSE3:T(r,"Invalid false started with fa"+N);continue;case e.FALSE3:N===o.s?r.state=e.FALSE4:T(r,"Invalid false started with fal"+N);continue;case e.FALSE4:N===o.e?(g(r,"onvalue",!1),r.state=r.stack.pop()||e.VALUE):T(r,"Invalid false started with fals"+N);continue;case e.NULL:N===o.u?r.state=e.NULL2:T(r,"Invalid null started with n"+N);continue;case e.NULL2:N===o.l?r.state=e.NULL3:T(r,"Invalid null started with nu"+N);continue;case e.NULL3:N===o.l?(g(r,"onvalue",null),r.state=r.stack.pop()||e.VALUE):T(r,"Invalid null started with nul"+N);continue;case e.NUMBER_DECIMAL_POINT:N===o.period?(r.numberNode+=".",r.state=e.NUMBER_DIGIT):T(r,"Leading zero not followed by .");continue;case e.NUMBER_DIGIT:o._0<=N&&N<=o._9?r.numberNode+=String.fromCharCode(N):N===o.period?(r.numberNode.indexOf(".")!==-1&&T(r,"Invalid number has two dots"),r.numberNode+="."):N===o.e||N===o.E?((r.numberNode.indexOf("e")!==-1||r.numberNode.indexOf("E")!==-1)&&T(r,"Invalid number has two exponential"),r.numberNode+="e"):N===o.plus||N===o.minus?(F===o.e||F===o.E||T(r,"Invalid symbol in number"),r.numberNode+=String.fromCharCode(N)):(w(r),C--,Q=!0,r.state=r.stack.pop()||e.VALUE);continue;default:T(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&m(r),r}})(typeof it>"u"?clarinet={}:it)});var En=fe(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.stringify=Ee.parse=void 0;var wr=(mn(),gr(hn)),Tr=wr.__importDefault(gn());function Lr(f){let n=st(),l,t;function e(u){try{let o=n.next(u);o.done&&(l=o.value)}catch(o){t=o}}let s=Tr.default.parser();if(s.onopenobject=u=>e({type:"openobject",key:u}),s.onopenarray=()=>e({type:"openarray"}),s.onkey=u=>e({type:"key",key:u}),s.onvalue=u=>e({type:"value",value:u}),s.oncloseobject=()=>e({type:"closeobject"}),s.onclosearray=()=>e({type:"closearray"}),s.onerror=u=>e({type:"error",err:u}),n.next(),s.write(f).close(),t)throw t;return l}Ee.parse=Lr;function lt(f){return Array.isArray(f)?`[${f.map(lt).join(",")}]`:f instanceof Map?`{${[...f].map(([n,l])=>JSON.stringify(n)+":"+lt(l)).join(",")}}`:JSON.stringify(f)}Ee.stringify=lt;var yn=Symbol();function*st(){let f=yield;switch(f.type){case"value":return f.value;case"openobject":let n=new Map,l=f.key;for(l===void 0&&(yield);l!==void 0;)n.set(l,yield*st()),l=(yield).key;return n;case"openarray":let t=[],e;for(;;){if(e=yield*st(),e===yn)return t;t.push(e)}case"closearray":return yn;case"error":throw f.err;default:throw Error(`Unexpected ParseEvent ${f.type}`)}}});var On=fe((at,ot)=>{(function(f,n){typeof at=="object"&&typeof ot<"u"?ot.exports=n():typeof define=="function"&&define.amd?define(n):(f=typeof globalThis<"u"?globalThis:f||self,f.DOMPurify=n())})(at,function(){"use strict";let{entries:f,setPrototypeOf:n,isFrozen:l,getPrototypeOf:t,getOwnPropertyDescriptor:e}=Object,{freeze:s,seal:u,create:o}=Object,{apply:m,construct:d}=typeof Reflect<"u"&&Reflect;s||(s=function(D){return D}),u||(u=function(D){return D}),m||(m=function(D,M,P){return D.apply(M,P)}),d||(d=function(D,M){return new D(...M)});let E=v(Array.prototype.forEach),a=v(Array.prototype.pop),b=v(Array.prototype.push),O=v(String.prototype.toLowerCase),g=v(String.prototype.toString),h=v(String.prototype.match),_=v(String.prototype.replace),w=v(String.prototype.indexOf),S=v(String.prototype.trim),T=v(Object.prototype.hasOwnProperty),x=v(RegExp.prototype.test),I=y(TypeError);function v(k){return function(D){for(var M=arguments.length,P=new Array(M>1?M-1:0),z=1;z<M;z++)P[z-1]=arguments[z];return m(k,D,P)}}function y(k){return function(){for(var D=arguments.length,M=new Array(D),P=0;P<D;P++)M[P]=arguments[P];return d(k,M)}}function r(k,D){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O;n&&n(k,null);let P=D.length;for(;P--;){let z=D[P];if(typeof z=="string"){let re=M(z);re!==z&&(l(D)||(D[P]=re),z=re)}k[z]=!0}return k}function C(k){for(let D=0;D<k.length;D++)T(k,D)||(k[D]=null);return k}function N(k){let D=o(null);for(let[M,P]of f(k))T(k,M)&&(Array.isArray(P)?D[M]=C(P):P&&typeof P=="object"&&P.constructor===Object?D[M]=N(P):D[M]=P);return D}function F(k,D){for(;k!==null;){let P=e(k,D);if(P){if(P.get)return v(P.get);if(typeof P.value=="function")return v(P.value)}k=t(k)}function M(){return null}return M}let Q=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Le=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),K=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ne=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Oe=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ft=s(["#text"]),ct=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$e=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ut=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xe=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sn=u(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Cn=u(/<%[\w\W]*|[\w\W]*%>/gm),Dn=u(/\${[\w\W]*}/gm),Rn=u(/^data-[\-\w.\u00B7-\uFFFF]/),In=u(/^aria-[\-\w]+$/),pt=u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vn=u(/^(?:\w+script|data):/i),Pn=u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dt=u(/^html$/i),kn=u(/^[a-z][.\w]*(-[.\w]+)+$/i);var ht=Object.freeze({__proto__:null,MUSTACHE_EXPR:Sn,ERB_EXPR:Cn,TMPLIT_EXPR:Dn,DATA_ATTR:Rn,ARIA_ATTR:In,IS_ALLOWED_URI:pt,IS_SCRIPT_OR_DATA:vn,ATTR_WHITESPACE:Pn,DOCTYPE_NAME:dt,CUSTOM_ELEMENT:kn});let Mn=function(){return typeof window>"u"?null:window},Un=function(D,M){if(typeof D!="object"||typeof D.createPolicy!="function")return null;let P=null,z="data-tt-policy-suffix";M&&M.hasAttribute(z)&&(P=M.getAttribute(z));let re="dompurify"+(P?"#"+P:"");try{return D.createPolicy(re,{createHTML(ce){return ce},createScriptURL(ce){return ce}})}catch{return console.warn("TrustedTypes policy "+re+" could not be created."),null}};function mt(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mn(),D=R=>mt(R);if(D.version="3.0.11",D.removed=[],!k||!k.document||k.document.nodeType!==9)return D.isSupported=!1,D;let{document:M}=k,P=M,z=P.currentScript,{DocumentFragment:re,HTMLTemplateElement:ce,Node:Fe,Element:gt,NodeFilter:Ne,NamedNodeMap:Fn=k.NamedNodeMap||k.MozNamedAttrMap,HTMLFormElement:Hn,DOMParser:Bn,trustedTypes:Se}=k,Ce=gt.prototype,Jn=F(Ce,"cloneNode"),Gn=F(Ce,"nextSibling"),zn=F(Ce,"childNodes"),He=F(Ce,"parentNode");if(typeof ce=="function"){let R=M.createElement("template");R.content&&R.content.ownerDocument&&(M=R.content.ownerDocument)}let q,_e="",{implementation:Be,createNodeIterator:Wn,createDocumentFragment:Yn,getElementsByTagName:qn}=M,{importNode:Vn}=P,ee={};D.isSupported=typeof f=="function"&&typeof He=="function"&&Be&&Be.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Je,ERB_EXPR:Ge,TMPLIT_EXPR:ze,DATA_ATTR:Kn,ARIA_ATTR:Xn,IS_SCRIPT_OR_DATA:Zn,ATTR_WHITESPACE:yt,CUSTOM_ELEMENT:Qn}=ht,{IS_ALLOWED_URI:Et}=ht,H=null,Ot=r({},[...Q,...Le,...K,...j,...ft]),B=null,Nt=r({},[...ct,...$e,...ut,...xe]),$=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),be=null,We=null,_t=!0,Ye=!0,bt=!1,At=!0,ue=!1,ae=!1,qe=!1,Ve=!1,pe=!1,De=!1,Re=!1,wt=!0,Tt=!1,jn="user-content-",Ke=!0,Ae=!1,de={},he=null,Lt=r({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),xt=null,St=r({},["audio","video","img","source","image","track"]),Xe=null,Ct=r({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ie="http://www.w3.org/1998/Math/MathML",ve="http://www.w3.org/2000/svg",ie="http://www.w3.org/1999/xhtml",me=ie,Ze=!1,Qe=null,er=r({},[Ie,ve,ie],g),we=null,tr=["application/xhtml+xml","text/html"],nr="text/html",J=null,ge=null,rr=M.createElement("form"),Dt=function(p){return p instanceof RegExp||p instanceof Function},je=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ge&&ge===p)){if((!p||typeof p!="object")&&(p={}),p=N(p),we=tr.indexOf(p.PARSER_MEDIA_TYPE)===-1?nr:p.PARSER_MEDIA_TYPE,J=we==="application/xhtml+xml"?g:O,H=T(p,"ALLOWED_TAGS")?r({},p.ALLOWED_TAGS,J):Ot,B=T(p,"ALLOWED_ATTR")?r({},p.ALLOWED_ATTR,J):Nt,Qe=T(p,"ALLOWED_NAMESPACES")?r({},p.ALLOWED_NAMESPACES,g):er,Xe=T(p,"ADD_URI_SAFE_ATTR")?r(N(Ct),p.ADD_URI_SAFE_ATTR,J):Ct,xt=T(p,"ADD_DATA_URI_TAGS")?r(N(St),p.ADD_DATA_URI_TAGS,J):St,he=T(p,"FORBID_CONTENTS")?r({},p.FORBID_CONTENTS,J):Lt,be=T(p,"FORBID_TAGS")?r({},p.FORBID_TAGS,J):{},We=T(p,"FORBID_ATTR")?r({},p.FORBID_ATTR,J):{},de=T(p,"USE_PROFILES")?p.USE_PROFILES:!1,_t=p.ALLOW_ARIA_ATTR!==!1,Ye=p.ALLOW_DATA_ATTR!==!1,bt=p.ALLOW_UNKNOWN_PROTOCOLS||!1,At=p.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ue=p.SAFE_FOR_TEMPLATES||!1,ae=p.WHOLE_DOCUMENT||!1,pe=p.RETURN_DOM||!1,De=p.RETURN_DOM_FRAGMENT||!1,Re=p.RETURN_TRUSTED_TYPE||!1,Ve=p.FORCE_BODY||!1,wt=p.SANITIZE_DOM!==!1,Tt=p.SANITIZE_NAMED_PROPS||!1,Ke=p.KEEP_CONTENT!==!1,Ae=p.IN_PLACE||!1,Et=p.ALLOWED_URI_REGEXP||pt,me=p.NAMESPACE||ie,$=p.CUSTOM_ELEMENT_HANDLING||{},p.CUSTOM_ELEMENT_HANDLING&&Dt(p.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=p.CUSTOM_ELEMENT_HANDLING.tagNameCheck),p.CUSTOM_ELEMENT_HANDLING&&Dt(p.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=p.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),p.CUSTOM_ELEMENT_HANDLING&&typeof p.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=p.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ue&&(Ye=!1),De&&(pe=!0),de&&(H=r({},ft),B=[],de.html===!0&&(r(H,Q),r(B,ct)),de.svg===!0&&(r(H,Le),r(B,$e),r(B,xe)),de.svgFilters===!0&&(r(H,K),r(B,$e),r(B,xe)),de.mathMl===!0&&(r(H,j),r(B,ut),r(B,xe))),p.ADD_TAGS&&(H===Ot&&(H=N(H)),r(H,p.ADD_TAGS,J)),p.ADD_ATTR&&(B===Nt&&(B=N(B)),r(B,p.ADD_ATTR,J)),p.ADD_URI_SAFE_ATTR&&r(Xe,p.ADD_URI_SAFE_ATTR,J),p.FORBID_CONTENTS&&(he===Lt&&(he=N(he)),r(he,p.FORBID_CONTENTS,J)),Ke&&(H["#text"]=!0),ae&&r(H,["html","head","body"]),H.table&&(r(H,["tbody"]),delete be.tbody),p.TRUSTED_TYPES_POLICY){if(typeof p.TRUSTED_TYPES_POLICY.createHTML!="function")throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof p.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');q=p.TRUSTED_TYPES_POLICY,_e=q.createHTML("")}else q===void 0&&(q=Un(Se,z)),q!==null&&typeof _e=="string"&&(_e=q.createHTML(""));s&&s(p),ge=p}},Rt=r({},["mi","mo","mn","ms","mtext"]),It=r({},["foreignobject","desc","title","annotation-xml"]),ir=r({},["title","style","font","a","script"]),vt=r({},[...Le,...K,...ne]),Pt=r({},[...j,...Oe]),lr=function(p){let A=He(p);(!A||!A.tagName)&&(A={namespaceURI:me,tagName:"template"});let L=O(p.tagName),U=O(A.tagName);return Qe[p.namespaceURI]?p.namespaceURI===ve?A.namespaceURI===ie?L==="svg":A.namespaceURI===Ie?L==="svg"&&(U==="annotation-xml"||Rt[U]):!!vt[L]:p.namespaceURI===Ie?A.namespaceURI===ie?L==="math":A.namespaceURI===ve?L==="math"&&It[U]:!!Pt[L]:p.namespaceURI===ie?A.namespaceURI===ve&&!It[U]||A.namespaceURI===Ie&&!Rt[U]?!1:!Pt[L]&&(ir[L]||!vt[L]):!!(we==="application/xhtml+xml"&&Qe[p.namespaceURI]):!1},se=function(p){b(D.removed,{element:p});try{p.parentNode.removeChild(p)}catch{p.remove()}},et=function(p,A){try{b(D.removed,{attribute:A.getAttributeNode(p),from:A})}catch{b(D.removed,{attribute:null,from:A})}if(A.removeAttribute(p),p==="is"&&!B[p])if(pe||De)try{se(A)}catch{}else try{A.setAttribute(p,"")}catch{}},kt=function(p){let A=null,L=null;if(Ve)p="<remove></remove>"+p;else{let Y=h(p,/^[\r\n\t ]+/);L=Y&&Y[0]}we==="application/xhtml+xml"&&me===ie&&(p='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+p+"</body></html>");let U=q?q.createHTML(p):p;if(me===ie)try{A=new Bn().parseFromString(U,we)}catch{}if(!A||!A.documentElement){A=Be.createDocument(me,"template",null);try{A.documentElement.innerHTML=Ze?_e:U}catch{}}let W=A.body||A.documentElement;return p&&L&&W.insertBefore(M.createTextNode(L),W.childNodes[0]||null),me===ie?qn.call(A,ae?"html":"body")[0]:ae?A.documentElement:W},Mt=function(p){return Wn.call(p.ownerDocument||p,p,Ne.SHOW_ELEMENT|Ne.SHOW_COMMENT|Ne.SHOW_TEXT|Ne.SHOW_PROCESSING_INSTRUCTION|Ne.SHOW_CDATA_SECTION,null)},sr=function(p){return p instanceof Hn&&(typeof p.nodeName!="string"||typeof p.textContent!="string"||typeof p.removeChild!="function"||!(p.attributes instanceof Fn)||typeof p.removeAttribute!="function"||typeof p.setAttribute!="function"||typeof p.namespaceURI!="string"||typeof p.insertBefore!="function"||typeof p.hasChildNodes!="function")},Ut=function(p){return typeof Fe=="function"&&p instanceof Fe},le=function(p,A,L){ee[p]&&E(ee[p],U=>{U.call(D,A,L,ge)})},$t=function(p){let A=null;if(le("beforeSanitizeElements",p,null),sr(p))return se(p),!0;let L=J(p.nodeName);if(le("uponSanitizeElement",p,{tagName:L,allowedTags:H}),p.hasChildNodes()&&!Ut(p.firstElementChild)&&x(/<[/\w]/g,p.innerHTML)&&x(/<[/\w]/g,p.textContent)||p.nodeType===7)return se(p),!0;if(!H[L]||be[L]){if(!be[L]&&Ht(L)&&($.tagNameCheck instanceof RegExp&&x($.tagNameCheck,L)||$.tagNameCheck instanceof Function&&$.tagNameCheck(L)))return!1;if(Ke&&!he[L]){let U=He(p)||p.parentNode,W=zn(p)||p.childNodes;if(W&&U){let Y=W.length;for(let X=Y-1;X>=0;--X)U.insertBefore(Jn(W[X],!0),Gn(p))}}return se(p),!0}return p instanceof gt&&!lr(p)||(L==="noscript"||L==="noembed"||L==="noframes")&&x(/<\/no(script|embed|frames)/i,p.innerHTML)?(se(p),!0):(ue&&p.nodeType===3&&(A=p.textContent,E([Je,Ge,ze],U=>{A=_(A,U," ")}),p.textContent!==A&&(b(D.removed,{element:p.cloneNode()}),p.textContent=A)),le("afterSanitizeElements",p,null),!1)},Ft=function(p,A,L){if(wt&&(A==="id"||A==="name")&&(L in M||L in rr))return!1;if(!(Ye&&!We[A]&&x(Kn,A))){if(!(_t&&x(Xn,A))){if(!B[A]||We[A]){if(!(Ht(p)&&($.tagNameCheck instanceof RegExp&&x($.tagNameCheck,p)||$.tagNameCheck instanceof Function&&$.tagNameCheck(p))&&($.attributeNameCheck instanceof RegExp&&x($.attributeNameCheck,A)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(A))||A==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&x($.tagNameCheck,L)||$.tagNameCheck instanceof Function&&$.tagNameCheck(L))))return!1}else if(!Xe[A]){if(!x(Et,_(L,yt,""))){if(!((A==="src"||A==="xlink:href"||A==="href")&&p!=="script"&&w(L,"data:")===0&&xt[p])){if(!(bt&&!x(Zn,_(L,yt,"")))){if(L)return!1}}}}}}return!0},Ht=function(p){return p!=="annotation-xml"&&h(p,Qn)},Bt=function(p){le("beforeSanitizeAttributes",p,null);let{attributes:A}=p;if(!A)return;let L={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B},U=A.length;for(;U--;){let W=A[U],{name:Y,namespaceURI:X,value:oe}=W,Te=J(Y),Z=Y==="value"?oe:S(oe);if(L.attrName=Te,L.attrValue=Z,L.keepAttr=!0,L.forceKeepAttr=void 0,le("uponSanitizeAttribute",p,L),Z=L.attrValue,L.forceKeepAttr||(et(Y,p),!L.keepAttr))continue;if(!At&&x(/\/>/i,Z)){et(Y,p);continue}ue&&E([Je,Ge,ze],Gt=>{Z=_(Z,Gt," ")});let Jt=J(p.nodeName);if(Ft(Jt,Te,Z)){if(Tt&&(Te==="id"||Te==="name")&&(et(Y,p),Z=jn+Z),q&&typeof Se=="object"&&typeof Se.getAttributeType=="function"&&!X)switch(Se.getAttributeType(Jt,Te)){case"TrustedHTML":{Z=q.createHTML(Z);break}case"TrustedScriptURL":{Z=q.createScriptURL(Z);break}}try{X?p.setAttributeNS(X,Y,Z):p.setAttribute(Y,Z),a(D.removed)}catch{}}}le("afterSanitizeAttributes",p,null)},ar=function R(p){let A=null,L=Mt(p);for(le("beforeSanitizeShadowDOM",p,null);A=L.nextNode();)le("uponSanitizeShadowNode",A,null),!$t(A)&&(A.content instanceof re&&R(A.content),Bt(A));le("afterSanitizeShadowDOM",p,null)};return D.sanitize=function(R){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=null,L=null,U=null,W=null;if(Ze=!R,Ze&&(R="<!-->"),typeof R!="string"&&!Ut(R))if(typeof R.toString=="function"){if(R=R.toString(),typeof R!="string")throw I("dirty is not a string, aborting")}else throw I("toString is not a function");if(!D.isSupported)return R;if(qe||je(p),D.removed=[],typeof R=="string"&&(Ae=!1),Ae){if(R.nodeName){let oe=J(R.nodeName);if(!H[oe]||be[oe])throw I("root node is forbidden and cannot be sanitized in-place")}}else if(R instanceof Fe)A=kt("<!---->"),L=A.ownerDocument.importNode(R,!0),L.nodeType===1&&L.nodeName==="BODY"||L.nodeName==="HTML"?A=L:A.appendChild(L);else{if(!pe&&!ue&&!ae&&R.indexOf("<")===-1)return q&&Re?q.createHTML(R):R;if(A=kt(R),!A)return pe?null:Re?_e:""}A&&Ve&&se(A.firstChild);let Y=Mt(Ae?R:A);for(;U=Y.nextNode();)$t(U)||(U.content instanceof re&&ar(U.content),Bt(U));if(Ae)return R;if(pe){if(De)for(W=Yn.call(A.ownerDocument);A.firstChild;)W.appendChild(A.firstChild);else W=A;return(B.shadowroot||B.shadowrootmode)&&(W=Vn.call(P,W,!0)),W}let X=ae?A.outerHTML:A.innerHTML;return ae&&H["!doctype"]&&A.ownerDocument&&A.ownerDocument.doctype&&A.ownerDocument.doctype.name&&x(dt,A.ownerDocument.doctype.name)&&(X="<!DOCTYPE "+A.ownerDocument.doctype.name+`>
`+X),ue&&E([Je,Ge,ze],oe=>{X=_(X,oe," ")}),q&&Re?q.createHTML(X):X},D.setConfig=function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};je(R),qe=!0},D.clearConfig=function(){ge=null,qe=!1},D.isValidAttribute=function(R,p,A){ge||je({});let L=J(R),U=J(p);return Ft(L,U,A)},D.addHook=function(R,p){typeof p=="function"&&(ee[R]=ee[R]||[],b(ee[R],p))},D.removeHook=function(R){if(ee[R])return a(ee[R])},D.removeHooks=function(R){ee[R]&&(ee[R]=[])},D.removeAllHooks=function(){ee={}},D}var $n=mt();return $n})});var _n=fe((Pr,Nn)=>{var V=tt(On());Nn.exports=class{constructor(){let n=this}escape(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}mapToHtmlList(n,l=!1,t=void 0){let e=this;var s=0,u=document.createElement("ul"),o;return t!==void 0&&(o=JSON.parse(t)),u.className="DAMON-List",m(n,u),u;function m(d,E){if(typeof E!="object"||E==null||Array.isArray(E))throw new Error("Error List Item number "+s+": @param { {} } list");if(typeof d=="object"&&d!==null&&!Array.isArray(d)&&d instanceof Map&&d.constructor===Map){if(E.tagName=="UL")for(let[O,g]of d){let h=document.createElement("ul"),_=document.createElement("code"),w=document.createElement("span"),S=document.createElement("li");if(w.className="type-key",/^https?:\/\//.test(O)){let T=V.sanitize(`<a href="${O}">${O}</a>`);w.innerHTML=T}else t!==void 0&&O in o["@context"]?w.innerHTML=V.sanitize(`<a href="${o["@context"][O]["@id"]}">${O}</a>`):w.textContent=O;if(typeof g=="object"&&g!==null)if(Array.isArray(g))if(d.inlineArrays!==void 0&&d.inlineArrays.indexOf(O)>-1){_.innerHTML=w.outerHTML+": [";for(let T=0,x=g.length;T<x;T++){let I=document.createElement("span"),v=g[T];v===!0?(I.textContent="true",I.className="type-boolean"):v===!1?(I.textContent="false",I.className="type-boolean"):v===null?(I.textContent="null",I.className="type-null"):Number.isFinite(v)&&!Number.isNaN(v)?(I.textContent=v+"",I.className="type-number"):(l?/^https?:\/\//.test(v)?I.innerHTML=V.sanitize(`<a href="${v}">"${v}"</a>`):I.innerHTML=`"${v}"`:/^https?:\/\//.test(v)?I.innerHTML=V.sanitize(`<a href="${v}">"${v}"</a>`):I.textContent=`"${v}"`,I.className="type-string"),T!==0&&(_.innerHTML+=", "),_.appendChild(I)}_.innerHTML+="]",S.appendChild(_),S.appendChild(h),E.appendChild(S)}else _.innerHTML=w.outerHTML+": []",S.appendChild(_),S.appendChild(h),E.appendChild(S),m(g,h);else d.implicitMaps!==void 0&&d.implicitMaps.indexOf(O)>-1?_.innerHTML=w.outerHTML:_.innerHTML=w.outerHTML+": {}",S.appendChild(_),S.appendChild(h),E.appendChild(S),m(g,h);else{s++,_.innerHTML=w.outerHTML+": ";let T=document.createElement("span"),x=g;x===!0?(T.textContent="true",T.className="type-boolean"):x===!1?(T.textContent="false",T.className="type-boolean"):x===null?(T.textContent="null",T.className="type-null"):Number.isFinite(x)&&!Number.isNaN(x)?(T.textContent=x+"",T.className="type-number"):(l?/^https?:\/\//.test(x)?T.innerHTML=V.sanitize(`<a href="${x}">"${x}"</a>`):T.innerHTML=`"${x}"`:/^https?:\/\//.test(x)?T.innerHTML=V.sanitize(`<a href="${x}">"${x}"</a>`):T.textContent=`"${x}"`,T.className="type-string"),d.implicitNulls===void 0||d.implicitNulls.indexOf(O)==-1?_.appendChild(T):_.innerHTML=_.innerHTML.slice(0,-2),S.appendChild(_),E.appendChild(S)}}}else if(Array.isArray(d))for(var a=0,b=d.length;a<b;a++){let O=document.createElement("ul"),g=document.createElement("code"),h=document.createElement("li");if(typeof d[a]=="object"&&d[a]!==null)if(Array.isArray(d[a]))if(d.inlineArrays!==void 0&&d.inlineArrays.indexOf(a)>-1){g.innerHTML+="[";for(let _=0,w=d[a].length;_<w;_++){let S=document.createElement("span"),T=d[a][_];T===!0?(S.textContent="true",S.className="type-boolean"):T===!1?(S.textContent="false",S.className="type-boolean"):T===null?(S.textContent="null",S.className="type-null"):Number.isFinite(T)&&!Number.isNaN(T)?(S.textContent=T+"",S.className="type-number"):(l?/^https?:\/\//.test(T)?S.innerHTML=V.sanitize(`<a href="${T}">"${T}"</a>`):S.innerHTML=`"${T}"`:/^https?:\/\//.test(T)?S.innerHTML=V.sanitize(`<a href="${T}">"${T}"</a>`):S.textContent=`"${T}"`,S.className="type-string"),_!==0&&(g.innerHTML+=", "),g.appendChild(S)}g.innerHTML+="]",h.appendChild(g),h.appendChild(O),E.appendChild(h)}else g.textContent="[]",h.appendChild(g),h.appendChild(O),E.appendChild(h),m(d[a],O);else g.textContent="{}",h.appendChild(g),h.appendChild(O),E.appendChild(h),m(d[a],O);else{s++;let _=d[a];_===!0?(g.textContent="true",g.className="type-boolean"):_===!1?(g.textContent="false",g.className="type-boolean"):_===null?(g.textContent="null",g.className="type-null"):Number.isFinite(_)&&!Number.isNaN(_)?(g.textContent=_+"",g.className="type-number"):(l?/^https?:\/\//.test(_)?g.innerHTML=V.sanitize(`<a href="${_}">"${_}"</a>`):g.innerHTML=`"${_}"`:/^https?:\/\//.test(_)?g.innerHTML=V.sanitize(`<a href="${_}">"${_}"</a>`):g.textContent=`"${_}"`,g.className="type-string"),h.appendChild(g),h.appendChild(O),E.appendChild(h)}}}}mapToHtmlTable(n,l=!1){let t=this;var e=0,s=document.createElement("table"),u=document.createElement("thead"),o=document.createElement("tbody"),m=!1,d=0;if(s.className="DAMON-Table",typeof n!="object"||n==null||Array.isArray(n)||!(n instanceof Map)||n.constructor!==Map)throw new Error("Error List Item number "+e+": @param { {} } list");for(let[E,a]of n){if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map)if(E=="0"&&!m){let b=document.createElement("tr");d=a.length;for(let[O,g]of a)if(g===null){let h=document.createElement("th");l?/^https?:\/\//.test(O)?h.innerHTML=V.sanitize(`<a href="${O}">${O}</a>`):h.innerHTML=`${O}`:/^https?:\/\//.test(O)?h.innerHTML=V.sanitize(`<a href="${O}">${O}</a>`):h.textContent=`${O}`,b.appendChild(h)}else throw new Error("Expected implicit null property, saw otherwise");u.appendChild(b),m=!0}else{if(d==0&&(d=a.length),a.length!=d)throw new Error("Error List Item number "+e+": @param { {} } list");let b=document.createElement("tr");for(let[O,g]of a)if(g===null){let h=document.createElement("td");l?/^https?:\/\//.test(O)?h.innerHTML=V.sanitize(`<a href="${O}">${O}</a>`):h.innerHTML=`${O}`:/^https?:\/\//.test(O)?h.innerHTML=V.sanitize(`<a href="${O}">${O}</a>`):h.textContent=`${O}`,b.appendChild(h)}else throw new Error("Expected implicit null property, saw otherwise");o.appendChild(b)}else if(typeof a!="object"&&E=="00"){let b=document.createElement("caption");l?b.innerHTML=a:b.textContent=a,s.appendChild(b)}else throw new Error("Error List Item number "+e+": @param { {} } list");e++}return m&&s.appendChild(u),s.appendChild(o),s}mapTreeLeavesToHtmlTable(n,l=!1){let t=this;var e=0,s=0,u=document.createElement("table"),o=document.createElement("thead"),m=document.createElement("tbody"),d=!1;if(u.className="DAMON-LeavesToTable",typeof n!="object"||n==null||Array.isArray(n)||!(n instanceof Map)||n.constructor!==Map)throw new Error("Error List Item number "+e+": @param { {} } list");for(let[a,b]of n){if(typeof b=="object"&&!Array.isArray(b)){if(a=="head"&&!d){try{E(b,o)}catch{return}d=!0}else if(a=="body")try{E(b,m)}catch{return}}else if(typeof b!="object"&&a=="caption"){let O=document.createElement("caption");l?O.innerHTML=b:O.textContent=b,u.appendChild(O)}else throw new Error("Error List Item number "+e+": @param { {} } list");e++}return d&&u.appendChild(o),u.appendChild(m),u;function E(a,b,O=0,g=[]){if(typeof b!="object"||b==null)throw new Error("Error List Item number "+e+": @param { {} } list");if(typeof a=="object"&&a!==null&&!Array.isArray(a)&&a instanceof Map&&a.constructor===Map){if(b.tagName=="THEAD")if(Array.from(a.keys()).length==1)if(typeof a.get(Array.from(a.keys())[0])=="object"&&a.get(Array.from(a.keys())[0])!==null)e++,E(a.get(Array.from(a.keys())[0]),b,O+1,g.concat([Array.from(a.keys())[0]]));else throw new Error("Error List Item number "+e+": @param { {} } list");else throw new Error("Error List Item number "+e+": @param { {} } list");else if(b.tagName=="TBODY"){if(Array.from(a.keys()).length==0)throw new Error("Error List Item number "+e+": @param { {} } list");for(let[h,_]of a)if(typeof _=="object"&&_!==null)e++,E(_,b,O+1,g.concat([h]));else throw new Error("Error List Item number "+e+": @param { {} } list")}}else if(Array.isArray(a)){if(b.tagName=="THEAD")if(a.length==1){e++,s=O;let h=document.createElement("tr");g.push(a[0]);for(let _=0,w=g.length;_<w;_++){let S=document.createElement("th");l?S.innerHTML=g[_]:S.textContent=g[_],h.appendChild(S)}b.appendChild(h)}else throw new Error("Error List Item number "+e+": @param { {} } list");else if(b.tagName=="TBODY")if(O==s){if(a.length==0)throw new Error("Error List Item number "+e+": @param { {} } list");for(let h=0,_=a.length;h<_;h++){e++;let w=document.createElement("tr");for(let T=0,x=g.length;T<x;T++){let I=document.createElement("td");l?I.innerHTML=g[T]:I.textContent=g[T],w.appendChild(I)}let S=document.createElement("td");l?S.innerHTML=a[h]:S.textContent=a[h],S.textContent=a[h],w.appendChild(S),b.appendChild(w)}}else throw new Error("Error List Item number "+e+": @param { {} } list")}}}htmlToJSON(n){let l=this;var t=0;if(n.firstElementChild.textContent=="{}")return l.mapToJSON(e(tree,new Map));if(n.firstElementChild.textContent=="[]")return l.mapToJSON(e(tree,[]));function e(s,u){if(typeof s!="object"||s==null||Array.isArray(s))throw new Error("Error List Item number "+t+": @param { {} } list");if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map){for(let o=0,m=s.children.length;o<m;o++)if(t++,s.children[o].tagName=="LI")if(s.children[o].firstElementChild.tagName=="CODE")if(s.children[o].firstElementChild.innerHTML.length){let d=s.children[o].firstElementChild.innerHTML.trim();if(d[d.length-1]==":"&&d.length>1){let E=s.children[o].children[1];if(E.tagName=="UL"&&E.firstElementChild.tagName=="LI"&&E.children.length==1&&E.firstElementChild.firstElementChild.tagName=="CODE"){t++;let a=E.firstElementChild.firstElementChild.textContent.trim();a=="true"?u.set(d.slice(0,-1),!0):a=="false"?u.set(d.slice(0,-1),!1):a=="null"?u.set(d.slice(0,-1),null):isFinite(a)&&!isNaN(parseFloat(a))?u.set(d.slice(0,-1),a*1):u.set(d.slice(0,-1),a)}else throw new Error("Error List Item number "+t+": not DAMON-compliant.")}else if(d[d.length-4]==":"&&d.length>4){if(d.slice(-3)==" []")if(u.set(d.slice(0,-4),[]),s.children[o].children[1].tagName=="UL")e(s.children[o].children[1],u.get(d.slice(0,-4)));else throw new Error("Error List Item number "+t+": not DAMON-compliant.");else if(d.slice(-3)==" {}")if(u.set(d.slice(0,-4),new Map),s.children[o].children[1].tagName=="UL")e(s.children[o].children[1],u.get(d.slice(0,-4)));else throw new Error("Error List Item number "+t+": not DAMON-compliant.")}else throw new Error("Error List Item number "+t+": map items need a key")}else throw new Error("Error List Item number "+t+": empty node.");else throw new Error("Error List Item number "+t+": not DAMON-compliant.")}else if(Array.isArray(u)){for(let o=0,m=s.children.length;o<m;o++)if(t++,s.children[o].tagName=="LI")if(s.children[o].firstElementChild.tagName=="CODE")if(s.children[o].firstElementChild.innerHTML.length){let d=s.children[o].firstElementChild.innerHTML.trim();if(d[d.length-1]==":"&&d.length>1)throw new Error("Error List Item number "+t+": lists can't have keys.");if(d[d.length-4]==":"&&d.length>4)throw new Error("Error List Item number "+t+": not DAMON-compliant.");if(d=="[]")if(u.push([]),s.children[o].children[1]&&s.children[o].children[1].tagName=="UL")e(s.children[o].children[1],u[u.length-1]);else throw new Error("Error List Item number "+t+": not DAMON-compliant.");else if(d=="{}")if(u.push({}),s.children[o].children[1]&&s.children[o].children[1].tagName=="UL")e(s.children[o].children[1],u[u.length-1]);else throw new Error("Error List Item number "+t+": not DAMON-compliant.");else d=="true"?u.push(!0):d=="false"?u.push(!1):d=="null"?u.push(null):isFinite(d)&&!isNaN(parseFloat(d))?u.push(d*1):u.push(d)}else throw new Error("Error List Item number "+t+": empty node.");else throw new Error("Error List Item number "+t+": not DAMON-compliant.")}else throw new Error("Error List Item number "+t+": @param { {} | [] } jsonMap");return u}}}});var Tn=fe((Mr,wn)=>{var bn=tt(En()),An=tt(_n());wn.exports=class{constructor(n=!1){let l=this;if(this.indentation=4,[!0,!1,void 0].indexOf(n)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=n,this.damonOriginalLinesMapping=[],this.utils=new An.default}template(n){let l=this;var t=n[0];for(let s=1;s<n.length;s++)typeof arguments[s]=="string"?t+='"'+arguments[s]+'"':t+=arguments[s],t+=n[s];return l._treeToMap(l._damonToTree(t))}damonToMap(n){let l=this;return l._treeToMap(l._damonToTree(n))}damonToJSON(n){let l=this;return l.mapToJSON(l.damonToMap(n))}jsonToDamon(n){let l=this,t=(0,bn.parse)(n);return l.mapToDamon(t)}_damonToTree(n){let l=this;if(n==="")throw new Error("Error line 1: empty string",{line:1,language:"DAMON"});if(/[\s]/.test(n)&&n.match(new RegExp(/[\s]/))[0].length==n.length)throw new Error("Error line 1: string only contains whitespace",{line:1,language:"DAMON"});var t=/\r\n/.test(n)?`\r
`:`
`,e=n.split(t),s=e.slice(0);e=e.filter(h=>!/^ *\/\//.test(h)),e=e.filter(h=>h!=""),e=e.filter(h=>!/^[ \t]+$/.test(h));let u=0;l.damonOriginalLinesMapping=[];for(let h=0,_=s.length;h<_;h++)e.slice(u).indexOf(s[h])>-1?l.damonOriginalLinesMapping[h]=e.slice(u).indexOf(s[h]):l.damonOriginalLinesMapping[h]=null;let o=new RegExp("^(	)+");for(let h=0,_=e.length;h<_;h++){if(o.test(e[h])){let w=e[h].match(o)[0].length;for(let S=0,T=w;S<T;S++)e[h]=e[h].replace("	"," ".repeat(l.indentation))}if(!/^ *- $/.test(e[h])&&/[ \t]+$/.test(e[h]))throw new Error("Error line "+(l.damonOriginalLinesMapping.indexOf(h)+1)+": trailing whitespace",{line:l.damonOriginalLinesMapping.indexOf(h)+1,language:"DAMON"})}let m=new RegExp("^("+" ".repeat(l.indentation)+")+");if(m.test(e[0])){let h=e[0].match(m)[0].length,_=!0;for(let w=0,S=e.length;w<S;w++)m.test(e[w])&&e[w].match(m)[0].length>=h?e[w]=e[w].slice(h):_=!1;if(!_)throw new Error("Error line 1: bad formatting",{line:1,language:"DAMON"})}else if(m.test(e[1])&&e[1].match(m)[0].length>l.indentation){let h=e[1].match(m)[0].length-l.indentation,_=!0;for(let w=1,S=e.length;w<S;w++)m.test(e[w])&&e[w].match(m)[0].length>=h?e[w]=e[w].slice(h):_=!1;if(!_)throw new Error("Error line 2: bad formatting",{line:2,language:"DAMON"})}let d=!1;if(e.length>1)for(let h=0,_=e.length;h<_;h++)h!==0&&/^- /.test(e[h])&&(d=!0);if(!/^- \{\}$/.test(e[0])&&!/^- \[\]$/.test(e[0])&&(d=!0),d){for(let h=0,_=e.length;h<_;h++)e[h]=" ".repeat(l.indentation)+e[h];e.unshift("- {}")}var E={content:e[0],level:0,id:0,children:[],headless:d},a=E;if(!/^- /.test(e[0].trimStart())||/^ +/.test(e[0])&&(e[0].match(/^ +/)[0].length%l.indentation!=0||e[0].match(/^ +/)[0].length!=l.indentation))throw new Error("Error line "+(d*1+1)+": bad formatting",{line:d*1+1,language:"DAMON"});e.shift();for(let h=0,_=e.length;h<_;h++){if(!/^- /.test(e[h].trimStart())||/^ +/.test(e[h])&&(e[h].match(/^ +/)[0].length%l.indentation!=0||h==0&&e[h].match(/^ +/)[0].length!=l.indentation||h!=0&&/^- /.test(e[h-1])&&e[h].match(/^ +/)[0].length!=l.indentation||h!=0&&!/^- /.test(e[h-1])&&e[h].match(/^ +/)[0].length>e[h-1].match(/^ +/)[0].length+l.indentation))throw new Error("Error line "+(l.damonOriginalLinesMapping.indexOf(h)+1)+": bad formatting",{line:l.damonOriginalLinesMapping.indexOf(h)+1,language:"DAMON"});let w={content:e[h].trimStart().slice(2),level:1+e[h].match(/^ +/)[0].length/l.indentation,id:"",children:[]};if(a===E)w.id=E.children.length+1,E.children.push(w);else if(a.level===w.level){var b=l._findListItemCommonDirectParent(a,E);b.level==0?w.id=b.children.length+1:w.id=b.id+"-"+(b.children.length+1),b.children.push(w)}else if(a.level>w.level){var O=l._findListItemCommonAncestor(a,E,w.level);O.level==0?w.id=O.children.length+1:w.id=O.id+"-"+(O.children.length+1),O.children.push(w)}else if(a.level<w.level){var g=l._findListItemCommonDirectParent(a,E);let S=g.children.indexOf(a),T=g.children[S].id,x=g.children[S].children.length+1;w.id=T+"-"+x,g.children[S].children.push(w)}a=w}return E}_findListItemCommonDirectParent(n,l){let t=this;if(l.children.indexOf(n)>-1)return l;var e;for(let s=l.children.length-1,u=0;s>=u;s--)if(e=t._findListItemCommonDirectParent(n,l.children[s]),e)return e}_findListItemCommonAncestor(n,l,t){let e=this;var s=e._findListItemCommonDirectParent(n,l);return s.level<t?s:e._findListItemCommonAncestor(s,l,t)}_treeToMap(n){let l=this;var t=0;if(n.content=="- {}")return e(n,new Map);if(n.content=="- []")return e(n,[]);{let o=new Map;return n.headless&&(o.headless=!0),e(n,o)}function e(o,m){if(typeof o!="object"||o==null||Array.isArray(o))throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": @param { {} } tree",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});if(typeof m=="object"&&m!==null&&!Array.isArray(m)&&m instanceof Map&&m.constructor===Map)s(o,m);else if(Array.isArray(m))u(o,m);else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": @param { {} | [] } jsonMap",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});return m}function s(o,m){for(let d=0,E=o.children.length;d<E;d++)if(t++,o.children[d].content.length==0){let a;o.children[d].children.length>0?(a="implicit map key",m.set("",new Map),m.implicitMaps===void 0&&(m.implicitMaps=[]),m.implicitMaps.push(""),e(o.children[d],m.get(""))):(a="implicit null key",m.set("",null),m.implicitNulls===void 0&&(m.implicitNulls=[]),m.implicitNulls.push(""))}else{let a=o.children[d].content,b="key";try{if(/^.*: +\[/.test(a)&&a[a.length-1]=="]")if(/: +\[ *\]$/.test(a)){let O=JSON.stringify(JSON.parse(`["${a.slice(0,-1*a.match(/: +\[ *\]$/)[0].length)}"]`)[0]).slice(1,-1);m.set(O,[]),o.children[d].children.length>0&&e(o.children[d],m.get(O))}else{let O=new RegExp(/: +\[/g),g=a.slice(0,-1).split(O),h=a.match(O).concat([""]),_=g.map((x,I)=>x+h[I]),w="",S=[];for(let x=0,I=g.length;x<I;x++)try{let v;if(x==0?v=g[0]:v=_.slice(0,x).join("")+g[x],w=JSON.stringify(JSON.parse(`["${v}"]`)[0]).slice(1,-1),b="list",S=JSON.parse(`[${_.slice(x+1).join("")}]`),Array.isArray(S))break}catch{if(x==I-2)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": invalid inline list",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"})}if(S.every(function(x){if(x===!0)return!0;if(x===!1)return!0;if(x===null)return nullsCounter++,!0;if(typeof x=="string")return!0;if(isFinite(x)&&!isNaN(parseFloat(x))&&Number.isFinite(x*1)&&!Number.isNaN(x*1)){if(x.indexOf(0)==0&&x.length>1)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": leading 0",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});return!0}else return!1}))m.set(w,S),m.inlineArrays===void 0&&(m.inlineArrays=[]),m.inlineArrays.push(w);else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": no nesting in inline lists",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});if(o.children[d].children.length>0)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3)+": inline lists can't have children",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3,language:"DAMON"})}else if(/: +\{ *\}$/.test(a)){let O=JSON.stringify(JSON.parse(`["${a.slice(0,-1*a.match(/: +\{ *\}$/)[0].length)}"]`)[0]).slice(1,-1);m.set(O,new Map),e(o.children[d],m.get(O))}else{let O=!1;if(a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="true"){let g=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],h=JSON.stringify(JSON.parse(`["${a.slice(0,-1*g.length-4)}"]`)[0]).slice(1,-1);m.set(h,!0)}else if(a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="false"){let g=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],h=JSON.stringify(JSON.parse(`["${a.slice(0,-1*g.length-5)}"]`)[0]).slice(1,-1);m.set(h,!1)}else if(a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]=="null"){let g=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],h=JSON.stringify(JSON.parse(`["${a.slice(0,-1*g.length-4)}"]`)[0]).slice(1,-1);m.set(h,null)}else if(/^.*: +"/.test(a)&&a[a.length-1]=='"'){let g=a.match(new RegExp(/: +"/g));if(g.length==1){let h=JSON.stringify(JSON.parse(`["${a.split(g[0])[0]}"]`)[0]).slice(1,-1);b="string";let _=JSON.stringify(JSON.parse(`["${a.split(g[0]).slice(1).join("").slice(0,-1)}"]`)[0]).slice(1,-1);m.set(h,_)}else if(g.length==2&&/: +"$/.test(a)){let h=JSON.stringify(JSON.parse(`["${a.split(g[0])[0]}"]`)[0]).slice(1,-1);b="string";let _=JSON.stringify(JSON.parse(`["${a.split(g[0]).slice(1).join("")+": "}"]`)[0]).slice(1,-1);m.set(h,_)}else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": unescaped double quote",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"})}else if(/^.*: /.test(a)&&isFinite(a.split(": ")[a.split(": ").length-1])&&!isNaN(parseFloat(a.split(": ")[a.split(": ").length-1]))&&Number.isFinite(a.split(": ")[a.split(": ").length-1]*1)&&!Number.isNaN(a.split(": ")[a.split(": ").length-1]*1)){let g=JSON.stringify(JSON.parse(`["${a.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);b="number";let h=a.match(new RegExp(/: +/g)),_=h[h.length-1],w=a.split(_)[a.split(_).length-1];if(w.indexOf(0)==0&&w.length>1)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": leading 0",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});let S=JSON.stringify(JSON.parse(`[${a.split(": ")[a.split(": ").length-1]*1}]`)[0])*1;m.set(g,S)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]*1===1/0){let g=JSON.stringify(JSON.parse(`["${a.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);b="infinity";let h=JSON.stringify(JSON.parse(`[${a.split(": ")[a.split(": ").length-1]*1}]`))*1}else{let g=!1,h=0;if(/\[ *\]$/.test(a)&&(g=!0,h=a.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(a)&&(g=!0,h=a.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(a)&&(g=!0,h=4),/false$/.test(a)&&(g=!0,h=5),/null$/.test(a)&&(g=!0,h=4),/".*"$/.test(a)&&(g=!0,h=a.match(new RegExp(/".*"$/g))[0].length),!g){let _="";for(let w=a.length-1;w>-1&&(_=a[w].concat(_),isFinite(_)&&!isNaN(parseFloat(_))&&Number.isFinite(_*1)&&!Number.isNaN(_*1));w--){if(!/[ \t]/.test(a[w]))break;g=!0,h=_.length}}if(g){let _=JSON.stringify(JSON.parse(`["${a.slice(0,-1*h)}"]`)[0]).slice(1,-1);if(l.pedantic)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t))+": missing separator",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t),language:"DAMON",errorType:"pedantic"});if(/: +$/.test(_))if(O=!0,o.children[d].children.length>0){b="implicit map key";let w=JSON.stringify(JSON.parse(`["${a}"]`)[0]).slice(1,-1);m.set(w,new Map),m.implicitMaps===void 0&&(m.implicitMaps=[]),m.implicitMaps.push(w),e(o.children[d],m.get(w))}else{b="implicit null key";let w=JSON.stringify(JSON.parse(`["${a}"]`)[0]).slice(1,-1);m.set(w,null),m.implicitNulls===void 0&&(m.implicitNulls=[]),m.implicitNulls.push(w)}else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t))+": missing separator",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t),language:"DAMON",errorType:"pedantic"})}else{let _=JSON.stringify(JSON.parse(`["${a.slice(0,-1*h)}"]`)[0]).slice(1,-1);if(l.pedantic)throw/: +$/.test(_)?new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3)+": bad value",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t),language:"DAMON",errorType:"pedantic"}):new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t))+": missing separator",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t),language:"DAMON",errorType:"pedantic"});if(O=!0,o.children[d].children.length>0){b="implicit map key";let w=JSON.stringify(JSON.parse(`["${a}"]`)[0]).slice(1,-1);m.set(w,new Map),m.implicitMaps===void 0&&(m.implicitMaps=[]),m.implicitMaps.push(w),e(o.children[d],m.get(w))}else{b="implicit null key";let w=JSON.stringify(JSON.parse(`["${a}"]`)[0]).slice(1,-1);m.set(w,null),m.implicitNulls===void 0&&(m.implicitNulls=[]),m.implicitNulls.push(w)}}}if(!O&&o.children[d].children.length>0)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3)+": missing container or excess indentation",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3,language:"DAMON"})}}catch(O){throw O.language===void 0&&(console.error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": not JSON-compliant, detailed error follows"),O.line=n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,O.language="JSON",O.type=b),O}}}function u(o,m){for(let d=0,E=o.children.length;d<E;d++)if(t++,o.children[d].content.length){let a=o.children[d].content;if(/^[ \t]*\[/.test(a)&&a[a.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(a))m.push([]),e(o.children[d],m[m.length-1]);else{let b;try{b=JSON.parse(a)}catch{throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": invalid inline lists",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"JSON",type:"list"})}if(b.every(function(g){return g===!0||g===!1?!0:g===null?(nullsCounter++,!0):typeof g=="string"?!0:!!(isFinite(g)&&!isNaN(parseFloat(g))&&Number.isFinite(g*1)&&!Number.isNaN(g*1))}))m.push(b),m.inlineArrays===void 0&&(m.inlineArrays=[]),m.inlineArrays.push(d);else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": no nesting in inline lists",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});if(o.children[d].children.length>0)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3)+": inline lists can't have children",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+3,language:"DAMON"})}else if(/^[ \t]*\{\}$/.test(a))m.push(new Map),e(o.children[d],m[m.length-1]);else if(/^[ \t]*true$/.test(a))m.push(!0);else if(/^[ \t]*false$/.test(a))m.push(!1);else if(/^[ \t]*null$/.test(a))m.push(null);else if(/^[ \t]*".*"$/.test(a))try{m.push(JSON.stringify(JSON.parse(`[${a.trimStart()}]`)[0]).slice(1,-1))}catch(b){throw console.error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": not JSON-compliant, detailed error follows"),b.line=n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,b.language="JSON",b.type="string",b}else if(isFinite(a)&&!isNaN(parseFloat(a))&&Number.isFinite(a*1)&&!Number.isNaN(a*1)){if(a.indexOf(0)==0&&a.length>1)throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": leading 0",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"});try{m.push(JSON.stringify(JSON.parse(`[${a*1}]`)[0])*1)}catch(b){throw console.error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": not JSON-compliant, detailed error follows"),b.line=n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,b.language="JSON",b.type="number",b}}else if(a*1===1/0)try{JSON.stringify(JSON.parse(a*1))}catch(b){throw console.error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": not JSON-compliant, detailed error follows"),b.line=n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,b.language="JSON",b.type="infinity",b}else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": list items can't have a key",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"})}else throw new Error("Error line number "+(n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2)+": empty list node",{line:n.headless*-1+l.damonOriginalLinesMapping.indexOf(t-1)+2,language:"DAMON"})}}mapToDamon(n){let l=this;var t="";return Array.isArray(n)?t+=`- []
`:t+=`- {}
`,e(n),t.slice(0,-1);function e(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[d,E]of s)if(typeof E=="object"&&E!==null)if(Array.isArray(E)){let a=0,b=E.filter(function(O){return O===!0||O===!1?!0:O===null?(a++,!0):typeof O=="string"?!0:!!(isFinite(O)&&!isNaN(parseFloat(O))&&Number.isFinite(O*1)&&!Number.isNaN(O*1))});if(E.length==b.length&&u*4+2+E.join(", ").length+a*4<=80){let O="["+E.map(g=>JSON.stringify(g)).join(", ")+"]";t+="    ".repeat(u)+"- "+JSON.stringify(d).slice(1,-1)+": "+O+`
`}else t+="    ".repeat(u)+"- "+JSON.stringify(d).slice(1,-1)+`: []
`,e(E,u+1)}else t+="    ".repeat(u)+"- "+JSON.stringify(d).slice(1,-1)+`: {}
`,e(E,u+1);else t+="    ".repeat(u)+"- "+JSON.stringify(d).slice(1,-1)+": ",E===!0?t+=`true
`:E===!1?t+=`false
`:E===null?t+=`null
`:Number.isFinite(E)&&!Number.isNaN(E)?t+=E+`
`:t+=`${JSON.stringify(E)}
`;else if(Array.isArray(s))for(var o=0,m=s.length;o<m;o++)if(typeof s[o]=="object"&&s[o]!==null)if(Array.isArray(s[o])){let d=0,E=s[o].filter(function(a){return a===!0||a===!1?!0:a===null?(d++,!0):typeof a=="string"?!0:!!(isFinite(a)&&!isNaN(parseFloat(a))&&Number.isFinite(a*1)&&!Number.isNaN(a*1))});if(s[o].length==E.length&&u*4+2+s[o].join(", ").length+d*4<=80){let a="["+s[o].map(b=>JSON.stringify(b)).join(", ")+"]";t+="    ".repeat(u)+"- "+a+`
`}else t+="    ".repeat(u)+`- []
`,e(s[o],u+1)}else t+="    ".repeat(u)+`- {}
`,e(s[o],u+1);else s[o]===!0?t+="    ".repeat(u)+`- true
`:s[o]===!1?t+="    ".repeat(u)+`- false
`:s[o]===null?t+="    ".repeat(u)+`- null
`:Number.isFinite(s[o])&&!Number.isNaN(s[o])?t+="    ".repeat(u)+"- "+s[o]+`
`:t+="    ".repeat(u)+`- ${JSON.stringify(s[o])}
`}}mapToJSON(n){let l=this;var t="";if(Array.isArray(n))return t+=`[\r
`,e(n),t+="]",t;return t+=`{\r
`,e(n),t+="}",t;function e(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[d,E]of s)typeof E=="object"&&E!==null?Array.isArray(E)?E.length>0?(t+="    ".repeat(u)+`"${d}": [\r
`,e(E,u+1),t+="    ".repeat(u)+"]"):t+="    ".repeat(u)+`"${d}": []`:Array.from(E.keys()).length>0?(t+="    ".repeat(u)+`"${d}": {\r
`,e(E,u+1),t+="    ".repeat(u)+"}"):t+="    ".repeat(u)+`"${d}": {}`:E===!0?t+="    ".repeat(u)+`"${d}": true`:E===!1?t+="    ".repeat(u)+`"${d}": false`:E===null?t+="    ".repeat(u)+`"${d}": null`:Number.isFinite(E)&&!Number.isNaN(E)?t+="    ".repeat(u)+`"${d}": `+E:t+="    ".repeat(u)+`"${d}": "${E}"`,d!=Array.from(s.keys())[Array.from(s.keys()).length-1]?t+=`,\r
`:t+=`\r
`;else if(Array.isArray(s))for(var o=0,m=s.length;o<m;o++)typeof s[o]=="object"&&s[o]!==null?Array.isArray(s[o])?s[o].length>0?(t+="    ".repeat(u)+`[\r
`,e(s[o],u+1),t+="    ".repeat(u)+"]"):t+="    ".repeat(u)+"[]":Array.from(s[o].keys()).length>0?(t+="    ".repeat(u)+`{\r
`,e(s[o],u+1),t+="    ".repeat(u)+"}"):t+="    ".repeat(u)+"{}":s[o]===!0?t+="    ".repeat(u)+"true":s[o]===!1?t+="    ".repeat(u)+"false":s[o]===null?t+="    ".repeat(u)+"null":Number.isFinite(s[o])&&!Number.isNaN(s[o])?t+="    ".repeat(u)+s[o]:t+="    ".repeat(u)+`"${s[o]}"`,o!=m-1?t+=`,\r
`:t+=`\r
`}}implicitMapToSExpression(n){let l=this;var t="";return t+=`[\r
`,e(n),t+="]",t;function e(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map){let d=-1;for(let[E,a]of s){if(d++,typeof a=="object"&&a!==null)if(Array.isArray(a))a.length>0?(t+="    ".repeat(u)+`"${E}", [\r
`,e(a,u+1),t+="    ".repeat(u)+"]"):t+="    ".repeat(u)+`"${E}", []`;else if(Array.from(a.keys()).length>0){if(u==1)if(d==0)t="";else throw new Error("Multiple S-Expression roots");t+="    ".repeat(u)+`["${E}", \r
`,e(a,u+1),u!=1&&(t+="    ".repeat(u)+"]")}else t+="    ".repeat(u)+`"${E}", []`;else{if(a===!0)throw new Error("Booleans require quotes");if(a===!1)throw new Error("Booleans require quotes");a===null?t+="    ".repeat(u)+`"${E}"`:Number.isFinite(a)&&!Number.isNaN(a)?t+="    ".repeat(u)+`"${E}", `+a:t+="    ".repeat(u)+`"${E}", "${a}"`}E!=Array.from(s.keys())[Array.from(s.keys()).length-1]?t+=`,\r
`:t+=`\r
`}}else if(Array.isArray(s))for(var o=0,m=s.length;o<m;o++){if(typeof s[o]=="object"&&s[o]!==null)Array.isArray(s[o])?s[o].length>0?(t+="    ".repeat(u)+`[\r
`,e(s[o],u+1),t+="    ".repeat(u)+"]"):t+="    ".repeat(u)+"[]":Array.from(s[o].keys()).length>0?(t+="    ".repeat(u)+`[\r
`,e(s[o],u+1),t+="    ".repeat(u)+"]"):t+="    ".repeat(u)+"[]";else{if(s[o]===!0)throw new Error("Booleans require quotes");if(s[o]===!1)throw new Error("Booleans require quotes");if(s[o]===null)throw new Error("Array-nulls require quotes");Number.isFinite(s[o])&&!Number.isNaN(s[o])?t+="    ".repeat(u)+s[o]:t+="    ".repeat(u)+`"${s[o]}"`}o!=m-1?t+=`,\r
`:t+=`\r
`}}}}});var Ln=fe((Ur,xr)=>{xr.exports={key:': "key'}});var xn=fe(()=>{var $r=Ln(),G=new Damon,te=`
    - {}
        - key0: null
        - k\\ney1: []
            - []
                - {}
                - []
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                - "abc"
        - 1: {}
            - key: 1
            - othe: \\"rKey: ": \\"1e10"
        - More_complex_case: {}
            - key: []
                - "1e10"
                - "abc"
        - list: []
            - 1
            - 1
            - 1
            - 1
            - 1
            - 1`,Sr=`- {}
    - 00: "Caption"
    - 0: {}
        - heading1
        - heading2
        - heading3
    - 1: {}
        - A
        - B
        - C
    - 2: {}
        - A
        - B
        - C`;console.log(te);console.log(G._damonToTree(te));console.log(G.damonToMap(te));console.log(G.mapToDamon(G.damonToMap(te)));console.log(JSON.stringify(JSON.parse(G.damonToJSON(te))));console.log(G.jsonToDamon(G.damonToJSON(te)));console.log(G.jsonToDamon(G.damonToJSON(te))==te);console.log(G.utils.mapToHtmlList(G.damonToMap(te)));var Cr="1e10";console.log(G.template`- {}
    - k\\ney0: null
    - key1: []
        - []
            - {}
    - 1: {}
        - key: 1
        - otherKey: ${Cr}
    - More_complex_case: {}
        - key: []
            - "1e10"
            - "abc"`);console.log(G.utils.mapToHtmlTable(G.damonToMap(Sr)));console.log(G.implicitMapToSExpression(G.damonToMap(`- Divide: {}
    - n
    - Add: {}
        - 1
        - n`)));console.log(JSON.parse(G.implicitMapToSExpression(G.damonToMap(te))))});(function(){window.Damon=Tn(),tests=xn()})();})();
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.11 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.11/LICENSE *)
*/
