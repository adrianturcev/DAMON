(()=>{var T=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var Je=Object.prototype.hasOwnProperty;var Re=(l=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(l,{get:(r,n)=>(typeof require<"u"?require:r)[n]}):l)(function(l){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+l+'" is not supported')});var $e=(l,r)=>()=>(l&&(r=l(l=0)),r);var B=(l,r)=>()=>(r||l((r={exports:{}}).exports,r),r.exports),Ce=(l,r)=>{for(var n in r)T(l,n,{get:r[n],enumerable:!0})},De=(l,r,n,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of ve(r))!Je.call(l,t)&&t!==n&&T(l,t,{get:()=>r[t],enumerable:!(e=Le(r,t))||e.enumerable});return l};var Ie=l=>De(T({},"__esModule",{value:!0}),l);var Ne={};Ce(Ne,{__addDisposableResource:()=>de,__assign:()=>I,__asyncDelegator:()=>ae,__asyncGenerator:()=>oe,__asyncValues:()=>fe,__await:()=>C,__awaiter:()=>te,__classPrivateFieldGet:()=>ge,__classPrivateFieldIn:()=>ye,__classPrivateFieldSet:()=>pe,__createBinding:()=>k,__decorate:()=>X,__disposeResources:()=>me,__esDecorate:()=>W,__exportStar:()=>ne,__extends:()=>H,__generator:()=>re,__importDefault:()=>he,__importStar:()=>ce,__makeTemplateObject:()=>ue,__metadata:()=>ee,__param:()=>Q,__propKey:()=>Z,__read:()=>V,__rest:()=>M,__rewriteRelativeImportExtension:()=>Oe,__runInitializers:()=>z,__setFunctionName:()=>j,__spread:()=>ie,__spreadArray:()=>se,__spreadArrays:()=>le,__values:()=>P,default:()=>Fe});function H(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");U(l,r);function n(){this.constructor=l}l.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function M(l,r){var n={};for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&r.indexOf(e)<0&&(n[e]=l[e]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(l);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(l,e[t])&&(n[e[t]]=l[e[t]]);return n}function X(l,r,n,e){var t=arguments.length,s=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,n):e,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(l,r,n,e);else for(var o=l.length-1;o>=0;o--)(u=l[o])&&(s=(t<3?u(s):t>3?u(r,n,s):u(r,n))||s);return t>3&&s&&Object.defineProperty(r,n,s),s}function Q(l,r){return function(n,e){r(n,e,l)}}function W(l,r,n,e,t,s){function u(d){if(d!==void 0&&typeof d!="function")throw new TypeError("Function expected");return d}for(var o=e.kind,c=o==="getter"?"get":o==="setter"?"set":"value",h=!r&&l?e.static?l:l.prototype:null,O=r||(h?Object.getOwnPropertyDescriptor(h,e.name):{}),a,b=!1,g=n.length-1;g>=0;g--){var y={};for(var f in e)y[f]=f==="access"?{}:e[f];for(var f in e.access)y.access[f]=e.access[f];y.addInitializer=function(d){if(b)throw new TypeError("Cannot add initializers after decoration has completed");s.push(u(d||null))};var m=(0,n[g])(o==="accessor"?{get:O.get,set:O.set}:O[c],y);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(a=u(m.get))&&(O.get=a),(a=u(m.set))&&(O.set=a),(a=u(m.init))&&t.unshift(a)}else(a=u(m))&&(o==="field"?t.unshift(a):O[c]=a)}h&&Object.defineProperty(h,e.name,O),b=!0}function z(l,r,n){for(var e=arguments.length>2,t=0;t<r.length;t++)n=e?r[t].call(l,n):r[t].call(l);return e?n:void 0}function Z(l){return typeof l=="symbol"?l:"".concat(l)}function j(l,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function ee(l,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,r)}function te(l,r,n,e){function t(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function o(O){try{h(e.next(O))}catch(a){u(a)}}function c(O){try{h(e.throw(O))}catch(a){u(a)}}function h(O){O.done?s(O.value):t(O.value).then(o,c)}h((e=e.apply(l,r||[])).next())})}function re(l,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,t,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=o(0),u.throw=o(1),u.return=o(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(h){return function(O){return c([h,O])}}function c(h){if(e)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(n=0)),n;)try{if(e=1,t&&(s=h[0]&2?t.return:h[0]?t.throw||((s=t.return)&&s.call(t),0):t.next)&&!(s=s.call(t,h[1])).done)return s;switch(t=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,t=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=r.call(l,n)}catch(O){h=[6,O],t=0}finally{e=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ne(l,r){for(var n in l)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&k(r,l,n)}function P(l){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&l[r],e=0;if(n)return n.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&e>=l.length&&(l=void 0),{value:l&&l[e++],done:!l}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(l,r){var n=typeof Symbol=="function"&&l[Symbol.iterator];if(!n)return l;var e=n.call(l),t,s=[],u;try{for(;(r===void 0||r-- >0)&&!(t=e.next()).done;)s.push(t.value)}catch(o){u={error:o}}finally{try{t&&!t.done&&(n=e.return)&&n.call(e)}finally{if(u)throw u.error}}return s}function ie(){for(var l=[],r=0;r<arguments.length;r++)l=l.concat(V(arguments[r]));return l}function le(){for(var l=0,r=0,n=arguments.length;r<n;r++)l+=arguments[r].length;for(var e=Array(l),t=0,r=0;r<n;r++)for(var s=arguments[r],u=0,o=s.length;u<o;u++,t++)e[t]=s[u];return e}function se(l,r,n){if(n||arguments.length===2)for(var e=0,t=r.length,s;e<t;e++)(s||!(e in r))&&(s||(s=Array.prototype.slice.call(r,0,e)),s[e]=r[e]);return l.concat(s||Array.prototype.slice.call(r))}function C(l){return this instanceof C?(this.v=l,this):new C(l)}function oe(l,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n.apply(l,r||[]),t,s=[];return t=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",u),t[Symbol.asyncIterator]=function(){return this},t;function u(g){return function(y){return Promise.resolve(y).then(g,a)}}function o(g,y){e[g]&&(t[g]=function(f){return new Promise(function(m,d){s.push([g,f,m,d])>1||c(g,f)})},y&&(t[g]=y(t[g])))}function c(g,y){try{h(e[g](y))}catch(f){b(s[0][3],f)}}function h(g){g.value instanceof C?Promise.resolve(g.value.v).then(O,a):b(s[0][2],g)}function O(g){c("next",g)}function a(g){c("throw",g)}function b(g,y){g(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ae(l){var r,n;return r={},e("next"),e("throw",function(t){throw t}),e("return"),r[Symbol.iterator]=function(){return this},r;function e(t,s){r[t]=l[t]?function(u){return(n=!n)?{value:C(l[t](u)),done:!1}:s?s(u):u}:s}}function fe(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=l[Symbol.asyncIterator],n;return r?r.call(l):(l=typeof P=="function"?P(l):l[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n);function e(s){n[s]=l[s]&&function(u){return new Promise(function(o,c){u=l[s](u),t(o,c,u.done,u.value)})}}function t(s,u,o,c){Promise.resolve(c).then(function(h){s({value:h,done:o})},u)}}function ue(l,r){return Object.defineProperty?Object.defineProperty(l,"raw",{value:r}):l.raw=r,l}function ce(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var n=G(l),e=0;e<n.length;e++)n[e]!=="default"&&k(r,l,n[e]);return Pe(r,l),r}function he(l){return l&&l.__esModule?l:{default:l}}function ge(l,r,n,e){if(n==="a"&&!e)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?l!==r||!e:!r.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?e:n==="a"?e.call(l):e?e.value:r.get(l)}function pe(l,r,n,e,t){if(e==="m")throw new TypeError("Private method is not writable");if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?l!==r||!t:!r.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e==="a"?t.call(l,n):t?t.value=n:r.set(l,n),n}function ye(l,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?r===l:l.has(r)}function de(l,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var e,t;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=r[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=r[Symbol.dispose],n&&(t=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");t&&(e=function(){try{t.call(this)}catch(s){return Promise.reject(s)}}),l.stack.push({value:r,dispose:e,async:n})}else n&&l.stack.push({async:!0});return r}function me(l){function r(s){l.error=l.hasError?new ke(s,l.error,"An error was suppressed during disposal."):s,l.hasError=!0}var n,e=0;function t(){for(;n=l.stack.pop();)try{if(!n.async&&e===1)return e=0,l.stack.push(n),Promise.resolve().then(t);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return e|=2,Promise.resolve(s).then(t,function(u){return r(u),t()})}else e|=1}catch(u){r(u)}if(e===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return t()}function Oe(l,r){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,e,t,s,u){return e?r?".jsx":".js":t&&(!s||!u)?n:t+s+"."+u.toLowerCase()+"js"}):l}var U,I,k,Pe,G,ke,Fe,be=$e(()=>{U=function(l,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},U(l,r)};I=function(){return I=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},I.apply(this,arguments)};k=Object.create?function(l,r,n,e){e===void 0&&(e=n);var t=Object.getOwnPropertyDescriptor(r,n);(!t||("get"in t?!r.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(l,e,t)}:function(l,r,n,e){e===void 0&&(e=n),l[e]=r[n]};Pe=Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r},G=function(l){return G=Object.getOwnPropertyNames||function(r){var n=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[n.length]=e);return n},G(l)};ke=typeof SuppressedError=="function"?SuppressedError:function(l,r,n){var e=new Error(n);return e.name="SuppressedError",e.error=l,e.suppressed=r,e};Fe={__extends:H,__assign:I,__rest:M,__decorate:X,__param:Q,__esDecorate:W,__runInitializers:z,__propKey:Z,__setFunctionName:j,__metadata:ee,__awaiter:te,__generator:re,__createBinding:k,__exportStar:ne,__values:P,__read:V,__spread:ie,__spreadArrays:le,__spreadArray:se,__await:C,__asyncGenerator:oe,__asyncDelegator:ae,__asyncValues:fe,__makeTemplateObject:ue,__importStar:ce,__importDefault:he,__classPrivateFieldGet:ge,__classPrivateFieldSet:pe,__classPrivateFieldIn:ye,__addDisposableResource:de,__disposeResources:me,__rewriteRelativeImportExtension:Oe}});var we=B(q=>{(function(l){"use strict";var r=typeof process=="object"&&process.env?process.env:self;l.parser=function(p){return new a(p)},l.CParser=a,l.CStream=g,l.createStream=b,l.MAX_BUFFER_LENGTH=64*1024,l.DEBUG=r.CDEBUG==="debug",l.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",l.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n={textNode:void 0,numberNode:""},e=l.EVENTS.filter(function(p){return p!=="error"&&p!=="end"}),t=0,s;l.STATE={BEGIN:t++,VALUE:t++,OPEN_OBJECT:t++,CLOSE_OBJECT:t++,OPEN_ARRAY:t++,CLOSE_ARRAY:t++,TEXT_ESCAPE:t++,STRING:t++,BACKSLASH:t++,END:t++,OPEN_KEY:t++,CLOSE_KEY:t++,TRUE:t++,TRUE2:t++,TRUE3:t++,FALSE:t++,FALSE2:t++,FALSE3:t++,FALSE4:t++,NULL:t++,NULL2:t++,NULL3:t++,NUMBER_DECIMAL_POINT:t++,NUMBER_DIGIT:t++};for(var u in l.STATE)l.STATE[l.STATE[u]]=u;t=l.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(p){function i(){this.__proto__=p}return i.prototype=p,new i}),Object.getPrototypeOf||(Object.getPrototypeOf=function(p){return p.__proto__}),Object.keys||(Object.keys=function(p){var i=[];for(var w in p)p.hasOwnProperty(w)&&i.push(w);return i});function c(p){var i=Math.max(l.MAX_BUFFER_LENGTH,10),w=0;for(var N in n){var A=p[N]===void 0?0:p[N].length;if(A>i)switch(N){case"text":closeText(p);break;default:_(p,"Max buffer length exceeded: "+N)}w=Math.max(w,A)}p.bufferCheckPosition=l.MAX_BUFFER_LENGTH-w+p.position}function h(p){for(var i in n)p[i]=n[i]}var O=/[\\"\n]/g;function a(p){if(!(this instanceof a))return new a(p);var i=this;h(i),i.bufferCheckPosition=l.MAX_BUFFER_LENGTH,i.q=i.c=i.p="",i.opt=p||{},i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.state=t.BEGIN,i.stack=new Array,i.position=i.column=0,i.line=1,i.slashed=!1,i.unicodeI=0,i.unicodeS=null,i.depth=0,y(i,"onready")}a.prototype={end:function(){S(this)},write:R,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=Re("stream").Stream}catch{s=function(){}}function b(p){return new g(p)}function g(p){if(!(this instanceof g))return new g(p);this._parser=new a(p),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var i=this;s.apply(i),this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(w){i.emit("error",w),i._parser.error=null},e.forEach(function(w){Object.defineProperty(i,"on"+w,{get:function(){return i._parser["on"+w]},set:function(N){if(!N)return i.removeAllListeners(w),i._parser["on"+w]=N,N;i.on(w,N)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(s.prototype,{constructor:{value:g}}),g.prototype.write=function(p){p=new Buffer(p);for(var i=0;i<p.length;i++){var w=p[i];if(this.bytes_remaining>0){for(var N=0;N<this.bytes_remaining;N++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+N]=p[N];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,i=i+N-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&w>=128)if(w>=194&&w<=223&&(this.bytes_in_sequence=2),w>=224&&w<=239&&(this.bytes_in_sequence=3),w>=240&&w<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+i>p.length){for(var A=0;A<=p.length-1-i;A++)this.temp_buffs[this.bytes_in_sequence][A]=p[i+A];return this.bytes_remaining=i+this.bytes_in_sequence-p.length,!0}else{this.string=p.slice(i,i+this.bytes_in_sequence).toString(),i=i+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var v=i;v<p.length&&!(p[v]>=128);v++);this.string=p.slice(i,v).toString(),this._parser.write(this.string),this.emit("data",this.string),i=v-1}},g.prototype.end=function(p){return p&&p.length&&this._parser.write(p.toString()),this._parser.end(),!0},g.prototype.on=function(p,i){var w=this;return!w._parser["on"+p]&&e.indexOf(p)!==-1&&(w._parser["on"+p]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,p),w.emit.apply(w,N)}),s.prototype.on.call(w,p,i)},g.prototype.destroy=function(){h(this._parser),this.emit("close")};function y(p,i,w){l.INFO&&console.log("-- emit",i,w),p[i]&&p[i](w)}function f(p,i,w){m(p),y(p,i,w)}function m(p,i){p.textNode=E(p.opt,p.textNode),p.textNode!==void 0&&y(p,i||"onvalue",p.textNode),p.textNode=void 0}function d(p){p.numberNode&&y(p,"onvalue",parseFloat(p.numberNode)),p.numberNode=""}function E(p,i){return i===void 0||(p.trim&&(i=i.trim()),p.normalize&&(i=i.replace(/\s+/g," "))),i}function _(p,i){return m(p),i+=`
Line: `+p.line+`
Column: `+p.column+`
Char: `+p.c,i=new Error(i),p.error=i,y(p,"onerror",i),p}function S(p){return(p.state!==t.VALUE||p.depth!==0)&&_(p,"Unexpected end"),m(p),p.c="",p.closed=!0,y(p,"onend"),a.call(p,p.opt),p}function x(p){return p===o.carriageReturn||p===o.lineFeed||p===o.space||p===o.tab}function R(p){var i=this;if(this.error)throw this.error;if(i.closed)return _(i,"Cannot write after close. Assign an onready handler.");if(p===null)return S(i);var w=0,N=p.charCodeAt(0),A=i.p,v=!1;for(l.DEBUG&&console.log("write -> ["+p+"]");N&&(A=N,i.c=N=p.charCodeAt(w++),A!==N?i.p=A:A=i.p,!!N);)switch(l.DEBUG&&console.log(w,N,l.STATE[i.state]),v?v=!1:(i.position++,N===o.lineFeed?(i.line++,i.column=0):i.column++),i.state){case t.BEGIN:N===o.openBrace?i.state=t.OPEN_OBJECT:N===o.openBracket?i.state=t.OPEN_ARRAY:x(N)||_(i,"Non-whitespace before {[.");continue;case t.OPEN_KEY:case t.OPEN_OBJECT:if(x(N))continue;if(i.state===t.OPEN_KEY)i.stack.push(t.CLOSE_KEY);else if(N===o.closeBrace){y(i,"onopenobject"),this.depth++,y(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||t.VALUE;continue}else i.stack.push(t.CLOSE_OBJECT);N===o.doubleQuote?i.state=t.STRING:_(i,'Malformed object key should start with "');continue;case t.CLOSE_KEY:case t.CLOSE_OBJECT:if(x(N))continue;var Ge=i.state===t.CLOSE_KEY?"key":"object";N===o.colon?(i.state===t.CLOSE_OBJECT?(i.stack.push(t.CLOSE_OBJECT),m(i,"onopenobject"),this.depth++):m(i,"onkey"),i.state=t.VALUE):N===o.closeBrace?(f(i,"oncloseobject"),this.depth--,i.state=i.stack.pop()||t.VALUE):N===o.comma?(i.state===t.CLOSE_OBJECT&&i.stack.push(t.CLOSE_OBJECT),m(i),i.state=t.OPEN_KEY):_(i,"Bad object");continue;case t.OPEN_ARRAY:case t.VALUE:if(x(N))continue;if(i.state===t.OPEN_ARRAY)if(y(i,"onopenarray"),this.depth++,i.state=t.VALUE,N===o.closeBracket){y(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||t.VALUE;continue}else i.stack.push(t.CLOSE_ARRAY);N===o.doubleQuote?i.state=t.STRING:N===o.openBrace?i.state=t.OPEN_OBJECT:N===o.openBracket?i.state=t.OPEN_ARRAY:N===o.t?i.state=t.TRUE:N===o.f?i.state=t.FALSE:N===o.n?i.state=t.NULL:N===o.minus?i.numberNode+="-":o._0<=N&&N<=o._9?(i.numberNode+=String.fromCharCode(N),i.state=t.NUMBER_DIGIT):_(i,"Bad value");continue;case t.CLOSE_ARRAY:if(N===o.comma)i.stack.push(t.CLOSE_ARRAY),m(i,"onvalue"),i.state=t.VALUE;else if(N===o.closeBracket)f(i,"onclosearray"),this.depth--,i.state=i.stack.pop()||t.VALUE;else{if(x(N))continue;_(i,"Bad array")}continue;case t.STRING:i.textNode===void 0&&(i.textNode="");var L=w-1,J=i.slashed,$=i.unicodeI;e:for(;;){for(l.DEBUG&&console.log(w,N,l.STATE[i.state],J);$>0;)if(i.unicodeS+=String.fromCharCode(N),N=p.charCodeAt(w++),i.position++,$===4?(i.textNode+=String.fromCharCode(parseInt(i.unicodeS,16)),$=0,L=w-1):$++,!N)break e;if(N===o.doubleQuote&&!J){i.state=i.stack.pop()||t.VALUE,i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}if(N===o.backslash&&!J&&(J=!0,i.textNode+=p.substring(L,w-1),i.position+=w-1-L,N=p.charCodeAt(w++),i.position++,!N))break;if(J){if(J=!1,N===o.n?i.textNode+=`
`:N===o.r?i.textNode+="\r":N===o.t?i.textNode+="	":N===o.f?i.textNode+="\f":N===o.b?i.textNode+="\b":N===o.u?($=1,i.unicodeS=""):i.textNode+=String.fromCharCode(N),N=p.charCodeAt(w++),i.position++,L=w-1,N)continue;break}O.lastIndex=w;var F=O.exec(p);if(F===null){w=p.length+1,i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}if(w=F.index+1,N=p.charCodeAt(F.index),!N){i.textNode+=p.substring(L,w-1),i.position+=w-1-L;break}}i.slashed=J,i.unicodeI=$;continue;case t.TRUE:N===o.r?i.state=t.TRUE2:_(i,"Invalid true started with t"+N);continue;case t.TRUE2:N===o.u?i.state=t.TRUE3:_(i,"Invalid true started with tr"+N);continue;case t.TRUE3:N===o.e?(y(i,"onvalue",!0),i.state=i.stack.pop()||t.VALUE):_(i,"Invalid true started with tru"+N);continue;case t.FALSE:N===o.a?i.state=t.FALSE2:_(i,"Invalid false started with f"+N);continue;case t.FALSE2:N===o.l?i.state=t.FALSE3:_(i,"Invalid false started with fa"+N);continue;case t.FALSE3:N===o.s?i.state=t.FALSE4:_(i,"Invalid false started with fal"+N);continue;case t.FALSE4:N===o.e?(y(i,"onvalue",!1),i.state=i.stack.pop()||t.VALUE):_(i,"Invalid false started with fals"+N);continue;case t.NULL:N===o.u?i.state=t.NULL2:_(i,"Invalid null started with n"+N);continue;case t.NULL2:N===o.l?i.state=t.NULL3:_(i,"Invalid null started with nu"+N);continue;case t.NULL3:N===o.l?(y(i,"onvalue",null),i.state=i.stack.pop()||t.VALUE):_(i,"Invalid null started with nul"+N);continue;case t.NUMBER_DECIMAL_POINT:N===o.period?(i.numberNode+=".",i.state=t.NUMBER_DIGIT):_(i,"Leading zero not followed by .");continue;case t.NUMBER_DIGIT:o._0<=N&&N<=o._9?i.numberNode+=String.fromCharCode(N):N===o.period?(i.numberNode.indexOf(".")!==-1&&_(i,"Invalid number has two dots"),i.numberNode+="."):N===o.e||N===o.E?((i.numberNode.indexOf("e")!==-1||i.numberNode.indexOf("E")!==-1)&&_(i,"Invalid number has two exponential"),i.numberNode+="e"):N===o.plus||N===o.minus?(A===o.e||A===o.E||_(i,"Invalid symbol in number"),i.numberNode+=String.fromCharCode(N)):(d(i),w--,v=!0,i.state=i.stack.pop()||t.VALUE);continue;default:_(i,"Unknown state: "+i.state)}return i.position>=i.bufferCheckPosition&&c(i),i}})(typeof q>"u"?clarinet={}:q)});var _e=B(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.stringify=D.parse=void 0;var Te=(be(),Ie(Ne)),Be=Te.__importDefault(we());function Ue(l){let r=K(),n,e;function t(u){try{let o=r.next(u);o.done&&(n=o.value)}catch(o){e=o}}let s=Be.default.parser();if(s.onopenobject=u=>t({type:"openobject",key:u}),s.onopenarray=()=>t({type:"openarray"}),s.onkey=u=>t({type:"key",key:u}),s.onvalue=u=>t({type:"value",value:u}),s.oncloseobject=()=>t({type:"closeobject"}),s.onclosearray=()=>t({type:"closearray"}),s.onerror=u=>t({type:"error",err:u}),r.next(),s.write(l).close(),e)throw e;return n}D.parse=Ue;function Y(l){return Array.isArray(l)?`[${l.map(Y).join(",")}]`:l instanceof Map?`{${[...l].map(([r,n])=>JSON.stringify(r)+":"+Y(n)).join(",")}}`:JSON.stringify(l)}D.stringify=Y;var Ee=Symbol();function*K(){let l=yield;switch(l.type){case"value":return l.value;case"openobject":let r=new Map,n=l.key;for(n===void 0&&(yield);n!==void 0;)r.set(n,yield*K()),n=(yield).key;return r;case"openarray":let e=[],t;for(;;){if(t=yield*K(),t===Ee)return e;e.push(t)}case"closearray":return Ee;case"error":throw l.err;default:throw Error(`Unexpected ParseEvent ${l.type}`)}}});var Ae=B((He,xe)=>{var Se=_e().parse;xe.exports=class{constructor(r=!1){let n=this;if(this.indentation=4,[!0,!1,void 0].indexOf(r)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=r}template(r){let n=this;var e=r.raw[0];for(let s=1;s<r.raw.length;s++)typeof arguments[s]=="string"?e+='"'+arguments[s]+'"':e+=arguments[s],e+=r.raw[s];return n._treeToMap(n._damonToTree(e))}damonToMap(r){let n=this,e=n._damonToTree(r);return e===!0||e===!1||e===null||typeof e=="string"||typeof e=="number"?e:n._treeToMap(n._damonToTree(r))}damonToJSON(r){let n=this;return n.mapToJSON(n.damonToMap(r))}jsonToDamon(r){let n=this;return n.mapToDamon(n.jsonToMap(r),!1)}jsonToMap(r){var e=this._getLines(r,"JSON");if(e=e.filter(t=>!/^ *\/\//.test(t)),e=e.filter(t=>t!=""),e=e.filter(t=>!/^[ \t]+$/.test(t)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="string",t}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1){let t=new Error("Error line number 1: leading 0");throw t.line=1,t.language="DAMON",t}try{return JSON.parse(e[0]*1)}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="number",t}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(t){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),t.line=1,t.language="JSON",t.type="infinity",t}else return Se(r)}else return Se(r)}_getLines(r,n="DAMON"){if(["DAMON","JSON"].indexOf(n)==-1)throw new Error("Bad language argument, expected 'DAMON' or 'JSON'");if(r===""){let s=new Error("Error line 1: empty string");throw s.line=1,s.language=n,s}if(/[\s]/.test(r)&&r.match(new RegExp(/[\s]/))[0].length==r.length){let s=new Error("Error line 1: string only contains whitespace");throw s.line=1,s.language=n,s}var e=/\r\n/.test(r)?`\r
`:`
`,t=r.split(e);if(/\\*\n/.test(r)&&e==`
`){if(/[^\\]\\(\\\\)*\n/.test(r)){let o=r.split(/[^\\]\\(\\\\)*\n/)[0].split(`
`).length,c=new Error("Error line "+o+": oddly escaped newline");throw c.line=o,c.language=n,c}t=r.split("").reverse().join("").split(/\n/).map(o=>o.split("").reverse().join("")).reverse()}return t}_damonToTree(r){let n=this,e=n._getLines(r),t=e.slice(0);if(e=e.filter(f=>!/^ *\/\//.test(f)),e=e.filter(f=>f!=""),e=e.filter(f=>!/^[ \t]+$/.test(f)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(f){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),f.line=1,f.language="JSON",f.type="string",f}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1){let f=new Error("Error line number 1: leading 0");throw f.line=1,f.language="DAMON",f}try{return JSON.parse(e[0]*1)}catch(f){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),f.line=1,f.language="JSON",f.type="number",f}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(f){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),f.line=1,f.language="JSON",f.type="infinity",f}}let s=0,u=[];for(let f=0,m=t.length;f<m;f++)e.slice(s).indexOf(t[f])>-1?u[f]=e.slice(s).indexOf(t[f]):u[f]=null;let o=new RegExp("^(\\t)+");for(let f=0,m=e.length;f<m;f++){if(o.test(e[f])){let d=e[f].match(o)[0].length;for(let E=0,_=d;E<_;E++)e[f]=e[f].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(e[f])&&/[ \t]+$/.test(e[f])){let d=new Error("Error line "+(u.indexOf(f)+1)+": trailing whitespace");throw d.line=u.indexOf(f)+1,d.language="DAMON",d}}let c=new RegExp("^("+" ".repeat(n.indentation)+")+");if(c.test(e[0])){let f=e[0].match(c)[0].length,m=!0;for(let d=0,E=e.length;d<E;d++)c.test(e[d])&&e[d].match(c)[0].length>=f?e[d]=e[d].slice(f):m=!1;if(!m){let d=new Error("Error line 1: bad formatting");throw d.line=1,d.language="DAMON",d}}else if(c.test(e[1])&&e[1].match(c)[0].length>n.indentation){let f=e[1].match(c)[0].length-n.indentation,m=!0;for(let d=1,E=e.length;d<E;d++)c.test(e[d])&&e[d].match(c)[0].length>=f?e[d]=e[d].slice(f):m=!1;if(!m){let d=new Error("Error line 2: bad formatting");throw d.line=2,d.language="DAMON",d}}let h=!1;if(e.length>1)for(let f=0,m=e.length;f<m;f++)f!==0&&/^- /.test(e[f])&&(h=!0);if(!/^- \{\}$/.test(e[0])&&!/^- \[\]$/.test(e[0])&&(h=!0),h){for(let f=0,m=e.length;f<m;f++)e[f]=" ".repeat(n.indentation)+e[f];e.unshift("- {}")}var O={content:e[0],level:0,id:0,children:[],headless:h,damonOriginalLinesMapping:u},a=O;if(!/^- /.test(e[0].trimStart())||/^ +/.test(e[0])&&(e[0].match(/^ +/)[0].length%n.indentation!=0||e[0].match(/^ +/)[0].length!=n.indentation)){let f=new Error("Error line "+(h*1+1)+": bad formatting");throw f.line=h*1+1,f.language="DAMON",f}e.shift();for(let f=0,m=e.length;f<m;f++){if(!/^- /.test(e[f].trimStart())||/^ +/.test(e[f])&&(e[f].match(/^ +/)[0].length%n.indentation!=0||f==0&&e[f].match(/^ +/)[0].length!=n.indentation||f!=0&&/^- /.test(e[f-1])&&e[f].match(/^ +/)[0].length!=n.indentation||f!=0&&!/^- /.test(e[f-1])&&e[f].match(/^ +/)[0].length>e[f-1].match(/^ +/)[0].length+n.indentation)){console.log(e[f]);let E=new Error("Error line "+(u.indexOf(f)+1)+": bad formatting");throw E.line=u.indexOf(f)+1,E.language="DAMON",E}let d={content:e[f].trimStart().slice(2),level:1+e[f].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(a===O)d.id=O.children.length+1,O.children.push(d);else if(a.level===d.level){var b=n._findListItemCommonDirectParent(a,O);b.level==0?d.id=b.children.length+1:d.id=b.id+"-"+(b.children.length+1),b.children.push(d)}else if(a.level>d.level){var g=n._findListItemCommonAncestor(a,O,d.level);g.level==0?d.id=g.children.length+1:d.id=g.id+"-"+(g.children.length+1),g.children.push(d)}else if(a.level<d.level){var y=n._findListItemCommonDirectParent(a,O);let E=y.children.indexOf(a),_=y.children[E].id,S=y.children[E].children.length+1;d.id=_+"-"+S,y.children[E].children.push(d)}a=d}return O}_findListItemCommonDirectParent(r,n){let e=this;if(n.children.indexOf(r)>-1)return n;var t;for(let s=n.children.length-1,u=0;s>=u;s--)if(t=e._findListItemCommonDirectParent(r,n.children[s]),t)return t}_findListItemCommonAncestor(r,n,e){let t=this;var s=t._findListItemCommonDirectParent(r,n);return s.level<e?s:t._findListItemCommonAncestor(s,n,e)}_treeToMap(r){let n=this;var e=0;if(r.content=="- {}"){let o=new Map;return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,t(r,o)}else if(r.content=="- []"){let o=[];return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,t(r,o)}else{let o=new Map;return o.damonOriginalLinesMapping=r.damonOriginalLinesMapping,r.headless&&(o.headless=!0),t(r,o)}function t(o,c){if(typeof o!="object"||o==null||Array.isArray(o)){let h=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,O=new Error("Error line number "+h+": @param { {} } tree");throw O.line=h,O.language="DAMON",O}if(typeof c=="object"&&c!==null&&!Array.isArray(c)&&c instanceof Map&&c.constructor===Map)s(o,c);else if(Array.isArray(c))u(o,c);else{let h=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,O=new Error("Error line number "+h+": @param { {} | [] } jsonMap");throw O.line=h,O.language="DAMON",O}return c}function s(o,c){for(let h=0,O=o.children.length;h<O;h++)if(e++,o.children[h].content.length==0){let a="";o.children[h].children.length>0?(a="implicit map key",c.set("",new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(""),t(o.children[h],c.get(""))):(a="implicit null key",c.set("",null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(""))}else{let a=o.children[h].content,b="key";try{if(/^.*: +\[/.test(a)&&a[a.length-1]=="]")if(/: +\[ *\]$/.test(a)){let g=JSON.parse(`["${a.slice(0,-1*a.match(/: +\[ *\]$/)[0].length)}"]`)[0];c.set(g,[]),o.children[h].children.length>0&&t(o.children[h],c.get(g))}else{let g=new RegExp(/: +\[/g),y=a.slice(0,-1).split(g),f=a.match(g).concat([""]),m=y.map((S,x)=>S+f[x]),d="",E=[];for(let S=0,x=y.length;S<x;S++)try{let R;if(S==0?R=y[0]:R=m.slice(0,S).join("")+y[S],d=JSON.parse(`["${R}"]`)[0],b="list",E=JSON.parse(`[${m.slice(S+1).join("")}]`),Array.isArray(E))break}catch{if(S==x-2){let p=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,i=new Error("Error line number "+p+": invalid inline list");throw i.line=p,i.language="DAMON",i}}if(E.every(function(S){return S===!0||S===!1||S===null||typeof S=="string"?!0:!!(isFinite(S)&&!isNaN(parseFloat(S))&&Number.isFinite(S*1)&&!Number.isNaN(S*1))}))c.set(d,E),c.damonInlineArrays===void 0&&(c.damonInlineArrays=[]),c.damonInlineArrays.push(d);else{let S=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(e-1)+2,x=new Error("Error line number "+S+": no nesting in inline lists");throw x.line=S,x.language="DAMON",x}if(o.children[h].children.length>0){let S=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,x=new Error("Error line number "+S+": inline lists can't have children");throw x.line=S,x.language="DAMON",x}}else if(/: +\{ *\}$/.test(a)){let g=JSON.parse(`["${a.slice(0,-1*a.match(/: +\{ *\}$/)[0].length)}"]`)[0];c.set(g,new Map),t(o.children[h],c.get(g))}else{let g=!1;if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="true"){let y=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],f=JSON.parse(`["${a.slice(0,-1*y.length-4)}"]`)[0];c.set(f,!0)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="false"){let y=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],f=JSON.parse(`["${a.slice(0,-1*y.length-5)}"]`)[0];c.set(f,!1)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]==="null"){let y=a.match(new RegExp(/: +/g))[a.match(new RegExp(/: +/g)).length-1],f=JSON.parse(`["${a.slice(0,-1*y.length-4)}"]`)[0];c.set(f,null)}else if(/^.*: +"/.test(a)&&a[a.length-1]=='"'){let y=a.match(new RegExp(/: +"/g));if(y.length==1){let f=JSON.parse(`["${a.split(y[0])[0]}"]`)[0];b="string";let m=JSON.parse(`["${a.split(y[0]).slice(1).join("").slice(0,-1)}"]`)[0];c.set(f,m)}else if(y.length==2&&/: +"$/.test(a)){let f=JSON.parse(`["${a.split(y[0])[0]}"]`)[0];b="string";let m=JSON.parse(`["${a.split(y[0]).slice(1).join("")+": "}"]`)[0];c.set(f,m)}else{let f=+(r.headless*-1)+r.damonOriginalLinesMapping.indexOf(e-1)+2,m=new Error("Error line number "+f+": unescaped double quote");throw m.line=f,m.language="DAMON",m}}else if(/^.*: /.test(a)&&isFinite(a.split(": ")[a.split(": ").length-1])&&!isNaN(parseFloat(a.split(": ")[a.split(": ").length-1]))&&Number.isFinite(a.split(": ")[a.split(": ").length-1]*1)&&!Number.isNaN(a.split(": ")[a.split(": ").length-1]*1)){let y=JSON.parse(`["${a.split(": ").slice(0,-1).join(": ")}"]`)[0];b="number";let f=a.match(new RegExp(/: +/g)),m=f[f.length-1],d=a.split(m)[a.split(m).length-1];if(d.indexOf(0)==0&&d.length>1&&d.indexOf(".")!==1){let _=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,S=new Error("Error line number "+_+": leading 0");throw S.line=_,S.language="DAMON",S}let E=JSON.parse(`[${a.split(": ")[a.split(": ").length-1]*1}]`)[0];c.set(y,E)}else if(/^.*: /.test(a)&&a.split(new RegExp(/: +/))[a.split(new RegExp(/: +/)).length-1]*1===1/0){let y=JSON.parse(`["${a.split(": ").slice(0,-1).join(": ")}"]`)[0];b="infinity";let f=JSON.parse(`[${a.split(": ")[a.split(": ").length-1]*1}]`)}else{let y=!1,f=0;if(/\[ *\]$/.test(a)&&(y=!0,f=a.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(a)&&(y=!0,f=a.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(a)&&(y=!0,f=4),/false$/.test(a)&&(y=!0,f=5),/null$/.test(a)&&(y=!0,f=4),/".*"$/.test(a)&&(y=!0,f=a.match(new RegExp(/".*"$/g))[0].length),!y){let m="";for(let d=a.length-1;d>-1&&(m=a[d].concat(m),isFinite(m)&&!isNaN(parseFloat(m))&&Number.isFinite(m*1)&&!Number.isNaN(m*1));d--){if(!/[ \t]/.test(a[d]))break;y=!0,f=m.length}}if(y)if(JSON.parse(`["${a.slice(0,-1*f)}"]`)[0],n.pedantic){let m=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),d=new Error("Error line number "+m+": missing separator");throw d.line=m,d.language="DAMON",d.errorType="pedantic",d}else if(g=!0,o.children[h].children.length>0){b="implicit map key";let m=JSON.parse(`["${a}"]`)[0];c.set(m,new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(m),t(o.children[h],c.get(m))}else{b="implicit null key";let m=JSON.parse(`["${a}"]`)[0];c.set(m,null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(m)}else{let m=JSON.parse(`["${a.slice(0,-1*f)}"]`)[0];if(n.pedantic)if(/: +$/.test(m)){let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),E=new Error("Error line number "+d+": bad value");throw E.line=d,E.language="DAMON",E.errorType="pedantic",E}else{let d=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e),E=new Error("Error line number "+d+": missing separator");throw E.line=d,E.language="DAMON",E.errorType="pedantic",E}else if(g=!0,o.children[h].children.length>0){b="implicit map key";let d=JSON.parse(`["${a}"]`)[0];c.set(d,new Map),c.implicitMaps===void 0&&(c.implicitMaps=[]),c.implicitMaps.push(d),t(o.children[h],c.get(d))}else{b="implicit null key";let d=JSON.parse(`["${a}"]`)[0];c.set(d,null),c.implicitNulls===void 0&&(c.implicitNulls=[]),c.implicitNulls.push(d)}}}if(!g&&o.children[h].children.length>0){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,f=new Error("Error line number "+y+": missing container or excess indentation");throw f.line=y,f.language="DAMON",f}}}catch(g){if(g.language===void 0){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;console.error("Error line number "+y+": not JSON-compliant, detailed error follows"),g.line=y,g.language="JSON",g.type=b}throw g}}}function u(o,c){for(let h=0,O=o.children.length;h<O;h++)if(e++,o.children[h].content.length){let a=o.children[h].content;if(/^[ \t]*\[/.test(a)&&a[a.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(a))c.push([]),t(o.children[h],c[c.length-1]);else{let b;try{b=JSON.parse(a)}catch{let f=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,m=new Error("Error line number "+f+": invalid inline lists");throw m.line=f,m.language="JSON",m.type="list",m}if(b.every(function(y){return y===!0||y===!1||y===null||typeof y=="string"?!0:!!(isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1))}))c.push(b),c.damonInlineArrays===void 0&&(c.damonInlineArrays=[]),c.damonInlineArrays.push(h);else{let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,f=new Error("Error line number "+y+": no nesting in inline lists");throw f.line=y,f.language="DAMON",f}if(o.children[h].children.length>0){let y=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+3,f=new Error("Error line number "+y+": inline lists can't have children");throw f.line=y,f.language="DAMON",f}}else if(/^[ \t]*\{\}$/.test(a))c.push(new Map),t(o.children[h],c[c.length-1]);else if(/^[ \t]*true$/.test(a))c.push(!0);else if(/^[ \t]*false$/.test(a))c.push(!1);else if(/^[ \t]*null$/.test(a))c.push(null);else if(/^[ \t]*".*"$/.test(a))try{c.push(JSON.parse(`[${a.trimStart()}]`)[0])}catch(b){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+g+": not JSON-compliant, detailed error follows"),b.line=g,b.language="JSON",b.type="string",b}else if(isFinite(a)&&!isNaN(parseFloat(a))&&Number.isFinite(a*1)&&!Number.isNaN(a*1)){if(a.indexOf(0)==0&&a.length>1&&a.indexOf(".")!==1){let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,g=new Error("Error line number "+b+": leading 0");throw g.line=b,g.language="DAMON",g}try{c.push(JSON.parse(`[${a*1}]`)[0])}catch(b){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+g+": not JSON-compliant, detailed error follows"),b.line=g,b.language="JSON",b.type="number",b}}else if(a*1===1/0)try{JSON.parse(a*1)}catch(b){let g=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2;throw console.error("Error line number "+g+": not JSON-compliant, detailed error follows"),b.line=g,b.language="JSON",b.type="infinity",b}else{let b=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,g=new Error("Error line number "+b+": list items can't have a key");throw g.line=b,g.language="DAMON",g}}else{let a=r.headless*-1+r.damonOriginalLinesMapping.indexOf(e-1)+2,b=new Error("Error line number "+a+": empty list node");throw b.line=a,b.language="DAMON",b}}}mapToDamon(r,n){let e=this;var t="";if(Array.isArray(r))t+=`- []
`;else if(typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map)t+=`- {}
`;else return typeof r=="string"&&(r='"'+r+'"'),JSON.parse(r),r;return s(r),e.damonToMap(t.slice(0,-1)),t.slice(0,-1);function s(u,o=1){if(typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map)for(let[O,a]of u)if(typeof a=="object"&&a!==null)if(Array.isArray(a)){let b=0,g=a.filter(function(y){return y===!0||y===!1?!0:y===null?(b++,!0):typeof y=="string"?!0:!!(isFinite(y)&&!isNaN(parseFloat(y))&&Number.isFinite(y*1)&&!Number.isNaN(y*1))});if(a.length==g.length&&o*4+2+a.join(", ").length+b*4<=80||n&&u.damonInlineArrays!==void 0&&u.damonInlineArrays.indexOf(O)>-1){let y="["+a.map(function(f){return typeof f=="string"&&(f=JSON.stringify(f)),f}).join(", ")+"]";t+="    ".repeat(o)+"- "+JSON.stringify(O).slice(1,-1)+": "+y+`
`}else t+="    ".repeat(o)+"- "+JSON.stringify(O).slice(1,-1)+`: []
`,s(a,o+1)}else t+="    ".repeat(o)+"- "+JSON.stringify(O).slice(1,-1)+`: {}
`,s(a,o+1);else t+="    ".repeat(o)+"- "+JSON.stringify(O).slice(1,-1)+": ",a===!0?t+=`true
`:a===!1?t+=`false
`:a===null?t+=`null
`:Number.isFinite(a)&&!Number.isNaN(a)?t+=a+`
`:t+=JSON.stringify(a)+`
`;else if(Array.isArray(u))for(var c=0,h=u.length;c<h;c++)if(typeof u[c]=="object"&&u[c]!==null)if(Array.isArray(u[c])){let O=0,a=u[c].filter(function(b){return b===!0||b===!1?!0:b===null?(O++,!0):typeof b=="string"?!0:!!(isFinite(b)&&!isNaN(parseFloat(b))&&Number.isFinite(b*1)&&!Number.isNaN(b*1))});if(u[c].length==a.length&&o*4+2+u[c].join(", ").length+O*4<=80||n&&u.damonInlineArrays!==void 0&&u.damonInlineArrays.indexOf(c)>-1){let b="["+u[c].map(function(g){return typeof g=="string"&&(g=JSON.stringify(g)),g}).join(", ")+"]";t+="    ".repeat(o)+"- "+b+`
`}else t+="    ".repeat(o)+`- []
`,s(u[c],o+1)}else t+="    ".repeat(o)+`- {}
`,s(u[c],o+1);else u[c]===!0?t+="    ".repeat(o)+`- true
`:u[c]===!1?t+="    ".repeat(o)+`- false
`:u[c]===null?t+="    ".repeat(o)+`- null
`:Number.isFinite(u[c])&&!Number.isNaN(u[c])?t+="    ".repeat(o)+"- "+u[c]+`
`:t+="    ".repeat(o)+"- "+JSON.stringify(u[c])+`
`}}mapToJSON(r){let n=this;var e="";if(Array.isArray(r))return e+=`[\r
`,t(r),e+="]",JSON.parse(e),e;return typeof r=="object"&&r!==null&&r instanceof Map&&r.constructor===Map?(e+=`{\r
`,t(r),e+="}",JSON.parse(e),e):(typeof r=="string"&&(r=JSON.stringify(r)),JSON.parse(r),r);function t(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[h,O]of s)typeof O=="object"&&O!==null?Array.isArray(O)?O.length>0?(e+="    ".repeat(u)+`${JSON.stringify(h)}: [\r
`,t(O,u+1),e+="    ".repeat(u)+"]"):e+="    ".repeat(u)+`${JSON.stringify(h)}: []`:Array.from(O.keys()).length>0?(e+="    ".repeat(u)+`${JSON.stringify(h)}: {\r
`,t(O,u+1),e+="    ".repeat(u)+"}"):e+="    ".repeat(u)+`${JSON.stringify(h)}: {}`:O===!0?e+="    ".repeat(u)+`${JSON.stringify(h)}: true`:O===!1?e+="    ".repeat(u)+`${JSON.stringify(h)}: false`:O===null?e+="    ".repeat(u)+`${JSON.stringify(h)}: null`:Number.isFinite(O)&&!Number.isNaN(O)?e+="    ".repeat(u)+`${JSON.stringify(h)}: `+O:e+="    ".repeat(u)+`${JSON.stringify(h)}: `+JSON.stringify(O),h!=Array.from(s.keys())[Array.from(s.keys()).length-1]?e+=`,\r
`:e+=`\r
`;else if(Array.isArray(s))for(var o=0,c=s.length;o<c;o++)typeof s[o]=="object"&&s[o]!==null?Array.isArray(s[o])?s[o].length>0?(e+="    ".repeat(u)+`[\r
`,t(s[o],u+1),e+="    ".repeat(u)+"]"):e+="    ".repeat(u)+"[]":Array.from(s[o].keys()).length>0?(e+="    ".repeat(u)+`{\r
`,t(s[o],u+1),e+="    ".repeat(u)+"}"):e+="    ".repeat(u)+"{}":s[o]===!0?e+="    ".repeat(u)+"true":s[o]===!1?e+="    ".repeat(u)+"false":s[o]===null?e+="    ".repeat(u)+"null":Number.isFinite(s[o])&&!Number.isNaN(s[o])?e+="    ".repeat(u)+s[o]:e+="    ".repeat(u)+JSON.stringify(s[o]),o!=c-1?e+=`,\r
`:e+=`\r
`}}getRangeFromPath(r,n){let e=this,t=e.damonToMap(r),s=-1,u=!1;b(t,n),t.headless&&(s-=1);let o=0,c=0;for(let g=0,y=t.damonOriginalLinesMapping.length;g<y;g++)if(t.damonOriginalLinesMapping[g]!==null&&c++,c==s){o=g+1;break}let h=e._getLines(r)[o],O=0,a=h.length;if(n.length==1)typeof n[n.length-1]=="string"?O=h.length-h.trimStart().slice(2+n[n.length-1].length+2).trimStart().length:O=h.length-h.trimStart().slice(2).length;else if(typeof n[n.length-2]=="string")if(typeof n[n.length-1]=="string")O=h.length-h.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(h[h.length-1]=="]"&&!/\[ *\]$/.test(h)){let g=h.trimStart().slice(2+n[n.length-2].length+2),y=JSON.parse(g),f=y.slice(0,n[n.length-1].length).reduce((E,_)=>E+(_===y[n[n.length-1]]),0),m=0,d=y[n[n.length-1]];typeof d=="string"&&(d='"'+d+'"');for(let E=0,_=f+1;E<_;E++)m=g.indexOf(d,m);O=h.length-g.length+m,a=O+d.length}else O=h.length-h.trimStart().slice(2).length;else if(typeof n[n.length-1]=="string")O=h.length-h.trimStart().slice(2+n[n.length-1].length+2).trimStart().length;else if(h[h.length-1]=="]"&&!/\[ *\]$/.test(h)){let g=h.trimStart().slice(2),y=JSON.parse(g),f=y.slice(0,n[n.length-1]).reduce((E,_)=>E+(_===y[n[n.length-1]]),0),m=0,d=y[n[n.length-1]];typeof d=="string"&&(d='"'+d+'"');for(let E=0,_=f+1;E<_;E++)m=g.indexOf(d,m);O=h.length-g.length+m,a=O+d.length}else O=h.length-h.trimStart().slice(2).length;return[[o,O],[o,a]];function b(g,y,f=[]){if(u!=!0)if(s+=1,typeof g=="object"&&g!==null&&!Array.isArray(g)&&g instanceof Map&&g.constructor===Map)for(let[m,d]of g){if(s+=1,JSON.stringify(y)===JSON.stringify(f.concat([m]))){u=!0;return}typeof d=="object"&&d!==null&&!Array.isArray(d)&&d instanceof Map&&d.constructor===Map&&Array.from(d.keys()).length?(s-=1,b(d,y,f.concat([m]))):Array.isArray(d)&&(g.damonInlineArrays==null||g.damonInlineArrays.indexOf(m)===-1)&&d.length&&(s-=1,b(d,y,f.concat([m])))}else for(let m=0,d=g.length;m<d;m++){if(s+=1,JSON.stringify(y)===JSON.stringify(f.concat([m]))){u=!0;return}typeof g[m]=="object"&&g[m]!==null&&!Array.isArray(g[m])&&g[m]instanceof Map&&g[m].constructor===Map&&Array.from(g[m].keys()).length?(s-=1,b(g[m],y,f.concat([m]))):Array.isArray(g[m])&&(g.damonInlineArrays==null||g.damonInlineArrays.indexOf(m)===-1)&&g[m].length&&(s-=1,b(g[m],y,f.concat([m])))}}}getTokenFromCoordinates(r,n){let e=this,t={},s=e._getLines(r).slice(0,n[0]);if(s[n[0]-1]=="")return t.type="newline",t.path=null,t.range=[n,n],t;if(/^[ \t]+$/.test(s[n[0]-1]))return t.type="indentation",t.path=null,t.range=[[n[0],1],[n[0],s[s.length-1].length]],t;if(/^[ \t]+/.test(s[n[0]-1].slice(0,n[1]-1))&&(t.type="indentation",t.range=[[n[0],1],[n[0],s[n[0]-1].match(/^[ \t]+/)[0].length]]),/^ *\/\//.test(s[n[0]-1]))return t.type=="indentation"?(t.path=null,t):(t.type="comment",t.path=null,t.range=[[[n[0],s[n[0]-1].split("//")[0].length]],[[n[0],s[n[0]-1].length]]],t);if(s.length==1)try{let O=JSON.parse(r);if(O===!0||O===!1||O===null||typeof O=="string"||typeof O=="number"){let a=r.match(/^ */)[0].length,b=r.match(/ *$/)[0].length;return t.type="null",typeof O!="object"&&(t.type=typeof O),t.path=null,t.range=[[0,a],[0,r.length-b]],t}}catch{}let u=e.damonToMap(s.join(`
`)),o=Array.from(u.keys()),c=[];for(;o.length;){let O=o[o.length-1];if(c.push(O),typeof u=="object"&&u!==null&&!Array.isArray(u)&&u instanceof Map&&u.constructor===Map?u=u.get(O):Array.isArray(u)&&(u=u[O]),u===!0||u===!1||u===null||typeof u=="string"||typeof u=="number")break;o=Array.from(u.keys())}t.path=c;let h=e.getRangeFromPath(r,c);if(typeof c[c.length-1]=="string")if(n[1]<h[0][1]){let O=s[n[0]-1].slice(0,-1*(h[1][1]-h[0][1])-1).length;if(n[1]<O){let a=s[n[0]-1].match(/^[ \t]+/)[0].length+3;n[1]>=a?(t.type="property",t.range=[[n[0],a],[n[0],O]]):(t.type="hyphen",t.range=[[n[0],a-2],[n[0],a-1]])}else t.type="separator",t.range=[[n[0],O+1],[n[0],h[0][1]-1]]}else t.type="?",t.range=h;else if(n[1]<h[0][1]){t.type="hyphen";let O=s[n[0]-1].match(/^[ \t]+/)[0].length+1;t.range=[[n[0],O],[n[0],O+1]]}else t.type="?",t.range=h;return t}}});(function(){window.Damon=Ae()})();})();
