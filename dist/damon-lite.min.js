(()=>{var ve=Object.create;var B=Object.defineProperty;var Ce=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Te=Object.getPrototypeOf,Re=Object.prototype.hasOwnProperty;var De=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var ke=(a,t)=>()=>(a&&(t=a(a=0)),t);var U=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),Pe=(a,t)=>{for(var n in t)B(a,n,{get:t[n],enumerable:!0})},z=(a,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of $e(t))!Re.call(a,e)&&e!==n&&B(a,e,{get:()=>t[e],enumerable:!(r=Ce(t,e))||r.enumerable});return a};var Fe=(a,t,n)=>(n=a!=null?ve(Te(a)):{},z(t||!a||!a.__esModule?B(n,"default",{value:a,enumerable:!0}):n,a)),Ue=a=>z(B({},"__esModule",{value:!0}),a);var Ne={};Pe(Ne,{__addDisposableResource:()=>me,__assign:()=>I,__asyncDelegator:()=>fe,__asyncGenerator:()=>oe,__asyncValues:()=>ue,__await:()=>k,__awaiter:()=>re,__classPrivateFieldGet:()=>de,__classPrivateFieldIn:()=>ye,__classPrivateFieldSet:()=>ge,__createBinding:()=>G,__decorate:()=>j,__disposeResources:()=>Oe,__esDecorate:()=>Be,__exportStar:()=>ne,__extends:()=>M,__generator:()=>ie,__importDefault:()=>pe,__importStar:()=>he,__makeTemplateObject:()=>ce,__metadata:()=>te,__param:()=>ee,__propKey:()=>qe,__read:()=>K,__rest:()=>Z,__runInitializers:()=>Ie,__setFunctionName:()=>Ge,__spread:()=>le,__spreadArray:()=>ae,__spreadArrays:()=>se,__values:()=>q,default:()=>Ke});function M(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Y(a,t);function n(){this.constructor=a}a.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Z(a,t){var n={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(a);e<r.length;e++)t.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(a,r[e])&&(n[r[e]]=a[r[e]]);return n}function j(a,t,n,r){var e=arguments.length,s=e<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(a,t,n,r);else for(var o=a.length-1;o>=0;o--)(u=a[o])&&(s=(e<3?u(s):e>3?u(t,n,s):u(t,n))||s);return e>3&&s&&Object.defineProperty(t,n,s),s}function ee(a,t){return function(n,r){t(n,r,a)}}function Be(a,t,n,r,e,s){function u(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var o=r.kind,d=o==="getter"?"get":o==="setter"?"set":"value",y=!t&&a?r.static?a:a.prototype:null,m=t||(y?Object.getOwnPropertyDescriptor(y,r.name):{}),f,b=!1,E=n.length-1;E>=0;E--){var O={};for(var p in r)O[p]=p==="access"?{}:r[p];for(var p in r.access)O.access[p]=r.access[p];O.addInitializer=function(N){if(b)throw new TypeError("Cannot add initializers after decoration has completed");s.push(u(N||null))};var _=(0,n[E])(o==="accessor"?{get:m.get,set:m.set}:m[d],O);if(o==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(f=u(_.get))&&(m.get=f),(f=u(_.set))&&(m.set=f),(f=u(_.init))&&e.unshift(f)}else(f=u(_))&&(o==="field"?e.unshift(f):m[d]=f)}y&&Object.defineProperty(y,r.name,m),b=!0}function Ie(a,t,n){for(var r=arguments.length>2,e=0;e<t.length;e++)n=r?t[e].call(a,n):t[e].call(a);return r?n:void 0}function qe(a){return typeof a=="symbol"?a:"".concat(a)}function Ge(a,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function te(a,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,t)}function re(a,t,n,r){function e(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function o(m){try{y(r.next(m))}catch(f){u(f)}}function d(m){try{y(r.throw(m))}catch(f){u(f)}}function y(m){m.done?s(m.value):e(m.value).then(o,d)}y((r=r.apply(a,t||[])).next())})}function ie(a,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,e,s,u;return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(y){return function(m){return d([y,m])}}function d(y){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,y[0]&&(n=0)),n;)try{if(r=1,e&&(s=y[0]&2?e.return:y[0]?e.throw||((s=e.return)&&s.call(e),0):e.next)&&!(s=s.call(e,y[1])).done)return s;switch(e=0,s&&(y=[y[0]&2,s.value]),y[0]){case 0:case 1:s=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,e=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!s||y[1]>s[0]&&y[1]<s[3])){n.label=y[1];break}if(y[0]===6&&n.label<s[1]){n.label=s[1],s=y;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(y);break}s[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(a,n)}catch(m){y=[6,m],e=0}finally{r=s=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function ne(a,t){for(var n in a)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&G(t,a,n)}function q(a){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&a[t],r=0;if(n)return n.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&r>=a.length&&(a=void 0),{value:a&&a[r++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(a,t){var n=typeof Symbol=="function"&&a[Symbol.iterator];if(!n)return a;var r=n.call(a),e,s=[],u;try{for(;(t===void 0||t-- >0)&&!(e=r.next()).done;)s.push(e.value)}catch(o){u={error:o}}finally{try{e&&!e.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return s}function le(){for(var a=[],t=0;t<arguments.length;t++)a=a.concat(K(arguments[t]));return a}function se(){for(var a=0,t=0,n=arguments.length;t<n;t++)a+=arguments[t].length;for(var r=Array(a),e=0,t=0;t<n;t++)for(var s=arguments[t],u=0,o=s.length;u<o;u++,e++)r[e]=s[u];return r}function ae(a,t,n){if(n||arguments.length===2)for(var r=0,e=t.length,s;r<e;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return a.concat(s||Array.prototype.slice.call(t))}function k(a){return this instanceof k?(this.v=a,this):new k(a)}function oe(a,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(a,t||[]),e,s=[];return e={},u("next"),u("throw"),u("return"),e[Symbol.asyncIterator]=function(){return this},e;function u(b){r[b]&&(e[b]=function(E){return new Promise(function(O,p){s.push([b,E,O,p])>1||o(b,E)})})}function o(b,E){try{d(r[b](E))}catch(O){f(s[0][3],O)}}function d(b){b.value instanceof k?Promise.resolve(b.value.v).then(y,m):f(s[0][2],b)}function y(b){o("next",b)}function m(b){o("throw",b)}function f(b,E){b(E),s.shift(),s.length&&o(s[0][0],s[0][1])}}function fe(a){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(e,s){t[e]=a[e]?function(u){return(n=!n)?{value:k(a[e](u)),done:!1}:s?s(u):u}:s}}function ue(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=a[Symbol.asyncIterator],n;return t?t.call(a):(a=typeof q=="function"?q(a):a[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=a[s]&&function(u){return new Promise(function(o,d){u=a[s](u),e(o,d,u.done,u.value)})}}function e(s,u,o,d){Promise.resolve(d).then(function(y){s({value:y,done:o})},u)}}function ce(a,t){return Object.defineProperty?Object.defineProperty(a,"raw",{value:t}):a.raw=t,a}function he(a){if(a&&a.__esModule)return a;var t={};if(a!=null)for(var n in a)n!=="default"&&Object.prototype.hasOwnProperty.call(a,n)&&G(t,a,n);return Ve(t,a),t}function pe(a){return a&&a.__esModule?a:{default:a}}function de(a,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?a!==t||!r:!t.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(a):r?r.value:t.get(a)}function ge(a,t,n,r,e){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!e)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?a!==t||!e:!t.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?e.call(a,n):e?e.value=n:t.set(a,n),n}function ye(a,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof a=="function"?t===a:a.has(t)}function me(a,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");a.stack.push({value:t,dispose:r,async:n})}else n&&a.stack.push({async:!0});return t}function Oe(a){function t(r){a.error=a.hasError?new Ye(r,a.error,"An error was suppressed during disposal."):r,a.hasError=!0}function n(){for(;a.stack.length;){var r=a.stack.pop();try{var e=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(e).then(n,function(s){return t(s),n()})}catch(s){t(s)}}if(a.hasError)throw a.error}return n()}var Y,I,G,Ve,Ye,Ke,be=ke(()=>{Y=function(a,t){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])},Y(a,t)};I=function(){return I=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},I.apply(this,arguments)};G=Object.create?function(a,t,n,r){r===void 0&&(r=n);var e=Object.getOwnPropertyDescriptor(t,n);(!e||("get"in e?!t.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(a,r,e)}:function(a,t,n,r){r===void 0&&(r=n),a[r]=t[n]};Ve=Object.create?function(a,t){Object.defineProperty(a,"default",{enumerable:!0,value:t})}:function(a,t){a.default=t};Ye=typeof SuppressedError=="function"?SuppressedError:function(a,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=a,r.suppressed=t,r};Ke={__extends:M,__assign:I,__rest:Z,__decorate:j,__param:ee,__metadata:te,__awaiter:re,__generator:ie,__createBinding:G,__exportStar:ne,__values:q,__read:K,__spread:le,__spreadArrays:se,__spreadArray:ae,__await:k,__asyncGenerator:oe,__asyncDelegator:fe,__asyncValues:ue,__makeTemplateObject:ce,__importStar:he,__importDefault:pe,__classPrivateFieldGet:de,__classPrivateFieldSet:ge,__classPrivateFieldIn:ye,__addDisposableResource:me,__disposeResources:Oe}});var Ee=U(H=>{(function(a){"use strict";var t=typeof process=="object"&&process.env?process.env:self;a.parser=function(h){return new f(h)},a.CParser=f,a.CStream=E,a.createStream=b,a.MAX_BUFFER_LENGTH=64*1024,a.DEBUG=t.CDEBUG==="debug",a.INFO=t.CDEBUG==="debug"||t.CDEBUG==="info",a.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var n={textNode:void 0,numberNode:""},r=a.EVENTS.filter(function(h){return h!=="error"&&h!=="end"}),e=0,s;a.STATE={BEGIN:e++,VALUE:e++,OPEN_OBJECT:e++,CLOSE_OBJECT:e++,OPEN_ARRAY:e++,CLOSE_ARRAY:e++,TEXT_ESCAPE:e++,STRING:e++,BACKSLASH:e++,END:e++,OPEN_KEY:e++,CLOSE_KEY:e++,TRUE:e++,TRUE2:e++,TRUE3:e++,FALSE:e++,FALSE2:e++,FALSE3:e++,FALSE4:e++,NULL:e++,NULL2:e++,NULL3:e++,NUMBER_DECIMAL_POINT:e++,NUMBER_DIGIT:e++};for(var u in a.STATE)a.STATE[a.STATE[u]]=u;e=a.STATE;let o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(h){function l(){this.__proto__=h}return l.prototype=h,new l}),Object.getPrototypeOf||(Object.getPrototypeOf=function(h){return h.__proto__}),Object.keys||(Object.keys=function(h){var l=[];for(var w in h)h.hasOwnProperty(w)&&l.push(w);return l});function d(h){var l=Math.max(a.MAX_BUFFER_LENGTH,10),w=0;for(var g in n){var L=h[g]===void 0?0:h[g].length;if(L>l)switch(g){case"text":closeText(h);break;default:x(h,"Max buffer length exceeded: "+g)}w=Math.max(w,L)}h.bufferCheckPosition=a.MAX_BUFFER_LENGTH-w+h.position}function y(h){for(var l in n)h[l]=n[l]}var m=/[\\"\n]/g;function f(h){if(!(this instanceof f))return new f(h);var l=this;y(l),l.bufferCheckPosition=a.MAX_BUFFER_LENGTH,l.q=l.c=l.p="",l.opt=h||{},l.closed=l.closedRoot=l.sawRoot=!1,l.tag=l.error=null,l.state=e.BEGIN,l.stack=new Array,l.position=l.column=0,l.line=1,l.slashed=!1,l.unicodeI=0,l.unicodeS=null,l.depth=0,O(l,"onready")}f.prototype={end:function(){S(this)},write:R,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{s=De("stream").Stream}catch{s=function(){}}function b(h){return new E(h)}function E(h){if(!(this instanceof E))return new E(h);this._parser=new f(h),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var l=this;s.apply(l),this._parser.onend=function(){l.emit("end")},this._parser.onerror=function(w){l.emit("error",w),l._parser.error=null},r.forEach(function(w){Object.defineProperty(l,"on"+w,{get:function(){return l._parser["on"+w]},set:function(g){if(!g)return l.removeAllListeners(w),l._parser["on"+w]=g,g;l.on(w,g)},enumerable:!0,configurable:!1})})}E.prototype=Object.create(s.prototype,{constructor:{value:E}}),E.prototype.write=function(h){h=new Buffer(h);for(var l=0;l<h.length;l++){var w=h[l];if(this.bytes_remaining>0){for(var g=0;g<this.bytes_remaining;g++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+g]=h[g];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,l=l+g-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&w>=128)if(w>=194&&w<=223&&(this.bytes_in_sequence=2),w>=224&&w<=239&&(this.bytes_in_sequence=3),w>=240&&w<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+l>h.length){for(var L=0;L<=h.length-1-l;L++)this.temp_buffs[this.bytes_in_sequence][L]=h[l+L];return this.bytes_remaining=l+this.bytes_in_sequence-h.length,!0}else{this.string=h.slice(l,l+this.bytes_in_sequence).toString(),l=l+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var $=l;$<h.length&&!(h[$]>=128);$++);this.string=h.slice(l,$).toString(),this._parser.write(this.string),this.emit("data",this.string),l=$-1}},E.prototype.end=function(h){return h&&h.length&&this._parser.write(h.toString()),this._parser.end(),!0},E.prototype.on=function(h,l){var w=this;return!w._parser["on"+h]&&r.indexOf(h)!==-1&&(w._parser["on"+h]=function(){var g=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);g.splice(0,0,h),w.emit.apply(w,g)}),s.prototype.on.call(w,h,l)},E.prototype.destroy=function(){y(this._parser),this.emit("close")};function O(h,l,w){a.INFO&&console.log("-- emit",l,w),h[l]&&h[l](w)}function p(h,l,w){_(h),O(h,l,w)}function _(h,l){h.textNode=A(h.opt,h.textNode),h.textNode!==void 0&&O(h,l||"onvalue",h.textNode),h.textNode=void 0}function N(h){h.numberNode&&O(h,"onvalue",parseFloat(h.numberNode)),h.numberNode=""}function A(h,l){return l===void 0||(h.trim&&(l=l.trim()),h.normalize&&(l=l.replace(/\s+/g," "))),l}function x(h,l){return _(h),l+=`
Line: `+h.line+`
Column: `+h.column+`
Char: `+h.c,l=new Error(l),h.error=l,O(h,"onerror",l),h}function S(h){return(h.state!==e.VALUE||h.depth!==0)&&x(h,"Unexpected end"),_(h),h.c="",h.closed=!0,O(h,"onend"),f.call(h,h.opt),h}function v(h){return h===o.carriageReturn||h===o.lineFeed||h===o.space||h===o.tab}function R(h){var l=this;if(this.error)throw this.error;if(l.closed)return x(l,"Cannot write after close. Assign an onready handler.");if(h===null)return S(l);var w=0,g=h.charCodeAt(0),L=l.p,$=!1;for(a.DEBUG&&console.log("write -> ["+h+"]");g&&(L=g,l.c=g=h.charCodeAt(w++),L!==g?l.p=L:L=l.p,!!g);)switch(a.DEBUG&&console.log(w,g,a.STATE[l.state]),$?$=!1:(l.position++,g===o.lineFeed?(l.line++,l.column=0):l.column++),l.state){case e.BEGIN:g===o.openBrace?l.state=e.OPEN_OBJECT:g===o.openBracket?l.state=e.OPEN_ARRAY:v(g)||x(l,"Non-whitespace before {[.");continue;case e.OPEN_KEY:case e.OPEN_OBJECT:if(v(g))continue;if(l.state===e.OPEN_KEY)l.stack.push(e.CLOSE_KEY);else if(g===o.closeBrace){O(l,"onopenobject"),this.depth++,O(l,"oncloseobject"),this.depth--,l.state=l.stack.pop()||e.VALUE;continue}else l.stack.push(e.CLOSE_OBJECT);g===o.doubleQuote?l.state=e.STRING:x(l,'Malformed object key should start with "');continue;case e.CLOSE_KEY:case e.CLOSE_OBJECT:if(v(g))continue;var Ze=l.state===e.CLOSE_KEY?"key":"object";g===o.colon?(l.state===e.CLOSE_OBJECT?(l.stack.push(e.CLOSE_OBJECT),_(l,"onopenobject"),this.depth++):_(l,"onkey"),l.state=e.VALUE):g===o.closeBrace?(p(l,"oncloseobject"),this.depth--,l.state=l.stack.pop()||e.VALUE):g===o.comma?(l.state===e.CLOSE_OBJECT&&l.stack.push(e.CLOSE_OBJECT),_(l),l.state=e.OPEN_KEY):x(l,"Bad object");continue;case e.OPEN_ARRAY:case e.VALUE:if(v(g))continue;if(l.state===e.OPEN_ARRAY)if(O(l,"onopenarray"),this.depth++,l.state=e.VALUE,g===o.closeBracket){O(l,"onclosearray"),this.depth--,l.state=l.stack.pop()||e.VALUE;continue}else l.stack.push(e.CLOSE_ARRAY);g===o.doubleQuote?l.state=e.STRING:g===o.openBrace?l.state=e.OPEN_OBJECT:g===o.openBracket?l.state=e.OPEN_ARRAY:g===o.t?l.state=e.TRUE:g===o.f?l.state=e.FALSE:g===o.n?l.state=e.NULL:g===o.minus?l.numberNode+="-":o._0<=g&&g<=o._9?(l.numberNode+=String.fromCharCode(g),l.state=e.NUMBER_DIGIT):x(l,"Bad value");continue;case e.CLOSE_ARRAY:if(g===o.comma)l.stack.push(e.CLOSE_ARRAY),_(l,"onvalue"),l.state=e.VALUE;else if(g===o.closeBracket)p(l,"onclosearray"),this.depth--,l.state=l.stack.pop()||e.VALUE;else{if(v(g))continue;x(l,"Bad array")}continue;case e.STRING:l.textNode===void 0&&(l.textNode="");var C=w-1,T=l.slashed,D=l.unicodeI;e:for(;;){for(a.DEBUG&&console.log(w,g,a.STATE[l.state],T);D>0;)if(l.unicodeS+=String.fromCharCode(g),g=h.charCodeAt(w++),l.position++,D===4?(l.textNode+=String.fromCharCode(parseInt(l.unicodeS,16)),D=0,C=w-1):D++,!g)break e;if(g===o.doubleQuote&&!T){l.state=l.stack.pop()||e.VALUE,l.textNode+=h.substring(C,w-1),l.position+=w-1-C;break}if(g===o.backslash&&!T&&(T=!0,l.textNode+=h.substring(C,w-1),l.position+=w-1-C,g=h.charCodeAt(w++),l.position++,!g))break;if(T){if(T=!1,g===o.n?l.textNode+=`
`:g===o.r?l.textNode+="\r":g===o.t?l.textNode+="	":g===o.f?l.textNode+="\f":g===o.b?l.textNode+="\b":g===o.u?(D=1,l.unicodeS=""):l.textNode+=String.fromCharCode(g),g=h.charCodeAt(w++),l.position++,C=w-1,g)continue;break}m.lastIndex=w;var V=m.exec(h);if(V===null){w=h.length+1,l.textNode+=h.substring(C,w-1),l.position+=w-1-C;break}if(w=V.index+1,g=h.charCodeAt(V.index),!g){l.textNode+=h.substring(C,w-1),l.position+=w-1-C;break}}l.slashed=T,l.unicodeI=D;continue;case e.TRUE:g===o.r?l.state=e.TRUE2:x(l,"Invalid true started with t"+g);continue;case e.TRUE2:g===o.u?l.state=e.TRUE3:x(l,"Invalid true started with tr"+g);continue;case e.TRUE3:g===o.e?(O(l,"onvalue",!0),l.state=l.stack.pop()||e.VALUE):x(l,"Invalid true started with tru"+g);continue;case e.FALSE:g===o.a?l.state=e.FALSE2:x(l,"Invalid false started with f"+g);continue;case e.FALSE2:g===o.l?l.state=e.FALSE3:x(l,"Invalid false started with fa"+g);continue;case e.FALSE3:g===o.s?l.state=e.FALSE4:x(l,"Invalid false started with fal"+g);continue;case e.FALSE4:g===o.e?(O(l,"onvalue",!1),l.state=l.stack.pop()||e.VALUE):x(l,"Invalid false started with fals"+g);continue;case e.NULL:g===o.u?l.state=e.NULL2:x(l,"Invalid null started with n"+g);continue;case e.NULL2:g===o.l?l.state=e.NULL3:x(l,"Invalid null started with nu"+g);continue;case e.NULL3:g===o.l?(O(l,"onvalue",null),l.state=l.stack.pop()||e.VALUE):x(l,"Invalid null started with nul"+g);continue;case e.NUMBER_DECIMAL_POINT:g===o.period?(l.numberNode+=".",l.state=e.NUMBER_DIGIT):x(l,"Leading zero not followed by .");continue;case e.NUMBER_DIGIT:o._0<=g&&g<=o._9?l.numberNode+=String.fromCharCode(g):g===o.period?(l.numberNode.indexOf(".")!==-1&&x(l,"Invalid number has two dots"),l.numberNode+="."):g===o.e||g===o.E?((l.numberNode.indexOf("e")!==-1||l.numberNode.indexOf("E")!==-1)&&x(l,"Invalid number has two exponential"),l.numberNode+="e"):g===o.plus||g===o.minus?(L===o.e||L===o.E||x(l,"Invalid symbol in number"),l.numberNode+=String.fromCharCode(g)):(N(l),w--,$=!0,l.state=l.stack.pop()||e.VALUE);continue;default:x(l,"Unknown state: "+l.state)}return l.position>=l.bufferCheckPosition&&d(l),l}})(typeof H>"u"?clarinet={}:H)});var _e=U(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.stringify=P.parse=void 0;var He=(be(),Ue(Ne)),Xe=He.__importDefault(Ee());function Qe(a){let t=Q(),n,r;function e(u){try{let o=t.next(u);o.done&&(n=o.value)}catch(o){r=o}}let s=Xe.default.parser();if(s.onopenobject=u=>e({type:"openobject",key:u}),s.onopenarray=()=>e({type:"openarray"}),s.onkey=u=>e({type:"key",key:u}),s.onvalue=u=>e({type:"value",value:u}),s.oncloseobject=()=>e({type:"closeobject"}),s.onclosearray=()=>e({type:"closearray"}),s.onerror=u=>e({type:"error",err:u}),t.next(),s.write(a).close(),r)throw r;return n}P.parse=Qe;function X(a){return Array.isArray(a)?`[${a.map(X).join(",")}]`:a instanceof Map?`{${[...a].map(([t,n])=>JSON.stringify(t)+":"+X(n)).join(",")}}`:JSON.stringify(a)}P.stringify=X;var we=Symbol();function*Q(){let a=yield;switch(a.type){case"value":return a.value;case"openobject":let t=new Map,n=a.key;for(n===void 0&&(yield);n!==void 0;)t.set(n,yield*Q()),n=(yield).key;return t;case"openarray":let r=[],e;for(;;){if(e=yield*Q(),e===we)return r;r.push(e)}case"closearray":return we;case"error":throw a.err;default:throw Error(`Unexpected ParseEvent ${a.type}`)}}});var Se=U((it,xe)=>{var W=Fe(_e());xe.exports=class{constructor(t=!1){let n=this;if(this.indentation=4,[!0,!1,void 0].indexOf(t)==-1)throw new Error("@param {Boolean} pedantic");this.pedantic=t,this.damonOriginalLinesMapping=[],this.utils=new DamonUtils}template(t){let n=this;var r=t[0];for(let s=1;s<t.length;s++)typeof arguments[s]=="string"?r+='"'+arguments[s]+'"':r+=arguments[s],r+=t[s];return n._treeToMap(n._damonToTree(r))}damonToMap(t){let n=this,r=n._damonToTree(t);return r===!0||r===!1||r===null||typeof r=="string"||typeof r=="number"?r:n._treeToMap(n._damonToTree(t))}damonToJSON(t){let n=this;return n.mapToJSON(n.damonToMap(t))}damonToSExpression(t){let n=this;return n.implicitMapToSExpression(n.damonToMap(t))}jsonToDamon(t){let n=this;return n.mapToDamon(n.jsonToMap(t))}jsonToMap(t){let n=this;var r=/\r\n/.test(t)?`\r
`:`
`,e=t.split(r);if(e=e.filter(s=>!/^ *\/\//.test(s)),e=e.filter(s=>s!=""),e=e.filter(s=>!/^[ \t]+$/.test(s)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(s){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),s.line=1,s.language="JSON",s.type="string",s}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1)throw new Error("Error line number 1: leading 0",{line:1,language:"DAMON"});try{return JSON.parse(e[0]*1)}catch(s){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),s.line=1,s.language="JSON",s.type="number",s}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(s){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),s.line=1,s.language="JSON",s.type="infinity",s}else return(0,W.parse)(t)}else return(0,W.parse)(t)}_damonToTree(t){let n=this;if(t==="")throw new Error("Error line 1: empty string",{line:1,language:"DAMON"});if(/[\s]/.test(t)&&t.match(new RegExp(/[\s]/))[0].length==t.length)throw new Error("Error line 1: string only contains whitespace",{line:1,language:"DAMON"});var r=/\r\n/.test(t)?`\r
`:`
`,e=t.split(r),s=e.slice(0);if(e=e.filter(p=>!/^ *\/\//.test(p)),e=e.filter(p=>p!=""),e=e.filter(p=>!/^[ \t]+$/.test(p)),e.length==1){if(["true","false","null"].indexOf(e[0].trim())>-1)return JSON.parse(e[0]);if(/^".*"$/.test(e[0].trim()))try{return JSON.parse(e[0].trim())}catch(p){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),p.line=1,p.language="JSON",p.type="string",p}else if(isFinite(e[0])&&!isNaN(parseFloat(e[0]))&&Number.isFinite(e[0]*1)&&!Number.isNaN(e[0]*1)){if(e[0].indexOf(0)==0&&e[0].length>1&&e[0].indexOf(".")!==1)throw new Error("Error line number 1: leading 0",{line:1,language:"DAMON"});try{return JSON.parse(e[0]*1)}catch(p){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),p.line=1,p.language="JSON",p.type="number",p}}else if(e[0]*1===1/0)try{JSON.parse(e[0]*1)}catch(p){throw console.error("Error line number 1: not JSON-compliant, detailed error follows"),p.line=1,p.language="JSON",p.type="infinity",p}}let u=0;n.damonOriginalLinesMapping=[];for(let p=0,_=s.length;p<_;p++)e.slice(u).indexOf(s[p])>-1?n.damonOriginalLinesMapping[p]=e.slice(u).indexOf(s[p]):n.damonOriginalLinesMapping[p]=null;let o=new RegExp("^(	)+");for(let p=0,_=e.length;p<_;p++){if(o.test(e[p])){let N=e[p].match(o)[0].length;for(let A=0,x=N;A<x;A++)e[p]=e[p].replace("	"," ".repeat(n.indentation))}if(!/^ *- $/.test(e[p])&&/[ \t]+$/.test(e[p]))throw new Error("Error line "+(n.damonOriginalLinesMapping.indexOf(p)+1)+": trailing whitespace",{line:n.damonOriginalLinesMapping.indexOf(p)+1,language:"DAMON"})}let d=new RegExp("^("+" ".repeat(n.indentation)+")+");if(d.test(e[0])){let p=e[0].match(d)[0].length,_=!0;for(let N=0,A=e.length;N<A;N++)d.test(e[N])&&e[N].match(d)[0].length>=p?e[N]=e[N].slice(p):_=!1;if(!_)throw new Error("Error line 1: bad formatting",{line:1,language:"DAMON"})}else if(d.test(e[1])&&e[1].match(d)[0].length>n.indentation){let p=e[1].match(d)[0].length-n.indentation,_=!0;for(let N=1,A=e.length;N<A;N++)d.test(e[N])&&e[N].match(d)[0].length>=p?e[N]=e[N].slice(p):_=!1;if(!_)throw new Error("Error line 2: bad formatting",{line:2,language:"DAMON"})}let y=!1;if(e.length>1)for(let p=0,_=e.length;p<_;p++)p!==0&&/^- /.test(e[p])&&(y=!0);if(!/^- \{\}$/.test(e[0])&&!/^- \[\]$/.test(e[0])&&(y=!0),y){for(let p=0,_=e.length;p<_;p++)e[p]=" ".repeat(n.indentation)+e[p];e.unshift("- {}")}var m={content:e[0],level:0,id:0,children:[],headless:y},f=m;if(!/^- /.test(e[0].trimStart())||/^ +/.test(e[0])&&(e[0].match(/^ +/)[0].length%n.indentation!=0||e[0].match(/^ +/)[0].length!=n.indentation))throw new Error("Error line "+(y*1+1)+": bad formatting",{line:y*1+1,language:"DAMON"});e.shift();for(let p=0,_=e.length;p<_;p++){if(!/^- /.test(e[p].trimStart())||/^ +/.test(e[p])&&(e[p].match(/^ +/)[0].length%n.indentation!=0||p==0&&e[p].match(/^ +/)[0].length!=n.indentation||p!=0&&/^- /.test(e[p-1])&&e[p].match(/^ +/)[0].length!=n.indentation||p!=0&&!/^- /.test(e[p-1])&&e[p].match(/^ +/)[0].length>e[p-1].match(/^ +/)[0].length+n.indentation))throw new Error("Error line "+(n.damonOriginalLinesMapping.indexOf(p)+1)+": bad formatting",{line:n.damonOriginalLinesMapping.indexOf(p)+1,language:"DAMON"});let N={content:e[p].trimStart().slice(2),level:1+e[p].match(/^ +/)[0].length/n.indentation,id:"",children:[]};if(f===m)N.id=m.children.length+1,m.children.push(N);else if(f.level===N.level){var b=n._findListItemCommonDirectParent(f,m);b.level==0?N.id=b.children.length+1:N.id=b.id+"-"+(b.children.length+1),b.children.push(N)}else if(f.level>N.level){var E=n._findListItemCommonAncestor(f,m,N.level);E.level==0?N.id=E.children.length+1:N.id=E.id+"-"+(E.children.length+1),E.children.push(N)}else if(f.level<N.level){var O=n._findListItemCommonDirectParent(f,m);let A=O.children.indexOf(f),x=O.children[A].id,S=O.children[A].children.length+1;N.id=x+"-"+S,O.children[A].children.push(N)}f=N}return m}_findListItemCommonDirectParent(t,n){let r=this;if(n.children.indexOf(t)>-1)return n;var e;for(let s=n.children.length-1,u=0;s>=u;s--)if(e=r._findListItemCommonDirectParent(t,n.children[s]),e)return e}_findListItemCommonAncestor(t,n,r){let e=this;var s=e._findListItemCommonDirectParent(t,n);return s.level<r?s:e._findListItemCommonAncestor(s,n,r)}_treeToMap(t){let n=this;var r=0;if(t.content=="- {}")return e(t,new Map);if(t.content=="- []")return e(t,[]);{let o=new Map;return t.headless&&(o.headless=!0),e(t,o)}function e(o,d){if(typeof o!="object"||o==null||Array.isArray(o))throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": @param { {} } tree",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"});if(typeof d=="object"&&d!==null&&!Array.isArray(d)&&d instanceof Map&&d.constructor===Map)s(o,d);else if(Array.isArray(d))u(o,d);else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": @param { {} | [] } jsonMap",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"});return d}function s(o,d){for(let y=0,m=o.children.length;y<m;y++)if(r++,o.children[y].content.length==0){let f;o.children[y].children.length>0?(f="implicit map key",d.set("",new Map),d.implicitMaps===void 0&&(d.implicitMaps=[]),d.implicitMaps.push(""),e(o.children[y],d.get(""))):(f="implicit null key",d.set("",null),d.implicitNulls===void 0&&(d.implicitNulls=[]),d.implicitNulls.push(""))}else{let f=o.children[y].content,b="key";try{if(/^.*: +\[/.test(f)&&f[f.length-1]=="]")if(/: +\[ *\]$/.test(f)){let E=JSON.stringify(JSON.parse(`["${f.slice(0,-1*f.match(/: +\[ *\]$/)[0].length)}"]`)[0]).slice(1,-1);d.set(E,[]),o.children[y].children.length>0&&e(o.children[y],d.get(E))}else{let E=new RegExp(/: +\[/g),O=f.slice(0,-1).split(E),p=f.match(E).concat([""]),_=O.map((S,v)=>S+p[v]),N="",A=[];for(let S=0,v=O.length;S<v;S++)try{let R;if(S==0?R=O[0]:R=_.slice(0,S).join("")+O[S],N=JSON.stringify(JSON.parse(`["${R}"]`)[0]).slice(1,-1),b="list",A=JSON.parse(`[${_.slice(S+1).join("")}]`),Array.isArray(A))break}catch{if(S==v-2)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": invalid inline list",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"})}if(A.every(function(S){return S===!0||S===!1?!0:S===null?(nullsCounter++,!0):typeof S=="string"?!0:!!(isFinite(S)&&!isNaN(parseFloat(S))&&Number.isFinite(S*1)&&!Number.isNaN(S*1))}))d.set(N,A),d.inlineArrays===void 0&&(d.inlineArrays=[]),d.inlineArrays.push(N);else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": no nesting in inline lists",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"});if(o.children[y].children.length>0)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3)+": inline lists can't have children",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3,language:"DAMON"})}else if(/: +\{ *\}$/.test(f)){let E=JSON.stringify(JSON.parse(`["${f.slice(0,-1*f.match(/: +\{ *\}$/)[0].length)}"]`)[0]).slice(1,-1);d.set(E,new Map),e(o.children[y],d.get(E))}else{let E=!1;if(f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]==="true"){let O=f.match(new RegExp(/: +/g))[f.match(new RegExp(/: +/g)).length-1],p=JSON.stringify(JSON.parse(`["${f.slice(0,-1*O.length-4)}"]`)[0]).slice(1,-1);d.set(p,!0)}else if(f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]==="false"){let O=f.match(new RegExp(/: +/g))[f.match(new RegExp(/: +/g)).length-1],p=JSON.stringify(JSON.parse(`["${f.slice(0,-1*O.length-5)}"]`)[0]).slice(1,-1);d.set(p,!1)}else if(f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]=="null"){let O=f.match(new RegExp(/: +/g))[f.match(new RegExp(/: +/g)).length-1],p=JSON.stringify(JSON.parse(`["${f.slice(0,-1*O.length-4)}"]`)[0]).slice(1,-1);d.set(p,null)}else if(/^.*: +"/.test(f)&&f[f.length-1]=='"'){let O=f.match(new RegExp(/: +"/g));if(O.length==1){let p=JSON.stringify(JSON.parse(`["${f.split(O[0])[0]}"]`)[0]).slice(1,-1);b="string";let _=JSON.stringify(JSON.parse(`["${f.split(O[0]).slice(1).join("").slice(0,-1)}"]`)[0]).slice(1,-1);d.set(p,_)}else if(O.length==2&&/: +"$/.test(f)){let p=JSON.stringify(JSON.parse(`["${f.split(O[0])[0]}"]`)[0]).slice(1,-1);b="string";let _=JSON.stringify(JSON.parse(`["${f.split(O[0]).slice(1).join("")+": "}"]`)[0]).slice(1,-1);d.set(p,_)}else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": unescaped double quote",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"})}else if(/^.*: /.test(f)&&isFinite(f.split(": ")[f.split(": ").length-1])&&!isNaN(parseFloat(f.split(": ")[f.split(": ").length-1]))&&Number.isFinite(f.split(": ")[f.split(": ").length-1]*1)&&!Number.isNaN(f.split(": ")[f.split(": ").length-1]*1)){let O=JSON.stringify(JSON.parse(`["${f.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);b="number";let p=f.match(new RegExp(/: +/g)),_=p[p.length-1],N=f.split(_)[f.split(_).length-1];if(N.indexOf(0)==0&&N.length>1&&N.indexOf(".")!==1)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": leading 0",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"});let A=JSON.stringify(JSON.parse(`[${f.split(": ")[f.split(": ").length-1]*1}]`)[0])*1;d.set(O,A)}else if(/^.*: /.test(f)&&f.split(new RegExp(/: +/))[f.split(new RegExp(/: +/)).length-1]*1===1/0){let O=JSON.stringify(JSON.parse(`["${f.split(": ").slice(0,-1).join(": ")}"]`)[0]).slice(1,-1);b="infinity";let p=JSON.stringify(JSON.parse(`[${f.split(": ")[f.split(": ").length-1]*1}]`))*1}else{let O=!1,p=0;if(/\[ *\]$/.test(f)&&(O=!0,p=f.match(new RegExp(/\[ *\]$/g))[0].length),/\{ *\}$/.test(f)&&(O=!0,p=f.match(new RegExp(/\{ *\}$/g))[0].length),/true$/.test(f)&&(O=!0,p=4),/false$/.test(f)&&(O=!0,p=5),/null$/.test(f)&&(O=!0,p=4),/".*"$/.test(f)&&(O=!0,p=f.match(new RegExp(/".*"$/g))[0].length),!O){let _="";for(let N=f.length-1;N>-1&&(_=f[N].concat(_),isFinite(_)&&!isNaN(parseFloat(_))&&Number.isFinite(_*1)&&!Number.isNaN(_*1));N--){if(!/[ \t]/.test(f[N]))break;O=!0,p=_.length}}if(O){let _=JSON.stringify(JSON.parse(`["${f.slice(0,-1*p)}"]`)[0]).slice(1,-1);if(n.pedantic)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r))+": missing separator",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r),language:"DAMON",errorType:"pedantic"});if(/: +$/.test(_))if(E=!0,o.children[y].children.length>0){b="implicit map key";let N=JSON.stringify(JSON.parse(`["${f}"]`)[0]).slice(1,-1);d.set(N,new Map),d.implicitMaps===void 0&&(d.implicitMaps=[]),d.implicitMaps.push(N),e(o.children[y],d.get(N))}else{b="implicit null key";let N=JSON.stringify(JSON.parse(`["${f}"]`)[0]).slice(1,-1);d.set(N,null),d.implicitNulls===void 0&&(d.implicitNulls=[]),d.implicitNulls.push(N)}else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r))+": missing separator",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r),language:"DAMON",errorType:"pedantic"})}else{let _=JSON.stringify(JSON.parse(`["${f.slice(0,-1*p)}"]`)[0]).slice(1,-1);if(n.pedantic)throw/: +$/.test(_)?new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3)+": bad value",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r),language:"DAMON",errorType:"pedantic"}):new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r))+": missing separator",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r),language:"DAMON",errorType:"pedantic"});if(E=!0,o.children[y].children.length>0){b="implicit map key";let N=JSON.stringify(JSON.parse(`["${f}"]`)[0]).slice(1,-1);d.set(N,new Map),d.implicitMaps===void 0&&(d.implicitMaps=[]),d.implicitMaps.push(N),e(o.children[y],d.get(N))}else{b="implicit null key";let N=JSON.stringify(JSON.parse(`["${f}"]`)[0]).slice(1,-1);d.set(N,null),d.implicitNulls===void 0&&(d.implicitNulls=[]),d.implicitNulls.push(N)}}}if(!E&&o.children[y].children.length>0)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3)+": missing container or excess indentation",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3,language:"DAMON"})}}catch(E){throw E.language===void 0&&(console.error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": not JSON-compliant, detailed error follows"),E.line=t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,E.language="JSON",E.type=b),E}}}function u(o,d){for(let y=0,m=o.children.length;y<m;y++)if(r++,o.children[y].content.length){let f=o.children[y].content;if(/^[ \t]*\[/.test(f)&&f[f.length-1]=="]")if(/^[ \t]*\[ *\]$/.test(f))d.push([]),e(o.children[y],d[d.length-1]);else{let b;try{b=JSON.parse(f)}catch{throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": invalid inline lists",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"JSON",type:"list"})}if(b.every(function(O){return O===!0||O===!1?!0:O===null?(nullsCounter++,!0):typeof O=="string"?!0:!!(isFinite(O)&&!isNaN(parseFloat(O))&&Number.isFinite(O*1)&&!Number.isNaN(O*1))}))d.push(b),d.inlineArrays===void 0&&(d.inlineArrays=[]),d.inlineArrays.push(y);else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": no nesting in inline lists",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"});if(o.children[y].children.length>0)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3)+": inline lists can't have children",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+3,language:"DAMON"})}else if(/^[ \t]*\{\}$/.test(f))d.push(new Map),e(o.children[y],d[d.length-1]);else if(/^[ \t]*true$/.test(f))d.push(!0);else if(/^[ \t]*false$/.test(f))d.push(!1);else if(/^[ \t]*null$/.test(f))d.push(null);else if(/^[ \t]*".*"$/.test(f))try{d.push(JSON.stringify(JSON.parse(`[${f.trimStart()}]`)[0]).slice(1,-1))}catch(b){throw console.error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": not JSON-compliant, detailed error follows"),b.line=t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,b.language="JSON",b.type="string",b}else if(isFinite(f)&&!isNaN(parseFloat(f))&&Number.isFinite(f*1)&&!Number.isNaN(f*1)){if(f.indexOf(0)==0&&f.length>1&&f.indexOf(".")!==1)throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": leading 0",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"});try{d.push(JSON.stringify(JSON.parse(`[${f*1}]`)[0])*1)}catch(b){throw console.error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": not JSON-compliant, detailed error follows"),b.line=t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,b.language="JSON",b.type="number",b}}else if(f*1===1/0)try{JSON.stringify(JSON.parse(f*1))}catch(b){throw console.error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": not JSON-compliant, detailed error follows"),b.line=t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,b.language="JSON",b.type="infinity",b}else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": list items can't have a key",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"})}else throw new Error("Error line number "+(t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2)+": empty list node",{line:t.headless*-1+n.damonOriginalLinesMapping.indexOf(r-1)+2,language:"DAMON"})}}mapToDamon(t){let n=this;var r="";if(Array.isArray(t))r+=`- []
`;else if(typeof t=="object"&&t!==null&&t instanceof Map&&t.constructor===Map)r+=`- {}
`;else return typeof t=="string"&&(t='"'+t+'"'),JSON.parse(t),t;return e(t),n.damonToMap(r.slice(0,-1)),r.slice(0,-1);function e(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[y,m]of s)if(typeof m=="object"&&m!==null)if(Array.isArray(m)){let f=0,b=m.filter(function(E){return E===!0||E===!1?!0:E===null?(f++,!0):typeof E=="string"?!0:!!(isFinite(E)&&!isNaN(parseFloat(E))&&Number.isFinite(E*1)&&!Number.isNaN(E*1))});if(m.length==b.length&&u*4+2+m.join(", ").length+f*4<=80){let E="["+m.map(function(O){return typeof O=="string"&&(O='"'+O+'"'),O}).join(", ")+"]";r+="    ".repeat(u)+"- "+y+": "+E+`
`}else r+="    ".repeat(u)+"- "+y+`: []
`,e(m,u+1)}else r+="    ".repeat(u)+"- "+y+`: {}
`,e(m,u+1);else r+="    ".repeat(u)+"- "+y+": ",m===!0?r+=`true
`:m===!1?r+=`false
`:m===null?r+=`null
`:Number.isFinite(m)&&!Number.isNaN(m)?r+=m+`
`:r+=`"${m}"
`;else if(Array.isArray(s))for(var o=0,d=s.length;o<d;o++)if(typeof s[o]=="object"&&s[o]!==null)if(Array.isArray(s[o])){let y=0,m=s[o].filter(function(f){return f===!0||f===!1?!0:f===null?(y++,!0):typeof f=="string"?!0:!!(isFinite(f)&&!isNaN(parseFloat(f))&&Number.isFinite(f*1)&&!Number.isNaN(f*1))});if(s[o].length==m.length&&u*4+2+s[o].join(", ").length+y*4<=80){let f="["+s[o].map(function(b){return typeof b=="string"&&(b='"'+b+'"'),b}).join(", ")+"]";r+="    ".repeat(u)+"- "+f+`
`}else r+="    ".repeat(u)+`- []
`,e(s[o],u+1)}else r+="    ".repeat(u)+`- {}
`,e(s[o],u+1);else s[o]===!0?r+="    ".repeat(u)+`- true
`:s[o]===!1?r+="    ".repeat(u)+`- false
`:s[o]===null?r+="    ".repeat(u)+`- null
`:Number.isFinite(s[o])&&!Number.isNaN(s[o])?r+="    ".repeat(u)+"- "+s[o]+`
`:r+="    ".repeat(u)+`- "${s[o]}"
`}}mapToJSON(t){let n=this;var r="";if(Array.isArray(t))return r+=`[\r
`,e(t),r+="]",JSON.parse(r),r;return typeof t=="object"&&t!==null&&t instanceof Map&&t.constructor===Map?(r+=`{\r
`,e(t),r+="}",JSON.parse(r),r):(typeof t=="string"&&(t='"'+t+'"'),JSON.parse(t),t);function e(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map)for(let[y,m]of s)typeof m=="object"&&m!==null?Array.isArray(m)?m.length>0?(r+="    ".repeat(u)+`"${y}": [\r
`,e(m,u+1),r+="    ".repeat(u)+"]"):r+="    ".repeat(u)+`"${y}": []`:Array.from(m.keys()).length>0?(r+="    ".repeat(u)+`"${y}": {\r
`,e(m,u+1),r+="    ".repeat(u)+"}"):r+="    ".repeat(u)+`"${y}": {}`:m===!0?r+="    ".repeat(u)+`"${y}": true`:m===!1?r+="    ".repeat(u)+`"${y}": false`:m===null?r+="    ".repeat(u)+`"${y}": null`:Number.isFinite(m)&&!Number.isNaN(m)?r+="    ".repeat(u)+`"${y}": `+m:r+="    ".repeat(u)+`"${y}": "${m}"`,y!=Array.from(s.keys())[Array.from(s.keys()).length-1]?r+=`,\r
`:r+=`\r
`;else if(Array.isArray(s))for(var o=0,d=s.length;o<d;o++)typeof s[o]=="object"&&s[o]!==null?Array.isArray(s[o])?s[o].length>0?(r+="    ".repeat(u)+`[\r
`,e(s[o],u+1),r+="    ".repeat(u)+"]"):r+="    ".repeat(u)+"[]":Array.from(s[o].keys()).length>0?(r+="    ".repeat(u)+`{\r
`,e(s[o],u+1),r+="    ".repeat(u)+"}"):r+="    ".repeat(u)+"{}":s[o]===!0?r+="    ".repeat(u)+"true":s[o]===!1?r+="    ".repeat(u)+"false":s[o]===null?r+="    ".repeat(u)+"null":Number.isFinite(s[o])&&!Number.isNaN(s[o])?r+="    ".repeat(u)+s[o]:r+="    ".repeat(u)+`"${s[o]}"`,o!=d-1?r+=`,\r
`:r+=`\r
`}}implicitMapToSExpression(t){let n=this;var r="";if(typeof t=="object"&&t!==null&&t instanceof Map&&t.constructor===Map)return r+=`[\r
`,e(t),r+="]",JSON.parse(r),r;return typeof t=="string"&&(t='"'+t+'"'),JSON.parse(t),t;function e(s,u=1){if(typeof s=="object"&&s!==null&&!Array.isArray(s)&&s instanceof Map&&s.constructor===Map){let y=-1;for(let[m,f]of s){if(y++,typeof f=="object"&&f!==null)if(Array.isArray(f))f.length>0?(r+="    ".repeat(u)+`"${m}", [\r
`,e(f,u+1),r+="    ".repeat(u)+"]"):r+="    ".repeat(u)+`"${m}", []`;else if(Array.from(f.keys()).length>0){if(u==1)if(y==0)r="";else throw new Error("Multiple S-Expression roots");r+="    ".repeat(u)+`["${m}", \r
`,e(f,u+1),u!=1&&(r+="    ".repeat(u)+"]")}else r+="    ".repeat(u)+`"${m}", []`;else{if(f===!0)throw new Error("Booleans require quotes");if(f===!1)throw new Error("Booleans require quotes");f===null?r+="    ".repeat(u)+`"${m}"`:Number.isFinite(f)&&!Number.isNaN(f)?r+="    ".repeat(u)+`"${m}", `+f:r+="    ".repeat(u)+`"${m}", "${f}"`}m!=Array.from(s.keys())[Array.from(s.keys()).length-1]?r+=`,\r
`:r+=`\r
`}}else if(Array.isArray(s))for(var o=0,d=s.length;o<d;o++){if(typeof s[o]=="object"&&s[o]!==null)Array.isArray(s[o])?s[o].length>0?(r+="    ".repeat(u)+`[\r
`,e(s[o],u+1),r+="    ".repeat(u)+"]"):r+="    ".repeat(u)+"[]":Array.from(s[o].keys()).length>0?(r+="    ".repeat(u)+`[\r
`,e(s[o],u+1),r+="    ".repeat(u)+"]"):r+="    ".repeat(u)+"[]";else{if(s[o]===!0)throw new Error("Booleans require quotes");if(s[o]===!1)throw new Error("Booleans require quotes");if(s[o]===null)throw new Error("Array-nulls require quotes");Number.isFinite(s[o])&&!Number.isNaN(s[o])?r+="    ".repeat(u)+s[o]:r+="    ".repeat(u)+`"${s[o]}"`}o!=d-1?r+=`,\r
`:r+=`\r
`}}}}});var Ae=U((nt,We)=>{We.exports={key:': "key'}});var Je=U(()=>{var lt=Ae(),J=new Damon,F=`- {}
    - key0: null
    - k\\ney1: []
        - []
            - {}
            - [1, 1, 1]
            - "abc"
    - 1: {}
        - key: 1
        - othe: \\"rKey: ": \\"1e10"
    - More_complex_case: {}
        - key: ["1e10", "abc"]
    - list: []
        - {}
        - {}`;console.log(J.mapToDamon(J.damonToMap(F))==F);console.log(J.jsonToDamon(J.damonToJSON(F))==F);console.log(JSON.stringify(JSON.parse(J.damonToJSON(F))));console.log(J.utils.mapToHtmlList(J.damonToMap(F)));console.log(J.utils.mapToHtmlTable(J.damonToMap(ze)));var ze=`- {}
    - 00: "Caption"
    - 0: {}
        - heading1
        - heading2
        - heading3
    - 1: {}
        - A
        - B
        - C
    - 2: {}
        - A
        - B
        - C`,Me="1e10";console.log(J.template`- {}
    - k\\ney0: null
    - key1: []
        - []
            - {}
    - 1: {}
        - key: 1
        - otherKey: ${Me}
    - More_complex_case: {}
        - key: []
            - "1e10"
            - "abc"`);var Le=`- Divide: {}
    - n
    - Add: {}
        - 1
        - n`;console.log(J.implicitMapToSExpression(J.damonToMap(Le)));console.log(JSON.parse(J.implicitMapToSExpression(J.damonToMap(Le))))});(function(){window.DamonUtils=class{constructor(){}get escape(){this.error()}get mapToHtmlList(){this.error()}get mapToHtmlTable(){this.error()}get mapTreeLeavesToHtmlTable(){this.error()}get htmlToJSON(){this.error()}get mapsDiff(){this.error()}error(){throw new Error("Using damon-lite, Utils available in full build")}},window.Damon=Se(),tests=Je()})();})();
